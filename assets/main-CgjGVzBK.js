var cT=Object.defineProperty;var uT=(t,e,n)=>e in t?cT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var uy=(t,e,n)=>uT(t,typeof e!="symbol"?e+"":e,n);function dT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sx={exports:{}},du={},kx={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),fT=Symbol.for("react.portal"),pT=Symbol.for("react.fragment"),mT=Symbol.for("react.strict_mode"),gT=Symbol.for("react.profiler"),yT=Symbol.for("react.provider"),vT=Symbol.for("react.context"),xT=Symbol.for("react.forward_ref"),wT=Symbol.for("react.suspense"),_T=Symbol.for("react.memo"),bT=Symbol.for("react.lazy"),dy=Symbol.iterator;function ET(t){return t===null||typeof t!="object"?null:(t=dy&&t[dy]||t["@@iterator"],typeof t=="function"?t:null)}var Cx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ax=Object.assign,jx={};function Xi(t,e,n){this.props=t,this.context=e,this.refs=jx,this.updater=n||Cx}Xi.prototype.isReactComponent={};Xi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Px(){}Px.prototype=Xi.prototype;function Jf(t,e,n){this.props=t,this.context=e,this.refs=jx,this.updater=n||Cx}var Zf=Jf.prototype=new Px;Zf.constructor=Jf;Ax(Zf,Xi.prototype);Zf.isPureReactComponent=!0;var hy=Array.isArray,Rx=Object.prototype.hasOwnProperty,ep={current:null},Dx={key:!0,ref:!0,__self:!0,__source:!0};function Lx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Rx.call(e,r)&&!Dx.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ba,type:t,key:i,ref:o,props:s,_owner:ep.current}}function NT(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function TT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fy=/\/+/g;function Id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TT(""+t.key):e.toString(36)}function Xl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ba:case fT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Id(o,0):r,hy(s)?(n="",t!=null&&(n=t.replace(fy,"$&/")+"/"),Xl(s,e,n,"",function(d){return d})):s!=null&&(tp(s)&&(s=NT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",hy(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Id(i,l);o+=Xl(i,e,n,u,s)}else if(u=ET(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Id(i,l++),o+=Xl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return Xl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function IT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rt={current:null},Jl={transition:null},ST={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:ep};function Ox(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!tp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Xi;oe.Fragment=pT;oe.Profiler=gT;oe.PureComponent=Jf;oe.StrictMode=mT;oe.Suspense=wT;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ST;oe.act=Ox;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ax({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ep.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Rx.call(e,u)&&!Dx.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ba,type:t.type,key:s,ref:i,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:vT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yT,_context:t},t.Consumer=t};oe.createElement=Lx;oe.createFactory=function(t){var e=Lx.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:xT,render:t}};oe.isValidElement=tp;oe.lazy=function(t){return{$$typeof:bT,_payload:{_status:-1,_result:t},_init:IT}};oe.memo=function(t,e){return{$$typeof:_T,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Jl.transition;Jl.transition={};try{t()}finally{Jl.transition=e}};oe.unstable_act=Ox;oe.useCallback=function(t,e){return Rt.current.useCallback(t,e)};oe.useContext=function(t){return Rt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return Rt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return Rt.current.useEffect(t,e)};oe.useId=function(){return Rt.current.useId()};oe.useImperativeHandle=function(t,e,n){return Rt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return Rt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return Rt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return Rt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return Rt.current.useReducer(t,e,n)};oe.useRef=function(t){return Rt.current.useRef(t)};oe.useState=function(t){return Rt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return Rt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return Rt.current.useTransition()};oe.version="18.3.1";kx.exports=oe;var T=kx.exports;const Sn=hT(T),kT=dT({__proto__:null,default:Sn},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT=T,AT=Symbol.for("react.element"),jT=Symbol.for("react.fragment"),PT=Object.prototype.hasOwnProperty,RT=CT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DT={key:!0,ref:!0,__self:!0,__source:!0};function Mx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)PT.call(e,r)&&!DT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AT,type:t,key:i,ref:o,props:s,_owner:RT.current}}du.Fragment=jT;du.jsx=Mx;du.jsxs=Mx;Sx.exports=du;var a=Sx.exports,Ih={},Vx={exports:{}},Jt={},Ux={exports:{}},Fx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var X=U.length;U.push(K);e:for(;0<X;){var W=X-1>>>1,J=U[W];if(0<s(J,K))U[W]=K,U[X]=J,X=W;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],X=U.pop();if(X!==K){U[0]=X;e:for(var W=0,J=U.length,de=J>>>1;W<de;){var dt=2*(W+1)-1,hn=U[dt],Kn=dt+1,Qn=U[Kn];if(0>s(hn,X))Kn<J&&0>s(Qn,hn)?(U[W]=Qn,U[Kn]=X,W=Kn):(U[W]=hn,U[dt]=X,W=dt);else if(Kn<J&&0>s(Qn,X))U[W]=Qn,U[Kn]=X,W=Kn;else break e}}return K}function s(U,K){var X=U.sortIndex-K.sortIndex;return X!==0?X:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,v=!1,E=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=U)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function P(U){if(S=!1,b(U),!E)if(n(u)!==null)E=!0,Z(O);else{var K=n(d);K!==null&&z(P,K.startTime-U)}}function O(U,K){E=!1,S&&(S=!1,x(_),_=-1),v=!0;var X=g;try{for(b(K),p=n(u);p!==null&&(!(p.expirationTime>K)||U&&!j());){var W=p.callback;if(typeof W=="function"){p.callback=null,g=p.priorityLevel;var J=W(p.expirationTime<=K);K=t.unstable_now(),typeof J=="function"?p.callback=J:p===n(u)&&r(u),b(K)}else r(u);p=n(u)}if(p!==null)var de=!0;else{var dt=n(d);dt!==null&&z(P,dt.startTime-K),de=!1}return de}finally{p=null,g=X,v=!1}}var M=!1,N=null,_=-1,I=5,C=-1;function j(){return!(t.unstable_now()-C<I)}function R(){if(N!==null){var U=t.unstable_now();C=U;var K=!0;try{K=N(!0,U)}finally{K?A():(M=!1,N=null)}}else M=!1}var A;if(typeof y=="function")A=function(){y(R)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,be=q.port2;q.port1.onmessage=R,A=function(){be.postMessage(null)}}else A=function(){k(R,0)};function Z(U){N=U,M||(M=!0,A())}function z(U,K){_=k(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){E||v||(E=!0,Z(O))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var X=g;g=K;try{return U()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=g;g=U;try{return K()}finally{g=X}},t.unstable_scheduleCallback=function(U,K,X){var W=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,U={id:h++,callback:K,priorityLevel:U,startTime:X,expirationTime:J,sortIndex:-1},X>W?(U.sortIndex=X,e(d,U),n(u)===null&&U===n(d)&&(S?(x(_),_=-1):S=!0,z(P,X-W))):(U.sortIndex=J,e(u,U),E||v||(E=!0,Z(O))),U},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(U){var K=g;return function(){var X=g;g=K;try{return U.apply(this,arguments)}finally{g=X}}}})(Fx);Ux.exports=Fx;var LT=Ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT=T,Xt=LT;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $x=new Set,da={};function Hs(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(da[t]=e,t=0;t<e.length;t++)$x.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,MT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,py={},my={};function VT(t){return Sh.call(my,t)?!0:Sh.call(py,t)?!1:MT.test(t)?my[t]=!0:(py[t]=!0,!1)}function UT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FT(t,e,n,r){if(e===null||typeof e>"u"||UT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var np=/[\-:]([a-z])/g;function rp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(np,rp);ct[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(np,rp);ct[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(np,rp);ct[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sp(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FT(e,n,s,r)&&(n=null),r||s===null?VT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _r=OT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),li=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),zx=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),Ah=Symbol.for("react.suspense_list"),ap=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),qx=Symbol.for("react.offscreen"),gy=Symbol.iterator;function No(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Sd;function Mo(t){if(Sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sd=e&&e[1]||""}return`
`+Sd+t}var kd=!1;function Cd(t,e){if(!t||kd)return"";kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function $T(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=Cd(t.type,!1),t;case 11:return t=Cd(t.type.render,!1),t;case 1:return t=Cd(t.type,!0),t;default:return""}}function jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case li:return"Portal";case kh:return"Profiler";case ip:return"StrictMode";case Ch:return"Suspense";case Ah:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zx:return(t.displayName||"Context")+".Consumer";case Bx:return(t._context.displayName||"Context")+".Provider";case op:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ap:return e=t.displayName||null,e!==null?e:jh(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return jh(t(e))}catch{}}return null}function BT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zT(t){var e=Wx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sl(t){t._valueTracker||(t._valueTracker=zT(t))}function Hx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Wx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ph(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gx(t,e){e=e.checked,e!=null&&sp(t,"checked",e,!1)}function Rh(t,e){Gx(t,e);var n=ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dh(t,e.type,ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dh(t,e,n){(e!=="number"||xc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vo=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Lh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Vo(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ts(n)}}function Kx(t,e){var n=ts(e.value),r=ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,Yx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qT=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){qT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function Xx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function Jx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Xx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var WT=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mh(t,e){if(e){if(WT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Vh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=null;function lp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,Ei=null,Ni=null;function _y(t){if(t=Wa(t)){if(typeof Fh!="function")throw Error($(280));var e=t.stateNode;e&&(e=gu(e),Fh(t.stateNode,t.type,e))}}function Zx(t){Ei?Ni?Ni.push(t):Ni=[t]:Ei=t}function ew(){if(Ei){var t=Ei,e=Ni;if(Ni=Ei=null,_y(t),e)for(t=0;t<e.length;t++)_y(e[t])}}function tw(t,e){return t(e)}function nw(){}var Ad=!1;function rw(t,e,n){if(Ad)return t(e,n);Ad=!0;try{return tw(t,e,n)}finally{Ad=!1,(Ei!==null||Ni!==null)&&(nw(),ew())}}function fa(t,e){var n=t.stateNode;if(n===null)return null;var r=gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var $h=!1;if(fr)try{var To={};Object.defineProperty(To,"passive",{get:function(){$h=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{$h=!1}function HT(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Qo=!1,wc=null,_c=!1,Bh=null,GT={onError:function(t){Qo=!0,wc=t}};function KT(t,e,n,r,s,i,o,l,u){Qo=!1,wc=null,HT.apply(GT,arguments)}function QT(t,e,n,r,s,i,o,l,u){if(KT.apply(this,arguments),Qo){if(Qo){var d=wc;Qo=!1,wc=null}else throw Error($(198));_c||(_c=!0,Bh=d)}}function Gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function by(t){if(Gs(t)!==t)throw Error($(188))}function YT(t){var e=t.alternate;if(!e){if(e=Gs(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return by(s),t;if(i===r)return by(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function iw(t){return t=YT(t),t!==null?ow(t):null}function ow(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ow(t);if(e!==null)return e;t=t.sibling}return null}var aw=Xt.unstable_scheduleCallback,Ey=Xt.unstable_cancelCallback,XT=Xt.unstable_shouldYield,JT=Xt.unstable_requestPaint,$e=Xt.unstable_now,ZT=Xt.unstable_getCurrentPriorityLevel,cp=Xt.unstable_ImmediatePriority,lw=Xt.unstable_UserBlockingPriority,bc=Xt.unstable_NormalPriority,eI=Xt.unstable_LowPriority,cw=Xt.unstable_IdlePriority,hu=null,Dn=null;function tI(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(hu,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:sI,nI=Math.log,rI=Math.LN2;function sI(t){return t>>>=0,t===0?32:31-(nI(t)/rI|0)|0}var Cl=64,Al=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Uo(l):(i&=o,i!==0&&(r=Uo(i)))}else o=n&~s,o!==0?r=Uo(o):i!==0&&(r=Uo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),s=1<<n,r|=t[n],e&=~s;return r}function iI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_n(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=iI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function zh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uw(){var t=Cl;return Cl<<=1,!(Cl&4194240)&&(Cl=64),t}function jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function aI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_n(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function up(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ye=0;function dw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hw,dp,fw,pw,mw,qh=!1,jl=[],qr=null,Wr=null,Hr=null,pa=new Map,ma=new Map,Pr=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ny(t,e){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function Io(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wa(e),e!==null&&dp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function cI(t,e,n,r,s){switch(e){case"focusin":return qr=Io(qr,t,e,n,r,s),!0;case"dragenter":return Wr=Io(Wr,t,e,n,r,s),!0;case"mouseover":return Hr=Io(Hr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pa.set(i,Io(pa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ma.set(i,Io(ma.get(i)||null,t,e,n,r,s)),!0}return!1}function gw(t){var e=Es(t.target);if(e!==null){var n=Gs(e);if(n!==null){if(e=n.tag,e===13){if(e=sw(n),e!==null){t.blockedOn=e,mw(t.priority,function(){fw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uh=r,n.target.dispatchEvent(r),Uh=null}else return e=Wa(n),e!==null&&dp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ty(t,e,n){Zl(t)&&n.delete(e)}function uI(){qh=!1,qr!==null&&Zl(qr)&&(qr=null),Wr!==null&&Zl(Wr)&&(Wr=null),Hr!==null&&Zl(Hr)&&(Hr=null),pa.forEach(Ty),ma.forEach(Ty)}function So(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,uI)))}function ga(t){function e(s){return So(s,t)}if(0<jl.length){So(jl[0],t);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qr!==null&&So(qr,t),Wr!==null&&So(Wr,t),Hr!==null&&So(Hr,t),pa.forEach(e),ma.forEach(e),n=0;n<Pr.length;n++)r=Pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(n=Pr[0],n.blockedOn===null);)gw(n),n.blockedOn===null&&Pr.shift()}var Ti=_r.ReactCurrentBatchConfig,Nc=!0;function dI(t,e,n,r){var s=ye,i=Ti.transition;Ti.transition=null;try{ye=1,hp(t,e,n,r)}finally{ye=s,Ti.transition=i}}function hI(t,e,n,r){var s=ye,i=Ti.transition;Ti.transition=null;try{ye=4,hp(t,e,n,r)}finally{ye=s,Ti.transition=i}}function hp(t,e,n,r){if(Nc){var s=Wh(t,e,n,r);if(s===null)$d(t,e,r,Tc,n),Ny(t,r);else if(cI(s,t,e,n,r))r.stopPropagation();else if(Ny(t,r),e&4&&-1<lI.indexOf(t)){for(;s!==null;){var i=Wa(s);if(i!==null&&hw(i),i=Wh(t,e,n,r),i===null&&$d(t,e,r,Tc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $d(t,e,r,null,n)}}var Tc=null;function Wh(t,e,n,r){if(Tc=null,t=lp(r),t=Es(t),t!==null)if(e=Gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function yw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZT()){case cp:return 1;case lw:return 4;case bc:case eI:return 16;case cw:return 536870912;default:return 16}default:return 16}}var Fr=null,fp=null,ec=null;function vw(){if(ec)return ec;var t,e=fp,n=e.length,r,s="value"in Fr?Fr.value:Fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ec=s.slice(t,1<r?1-r:void 0)}function tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pl(){return!0}function Iy(){return!1}function Zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pl:Iy,this.isPropagationStopped=Iy,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),e}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pp=Zt(Ji),qa=Re({},Ji,{view:0,detail:0}),fI=Zt(qa),Pd,Rd,ko,fu=Re({},qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ko&&(ko&&t.type==="mousemove"?(Pd=t.screenX-ko.screenX,Rd=t.screenY-ko.screenY):Rd=Pd=0,ko=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Rd}}),Sy=Zt(fu),pI=Re({},fu,{dataTransfer:0}),mI=Zt(pI),gI=Re({},qa,{relatedTarget:0}),Dd=Zt(gI),yI=Re({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),vI=Zt(yI),xI=Re({},Ji,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wI=Zt(xI),_I=Re({},Ji,{data:0}),ky=Zt(_I),bI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NI[t])?!!e[t]:!1}function mp(){return TI}var II=Re({},qa,{key:function(t){if(t.key){var e=bI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mp,charCode:function(t){return t.type==="keypress"?tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SI=Zt(II),kI=Re({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cy=Zt(kI),CI=Re({},qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mp}),AI=Zt(CI),jI=Re({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),PI=Zt(jI),RI=Re({},fu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DI=Zt(RI),LI=[9,13,27,32],gp=fr&&"CompositionEvent"in window,Yo=null;fr&&"documentMode"in document&&(Yo=document.documentMode);var OI=fr&&"TextEvent"in window&&!Yo,xw=fr&&(!gp||Yo&&8<Yo&&11>=Yo),Ay=" ",jy=!1;function ww(t,e){switch(t){case"keyup":return LI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _w(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function MI(t,e){switch(t){case"compositionend":return _w(e);case"keypress":return e.which!==32?null:(jy=!0,Ay);case"textInput":return t=e.data,t===Ay&&jy?null:t;default:return null}}function VI(t,e){if(ui)return t==="compositionend"||!gp&&ww(t,e)?(t=vw(),ec=fp=Fr=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xw&&e.locale!=="ko"?null:e.data;default:return null}}var UI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Py(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!UI[t.type]:e==="textarea"}function bw(t,e,n,r){Zx(r),e=Ic(e,"onChange"),0<e.length&&(n=new pp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xo=null,ya=null;function FI(t){Rw(t,0)}function pu(t){var e=fi(t);if(Hx(e))return t}function $I(t,e){if(t==="change")return e}var Ew=!1;if(fr){var Ld;if(fr){var Od="oninput"in document;if(!Od){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),Od=typeof Ry.oninput=="function"}Ld=Od}else Ld=!1;Ew=Ld&&(!document.documentMode||9<document.documentMode)}function Dy(){Xo&&(Xo.detachEvent("onpropertychange",Nw),ya=Xo=null)}function Nw(t){if(t.propertyName==="value"&&pu(ya)){var e=[];bw(e,ya,t,lp(t)),rw(FI,e)}}function BI(t,e,n){t==="focusin"?(Dy(),Xo=e,ya=n,Xo.attachEvent("onpropertychange",Nw)):t==="focusout"&&Dy()}function zI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pu(ya)}function qI(t,e){if(t==="click")return pu(e)}function WI(t,e){if(t==="input"||t==="change")return pu(e)}function HI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:HI;function va(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sh.call(e,s)||!En(t[s],e[s]))return!1}return!0}function Ly(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oy(t,e){var n=Ly(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ly(n)}}function Tw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Tw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Iw(){for(var t=window,e=xc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xc(t.document)}return e}function yp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GI(t){var e=Iw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Tw(n.ownerDocument.documentElement,n)){if(r!==null&&yp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Oy(n,i);var o=Oy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KI=fr&&"documentMode"in document&&11>=document.documentMode,di=null,Hh=null,Jo=null,Gh=!1;function My(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||di==null||di!==xc(r)||(r=di,"selectionStart"in r&&yp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&va(Jo,r)||(Jo=r,r=Ic(Hh,"onSelect"),0<r.length&&(e=new pp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=di)))}function Rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Md={},Sw={};fr&&(Sw=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function mu(t){if(Md[t])return Md[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sw)return Md[t]=e[n];return t}var kw=mu("animationend"),Cw=mu("animationiteration"),Aw=mu("animationstart"),jw=mu("transitionend"),Pw=new Map,Vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function os(t,e){Pw.set(t,e),Hs(e,[t])}for(var Vd=0;Vd<Vy.length;Vd++){var Ud=Vy[Vd],QI=Ud.toLowerCase(),YI=Ud[0].toUpperCase()+Ud.slice(1);os(QI,"on"+YI)}os(kw,"onAnimationEnd");os(Cw,"onAnimationIteration");os(Aw,"onAnimationStart");os("dblclick","onDoubleClick");os("focusin","onFocus");os("focusout","onBlur");os(jw,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fo));function Uy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QT(r,e,void 0,t),t.currentTarget=null}function Rw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Uy(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Uy(s,l,d),i=u}}}if(_c)throw t=Bh,_c=!1,Bh=null,t}function Te(t,e){var n=e[Jh];n===void 0&&(n=e[Jh]=new Set);var r=t+"__bubble";n.has(r)||(Dw(e,t,2,!1),n.add(r))}function Fd(t,e,n){var r=0;e&&(r|=4),Dw(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[Dl]){t[Dl]=!0,$x.forEach(function(n){n!=="selectionchange"&&(XI.has(n)||Fd(n,!1,t),Fd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Fd("selectionchange",!1,e))}}function Dw(t,e,n,r){switch(yw(e)){case 1:var s=dI;break;case 4:s=hI;break;default:s=hp}n=s.bind(null,e,n,t),s=void 0,!$h||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $d(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Es(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}rw(function(){var d=i,h=lp(n),p=[];e:{var g=Pw.get(t);if(g!==void 0){var v=pp,E=t;switch(t){case"keypress":if(tc(n)===0)break e;case"keydown":case"keyup":v=SI;break;case"focusin":E="focus",v=Dd;break;case"focusout":E="blur",v=Dd;break;case"beforeblur":case"afterblur":v=Dd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=mI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=AI;break;case kw:case Cw:case Aw:v=vI;break;case jw:v=PI;break;case"scroll":v=fI;break;case"wheel":v=DI;break;case"copy":case"cut":case"paste":v=wI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Cy}var S=(e&4)!==0,k=!S&&t==="scroll",x=S?g!==null?g+"Capture":null:g;S=[];for(var y=d,b;y!==null;){b=y;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,x!==null&&(P=fa(y,x),P!=null&&S.push(wa(y,P,b)))),k)break;y=y.return}0<S.length&&(g=new v(g,E,null,n,h),p.push({event:g,listeners:S}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Uh&&(E=n.relatedTarget||n.fromElement)&&(Es(E)||E[pr]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(E=n.relatedTarget||n.toElement,v=d,E=E?Es(E):null,E!==null&&(k=Gs(E),E!==k||E.tag!==5&&E.tag!==6)&&(E=null)):(v=null,E=d),v!==E)){if(S=Sy,P="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(S=Cy,P="onPointerLeave",x="onPointerEnter",y="pointer"),k=v==null?g:fi(v),b=E==null?g:fi(E),g=new S(P,y+"leave",v,n,h),g.target=k,g.relatedTarget=b,P=null,Es(h)===d&&(S=new S(x,y+"enter",E,n,h),S.target=b,S.relatedTarget=k,P=S),k=P,v&&E)t:{for(S=v,x=E,y=0,b=S;b;b=si(b))y++;for(b=0,P=x;P;P=si(P))b++;for(;0<y-b;)S=si(S),y--;for(;0<b-y;)x=si(x),b--;for(;y--;){if(S===x||x!==null&&S===x.alternate)break t;S=si(S),x=si(x)}S=null}else S=null;v!==null&&Fy(p,g,v,S,!1),E!==null&&k!==null&&Fy(p,k,E,S,!0)}}e:{if(g=d?fi(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=$I;else if(Py(g))if(Ew)O=WI;else{O=zI;var M=BI}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=qI);if(O&&(O=O(t,d))){bw(p,O,n,h);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Dh(g,"number",g.value)}switch(M=d?fi(d):window,t){case"focusin":(Py(M)||M.contentEditable==="true")&&(di=M,Hh=d,Jo=null);break;case"focusout":Jo=Hh=di=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,My(p,n,h);break;case"selectionchange":if(KI)break;case"keydown":case"keyup":My(p,n,h)}var N;if(gp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ui?ww(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(xw&&n.locale!=="ko"&&(ui||_!=="onCompositionStart"?_==="onCompositionEnd"&&ui&&(N=vw()):(Fr=h,fp="value"in Fr?Fr.value:Fr.textContent,ui=!0)),M=Ic(d,_),0<M.length&&(_=new ky(_,t,null,n,h),p.push({event:_,listeners:M}),N?_.data=N:(N=_w(n),N!==null&&(_.data=N)))),(N=OI?MI(t,n):VI(t,n))&&(d=Ic(d,"onBeforeInput"),0<d.length&&(h=new ky("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=N))}Rw(p,e)})}function wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fa(t,n),i!=null&&r.unshift(wa(t,i,s)),i=fa(t,e),i!=null&&r.push(wa(t,i,s))),t=t.return}return r}function si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=fa(n,i),u!=null&&o.unshift(wa(n,u,l))):s||(u=fa(n,i),u!=null&&o.push(wa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JI=/\r\n?/g,ZI=/\u0000|\uFFFD/g;function $y(t){return(typeof t=="string"?t:""+t).replace(JI,`
`).replace(ZI,"")}function Ll(t,e,n){if(e=$y(e),$y(t)!==e&&n)throw Error($(425))}function Sc(){}var Kh=null,Qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,eS=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,tS=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(nS)}:Xh;function nS(t){setTimeout(function(){throw t})}function Bd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ga(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ga(e)}function Gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),An="__reactFiber$"+Zi,_a="__reactProps$"+Zi,pr="__reactContainer$"+Zi,Jh="__reactEvents$"+Zi,rS="__reactListeners$"+Zi,sS="__reactHandles$"+Zi;function Es(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zy(t);t!==null;){if(n=t[An])return n;t=zy(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[An]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function gu(t){return t[_a]||null}var Zh=[],pi=-1;function as(t){return{current:t}}function ke(t){0>pi||(t.current=Zh[pi],Zh[pi]=null,pi--)}function we(t,e){pi++,Zh[pi]=t.current,t.current=e}var ns={},bt=as(ns),Ut=as(!1),Rs=ns;function Li(t,e){var n=t.type.contextTypes;if(!n)return ns;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(t){return t=t.childContextTypes,t!=null}function kc(){ke(Ut),ke(bt)}function qy(t,e,n){if(bt.current!==ns)throw Error($(168));we(bt,e),we(Ut,n)}function Lw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,BT(t)||"Unknown",s));return Re({},n,r)}function Cc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ns,Rs=bt.current,we(bt,t),we(Ut,Ut.current),!0}function Wy(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=Lw(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,ke(Ut),ke(bt),we(bt,t)):ke(Ut),we(Ut,n)}var tr=null,yu=!1,zd=!1;function Ow(t){tr===null?tr=[t]:tr.push(t)}function iS(t){yu=!0,Ow(t)}function ls(){if(!zd&&tr!==null){zd=!0;var t=0,e=ye;try{var n=tr;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}tr=null,yu=!1}catch(s){throw tr!==null&&(tr=tr.slice(t+1)),aw(cp,ls),s}finally{ye=e,zd=!1}}return null}var mi=[],gi=0,Ac=null,jc=0,en=[],tn=0,Ds=null,rr=1,sr="";function ys(t,e){mi[gi++]=jc,mi[gi++]=Ac,Ac=t,jc=e}function Mw(t,e,n){en[tn++]=rr,en[tn++]=sr,en[tn++]=Ds,Ds=t;var r=rr;t=sr;var s=32-_n(r)-1;r&=~(1<<s),n+=1;var i=32-_n(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,rr=1<<32-_n(e)+s|n<<s|r,sr=i+t}else rr=1<<i|n<<s|r,sr=t}function vp(t){t.return!==null&&(ys(t,1),Mw(t,1,0))}function xp(t){for(;t===Ac;)Ac=mi[--gi],mi[gi]=null,jc=mi[--gi],mi[gi]=null;for(;t===Ds;)Ds=en[--tn],en[tn]=null,sr=en[--tn],en[tn]=null,rr=en[--tn],en[tn]=null}var Qt=null,Gt=null,Ce=!1,yn=null;function Vw(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=Gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ds!==null?{id:rr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Gt=null,!0):!1;default:return!1}}function ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tf(t){if(Ce){var e=Gt;if(e){var n=e;if(!Hy(t,e)){if(ef(t))throw Error($(418));e=Gr(n.nextSibling);var r=Qt;e&&Hy(t,e)?Vw(r,n):(t.flags=t.flags&-4097|2,Ce=!1,Qt=t)}}else{if(ef(t))throw Error($(418));t.flags=t.flags&-4097|2,Ce=!1,Qt=t}}}function Gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Ol(t){if(t!==Qt)return!1;if(!Ce)return Gy(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Gt)){if(ef(t))throw Uw(),Error($(418));for(;e;)Vw(t,e),e=Gr(e.nextSibling)}if(Gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Qt?Gr(t.stateNode.nextSibling):null;return!0}function Uw(){for(var t=Gt;t;)t=Gr(t.nextSibling)}function Oi(){Gt=Qt=null,Ce=!1}function wp(t){yn===null?yn=[t]:yn.push(t)}var oS=_r.ReactCurrentBatchConfig;function Co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ky(t){var e=t._init;return e(t._payload)}function Fw(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Xr(x,y),x.index=0,x.sibling=null,x}function i(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,P){return y===null||y.tag!==6?(y=Yd(b,x.mode,P),y.return=x,y):(y=s(y,b),y.return=x,y)}function u(x,y,b,P){var O=b.type;return O===ci?h(x,y,b.props.children,P,b.key):y!==null&&(y.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ar&&Ky(O)===y.type)?(P=s(y,b.props),P.ref=Co(x,y,b),P.return=x,P):(P=lc(b.type,b.key,b.props,null,x.mode,P),P.ref=Co(x,y,b),P.return=x,P)}function d(x,y,b,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Xd(b,x.mode,P),y.return=x,y):(y=s(y,b.children||[]),y.return=x,y)}function h(x,y,b,P,O){return y===null||y.tag!==7?(y=As(b,x.mode,P,O),y.return=x,y):(y=s(y,b),y.return=x,y)}function p(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yd(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:return b=lc(y.type,y.key,y.props,null,x.mode,b),b.ref=Co(x,null,y),b.return=x,b;case li:return y=Xd(y,x.mode,b),y.return=x,y;case Ar:var P=y._init;return p(x,P(y._payload),b)}if(Vo(y)||No(y))return y=As(y,x.mode,b,null),y.return=x,y;Ml(x,y)}return null}function g(x,y,b,P){var O=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return O!==null?null:l(x,y,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Il:return b.key===O?u(x,y,b,P):null;case li:return b.key===O?d(x,y,b,P):null;case Ar:return O=b._init,g(x,y,O(b._payload),P)}if(Vo(b)||No(b))return O!==null?null:h(x,y,b,P,null);Ml(x,b)}return null}function v(x,y,b,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return x=x.get(b)||null,l(y,x,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Il:return x=x.get(P.key===null?b:P.key)||null,u(y,x,P,O);case li:return x=x.get(P.key===null?b:P.key)||null,d(y,x,P,O);case Ar:var M=P._init;return v(x,y,b,M(P._payload),O)}if(Vo(P)||No(P))return x=x.get(b)||null,h(y,x,P,O,null);Ml(y,P)}return null}function E(x,y,b,P){for(var O=null,M=null,N=y,_=y=0,I=null;N!==null&&_<b.length;_++){N.index>_?(I=N,N=null):I=N.sibling;var C=g(x,N,b[_],P);if(C===null){N===null&&(N=I);break}t&&N&&C.alternate===null&&e(x,N),y=i(C,y,_),M===null?O=C:M.sibling=C,M=C,N=I}if(_===b.length)return n(x,N),Ce&&ys(x,_),O;if(N===null){for(;_<b.length;_++)N=p(x,b[_],P),N!==null&&(y=i(N,y,_),M===null?O=N:M.sibling=N,M=N);return Ce&&ys(x,_),O}for(N=r(x,N);_<b.length;_++)I=v(N,x,_,b[_],P),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?_:I.key),y=i(I,y,_),M===null?O=I:M.sibling=I,M=I);return t&&N.forEach(function(j){return e(x,j)}),Ce&&ys(x,_),O}function S(x,y,b,P){var O=No(b);if(typeof O!="function")throw Error($(150));if(b=O.call(b),b==null)throw Error($(151));for(var M=O=null,N=y,_=y=0,I=null,C=b.next();N!==null&&!C.done;_++,C=b.next()){N.index>_?(I=N,N=null):I=N.sibling;var j=g(x,N,C.value,P);if(j===null){N===null&&(N=I);break}t&&N&&j.alternate===null&&e(x,N),y=i(j,y,_),M===null?O=j:M.sibling=j,M=j,N=I}if(C.done)return n(x,N),Ce&&ys(x,_),O;if(N===null){for(;!C.done;_++,C=b.next())C=p(x,C.value,P),C!==null&&(y=i(C,y,_),M===null?O=C:M.sibling=C,M=C);return Ce&&ys(x,_),O}for(N=r(x,N);!C.done;_++,C=b.next())C=v(N,x,_,C.value,P),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?_:C.key),y=i(C,y,_),M===null?O=C:M.sibling=C,M=C);return t&&N.forEach(function(R){return e(x,R)}),Ce&&ys(x,_),O}function k(x,y,b,P){if(typeof b=="object"&&b!==null&&b.type===ci&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Il:e:{for(var O=b.key,M=y;M!==null;){if(M.key===O){if(O=b.type,O===ci){if(M.tag===7){n(x,M.sibling),y=s(M,b.props.children),y.return=x,x=y;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ar&&Ky(O)===M.type){n(x,M.sibling),y=s(M,b.props),y.ref=Co(x,M,b),y.return=x,x=y;break e}n(x,M);break}else e(x,M);M=M.sibling}b.type===ci?(y=As(b.props.children,x.mode,P,b.key),y.return=x,x=y):(P=lc(b.type,b.key,b.props,null,x.mode,P),P.ref=Co(x,y,b),P.return=x,x=P)}return o(x);case li:e:{for(M=b.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(x,y.sibling),y=s(y,b.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=Xd(b,x.mode,P),y.return=x,x=y}return o(x);case Ar:return M=b._init,k(x,y,M(b._payload),P)}if(Vo(b))return E(x,y,b,P);if(No(b))return S(x,y,b,P);Ml(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,b),y.return=x,x=y):(n(x,y),y=Yd(b,x.mode,P),y.return=x,x=y),o(x)):n(x,y)}return k}var Mi=Fw(!0),$w=Fw(!1),Pc=as(null),Rc=null,yi=null,_p=null;function bp(){_p=yi=Rc=null}function Ep(t){var e=Pc.current;ke(Pc),t._currentValue=e}function nf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ii(t,e){Rc=t,_p=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(_p!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(Rc===null)throw Error($(308));yi=t,Rc.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var Ns=null;function Np(t){Ns===null?Ns=[t]:Ns.push(t)}function Bw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Np(e)):(n.next=s.next,s.next=n),e.interleaved=n,mr(t,r)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function Tp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function lr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,mr(t,n)}return s=r.interleaved,s===null?(e.next=e,Np(r)):(e.next=s.next,s.next=e),r.interleaved=e,mr(t,n)}function nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,up(t,n)}}function Qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;jr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,h=d=u=null,l=i;do{var g=l.lane,v=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var E=t,S=l;switch(g=e,v=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){p=E.call(v,p,g);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,g=typeof E=="function"?E.call(v,p,g):E,g==null)break e;p=Re({},p,g);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else v={eventTime:v,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,u=p):h=h.next=v,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(h===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Os|=o,t.lanes=o,t.memoizedState=p}}function Yy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var Ha={},Ln=as(Ha),ba=as(Ha),Ea=as(Ha);function Ts(t){if(t===Ha)throw Error($(174));return t}function Ip(t,e){switch(we(Ea,e),we(ba,t),we(Ln,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Oh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Oh(e,t)}ke(Ln),we(Ln,e)}function Vi(){ke(Ln),ke(ba),ke(Ea)}function qw(t){Ts(Ea.current);var e=Ts(Ln.current),n=Oh(e,t.type);e!==n&&(we(ba,t),we(Ln,n))}function Sp(t){ba.current===t&&(ke(Ln),ke(ba))}var je=as(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qd=[];function kp(){for(var t=0;t<qd.length;t++)qd[t]._workInProgressVersionPrimary=null;qd.length=0}var rc=_r.ReactCurrentDispatcher,Wd=_r.ReactCurrentBatchConfig,Ls=0,Pe=null,Ge=null,Je=null,Oc=!1,Zo=!1,Na=0,aS=0;function mt(){throw Error($(321))}function Cp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function Ap(t,e,n,r,s,i){if(Ls=i,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rc.current=t===null||t.memoizedState===null?dS:hS,t=n(r,s),Zo){i=0;do{if(Zo=!1,Na=0,25<=i)throw Error($(301));i+=1,Je=Ge=null,e.updateQueue=null,rc.current=fS,t=n(r,s)}while(Zo)}if(rc.current=Mc,e=Ge!==null&&Ge.next!==null,Ls=0,Je=Ge=Pe=null,Oc=!1,e)throw Error($(300));return t}function jp(){var t=Na!==0;return Na=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Pe.memoizedState=Je=t:Je=Je.next=t,Je}function un(){if(Ge===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var e=Je===null?Pe.memoizedState:Je.next;if(e!==null)Je=e,Ge=t;else{if(t===null)throw Error($(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},Je===null?Pe.memoizedState=Je=t:Je=Je.next=t}return Je}function Ta(t,e){return typeof e=="function"?e(t):e}function Hd(t){var e=un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=Ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var h=d.lane;if((Ls&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Pe.lanes|=h,Os|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,En(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Pe.lanes|=i,Os|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gd(t){var e=un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);En(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ww(){}function Hw(t,e){var n=Pe,r=un(),s=e(),i=!En(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,Pp(Qw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ia(9,Kw.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error($(349));Ls&30||Gw(n,e,s)}return s}function Gw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Kw(t,e,n,r){e.value=n,e.getSnapshot=r,Yw(e)&&Xw(t)}function Qw(t,e,n){return n(function(){Yw(e)&&Xw(t)})}function Yw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function Xw(t){var e=mr(t,1);e!==null&&bn(e,t,1,-1)}function Xy(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=uS.bind(null,Pe,t),[e.memoizedState,t]}function Ia(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jw(){return un().memoizedState}function sc(t,e,n,r){var s=Cn();Pe.flags|=t,s.memoizedState=Ia(1|e,n,void 0,r===void 0?null:r)}function vu(t,e,n,r){var s=un();r=r===void 0?null:r;var i=void 0;if(Ge!==null){var o=Ge.memoizedState;if(i=o.destroy,r!==null&&Cp(r,o.deps)){s.memoizedState=Ia(e,n,i,r);return}}Pe.flags|=t,s.memoizedState=Ia(1|e,n,i,r)}function Jy(t,e){return sc(8390656,8,t,e)}function Pp(t,e){return vu(2048,8,t,e)}function Zw(t,e){return vu(4,2,t,e)}function e_(t,e){return vu(4,4,t,e)}function t_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function n_(t,e,n){return n=n!=null?n.concat([t]):null,vu(4,4,t_.bind(null,e,t),n)}function Rp(){}function r_(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function s_(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function i_(t,e,n){return Ls&21?(En(n,e)||(n=uw(),Pe.lanes|=n,Os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function lS(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=Wd.transition;Wd.transition={};try{t(!1),e()}finally{ye=n,Wd.transition=r}}function o_(){return un().memoizedState}function cS(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},a_(t))l_(e,n);else if(n=Bw(t,e,n,r),n!==null){var s=Ct();bn(n,t,r,s),c_(n,e,r)}}function uS(t,e,n){var r=Yr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(a_(t))l_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,En(l,o)){var u=e.interleaved;u===null?(s.next=s,Np(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Bw(t,e,s,r),n!==null&&(s=Ct(),bn(n,t,r,s),c_(n,e,r))}}function a_(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function l_(t,e){Zo=Oc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,up(t,n)}}var Mc={readContext:cn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},dS={readContext:cn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:Jy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sc(4194308,4,t_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return sc(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cS.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:Xy,useDebugValue:Rp,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=Xy(!1),e=t[0];return t=lS.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,s=Cn();if(Ce){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Ze===null)throw Error($(349));Ls&30||Gw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Jy(Qw.bind(null,r,i,t),[t]),r.flags|=2048,Ia(9,Kw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Cn(),e=Ze.identifierPrefix;if(Ce){var n=sr,r=rr;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Na++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hS={readContext:cn,useCallback:r_,useContext:cn,useEffect:Pp,useImperativeHandle:n_,useInsertionEffect:Zw,useLayoutEffect:e_,useMemo:s_,useReducer:Hd,useRef:Jw,useState:function(){return Hd(Ta)},useDebugValue:Rp,useDeferredValue:function(t){var e=un();return i_(e,Ge.memoizedState,t)},useTransition:function(){var t=Hd(Ta)[0],e=un().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:o_,unstable_isNewReconciler:!1},fS={readContext:cn,useCallback:r_,useContext:cn,useEffect:Pp,useImperativeHandle:n_,useInsertionEffect:Zw,useLayoutEffect:e_,useMemo:s_,useReducer:Gd,useRef:Jw,useState:function(){return Gd(Ta)},useDebugValue:Rp,useDeferredValue:function(t){var e=un();return Ge===null?e.memoizedState=t:i_(e,Ge.memoizedState,t)},useTransition:function(){var t=Gd(Ta)[0],e=un().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:Hw,useId:o_,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xu={isMounted:function(t){return(t=t._reactInternals)?Gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Yr(t),i=lr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Kr(t,i,s),e!==null&&(bn(e,t,s,r),nc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Yr(t),i=lr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Kr(t,i,s),e!==null&&(bn(e,t,s,r),nc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Yr(t),s=lr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Kr(t,s,r),e!==null&&(bn(e,t,r,n),nc(e,t,r))}};function Zy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!va(n,r)||!va(s,i):!0}function u_(t,e,n){var r=!1,s=ns,i=e.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Ft(e)?Rs:bt.current,r=e.contextTypes,i=(r=r!=null)?Li(t,s):ns),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function e0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xu.enqueueReplaceState(e,e.state,null)}function sf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Tp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Ft(e)?Rs:bt.current,s.context=Li(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xu.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ui(t,e){try{var n="",r=e;do n+=$T(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pS=typeof WeakMap=="function"?WeakMap:Map;function d_(t,e,n){n=lr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Uc||(Uc=!0,gf=r),of(t,e)},n}function h_(t,e,n){n=lr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){of(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){of(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function t0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kS.bind(null,t,e,n),e.then(t,t))}function n0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function r0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=lr(-1,1),e.tag=2,Kr(n,e,1))),n.lanes|=1),t)}var mS=_r.ReactCurrentOwner,Vt=!1;function St(t,e,n,r){e.child=t===null?$w(e,null,n,r):Mi(e,t.child,n,r)}function s0(t,e,n,r,s){n=n.render;var i=e.ref;return Ii(e,s),r=Ap(t,e,n,r,i,s),n=jp(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gr(t,e,s)):(Ce&&n&&vp(e),e.flags|=1,St(t,e,r,s),e.child)}function i0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$p(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,f_(t,e,i,r,s)):(t=lc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(o,r)&&t.ref===e.ref)return gr(t,e,s)}return e.flags|=1,t=Xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function f_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(va(i,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,gr(t,e,s)}return af(t,e,n,r,s)}function p_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(xi,Wt),Wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(xi,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(xi,Wt),Wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,we(xi,Wt),Wt|=r;return St(t,e,s,n),e.child}function m_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function af(t,e,n,r,s){var i=Ft(n)?Rs:bt.current;return i=Li(e,i),Ii(e,s),n=Ap(t,e,n,r,i,s),r=jp(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gr(t,e,s)):(Ce&&r&&vp(e),e.flags|=1,St(t,e,n,s),e.child)}function o0(t,e,n,r,s){if(Ft(n)){var i=!0;Cc(e)}else i=!1;if(Ii(e,s),e.stateNode===null)ic(t,e),u_(e,n,r),sf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=cn(d):(d=Ft(n)?Rs:bt.current,d=Li(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&e0(e,o,r,d),jr=!1;var g=e.memoizedState;o.state=g,Dc(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Ut.current||jr?(typeof h=="function"&&(rf(e,n,h,r),u=e.memoizedState),(l=jr||Zy(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:mn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Ft(n)?Rs:bt.current,u=Li(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&e0(e,o,r,u),jr=!1,g=e.memoizedState,o.state=g,Dc(e,r,o,s);var E=e.memoizedState;l!==p||g!==E||Ut.current||jr?(typeof v=="function"&&(rf(e,n,v,r),E=e.memoizedState),(d=jr||Zy(e,n,d,r,g,E,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return lf(t,e,n,r,i,s)}function lf(t,e,n,r,s,i){m_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wy(e,n,!1),gr(t,e,i);r=e.stateNode,mS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mi(e,t.child,null,i),e.child=Mi(e,null,l,i)):St(t,e,l,i),e.memoizedState=r.state,s&&Wy(e,n,!0),e.child}function g_(t){var e=t.stateNode;e.pendingContext?qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qy(t,e.context,!1),Ip(t,e.containerInfo)}function a0(t,e,n,r,s){return Oi(),wp(s),e.flags|=256,St(t,e,n,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function uf(t){return{baseLanes:t,cachePool:null,transitions:null}}function y_(t,e,n){var r=e.pendingProps,s=je.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),we(je,s&1),t===null)return tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bu(o,r,0,null),t=As(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uf(n),e.memoizedState=cf,t):Dp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return gS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Xr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Xr(l,i):(i=As(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cf,r}return i=t.child,t=i.sibling,r=Xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dp(t,e){return e=bu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&wp(r),Mi(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error($(422))),Vl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bu({mode:"visible",children:r.children},s,0,null),i=As(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mi(e,t.child,null,o),e.child.memoizedState=uf(o),e.memoizedState=cf,i);if(!(e.mode&1))return Vl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error($(419)),r=Kd(i,r,void 0),Vl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Vt||l){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,mr(t,s),bn(r,t,s,-1))}return Fp(),r=Kd(Error($(421))),Vl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=CS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gt=Gr(s.nextSibling),Qt=e,Ce=!0,yn=null,t!==null&&(en[tn++]=rr,en[tn++]=sr,en[tn++]=Ds,rr=t.id,sr=t.overflow,Ds=e),e=Dp(e,r.children),e.flags|=4096,e)}function l0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nf(t.return,e,n)}function Qd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function v_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&l0(t,n,e);else if(t.tag===19)l0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(je,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qd(e,!0,n,null,i);break;case"together":Qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ic(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yS(t,e,n){switch(e.tag){case 3:g_(e),Oi();break;case 5:qw(e);break;case 1:Ft(e.type)&&Cc(e);break;case 4:Ip(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;we(Pc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?y_(t,e,n):(we(je,je.current&1),t=gr(t,e,n),t!==null?t.sibling:null);we(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return v_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,p_(t,e,n)}return gr(t,e,n)}var x_,df,w_,__;x_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};w_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ts(Ln.current);var i=null;switch(n){case"input":s=Ph(t,s),r=Ph(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Lh(t,s),r=Lh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sc)}Mh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(da.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(da.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Te("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};__=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ao(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function vS(t,e,n){var r=e.pendingProps;switch(xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Ft(e.type)&&kc(),gt(e),null;case 3:return r=e.stateNode,Vi(),ke(Ut),ke(bt),kp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&(xf(yn),yn=null))),df(t,e),gt(e),null;case 5:Sp(e);var s=Ts(Ea.current);if(n=e.type,t!==null&&e.stateNode!=null)w_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return gt(e),null}if(t=Ts(Ln.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[An]=e,r[_a]=i,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(s=0;s<Fo.length;s++)Te(Fo[s],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":yy(r,i),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Te("invalid",r);break;case"textarea":xy(r,i),Te("invalid",r)}Mh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,l,t),s=["children",""+l]):da.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Sl(r),vy(r,i,!0);break;case"textarea":Sl(r),wy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[_a]=r,x_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vh(n,r),n){case"dialog":Te("cancel",t),Te("close",t),s=r;break;case"iframe":case"object":case"embed":Te("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fo.length;s++)Te(Fo[s],t);s=r;break;case"source":Te("error",t),s=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=r;break;case"details":Te("toggle",t),s=r;break;case"input":yy(t,r),s=Ph(t,r),Te("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Te("invalid",t);break;case"textarea":xy(t,r),s=Lh(t,r),Te("invalid",t);break;default:s=r}Mh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Jx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ha(t,u):typeof u=="number"&&ha(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(da.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Te("scroll",t):u!=null&&sp(t,i,u,o))}switch(n){case"input":Sl(t),vy(t,r,!1);break;case"textarea":Sl(t),wy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)__(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=Ts(Ea.current),Ts(Ln.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(i=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return gt(e),null;case 13:if(ke(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Gt!==null&&e.mode&1&&!(e.flags&128))Uw(),Oi(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[An]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),i=!1}else yn!==null&&(xf(yn),yn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?Ke===0&&(Ke=3):Fp())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return Vi(),df(t,e),t===null&&xa(e.stateNode.containerInfo),gt(e),null;case 10:return Ep(e.type._context),gt(e),null;case 17:return Ft(e.type)&&kc(),gt(e),null;case 19:if(ke(je),i=e.memoizedState,i===null)return gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ao(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,Ao(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(je,je.current&1|2),e.child}t=t.sibling}i.tail!==null&&$e()>Fi&&(e.flags|=128,r=!0,Ao(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ce)return gt(e),null}else 2*$e()-i.renderingStartTime>Fi&&n!==1073741824&&(e.flags|=128,r=!0,Ao(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=$e(),e.sibling=null,n=je.current,we(je,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function xS(t,e){switch(xp(e),e.tag){case 1:return Ft(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vi(),ke(Ut),ke(bt),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sp(e),null;case 13:if(ke(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ke(je),null;case 4:return Vi(),null;case 10:return Ep(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var Ul=!1,xt=!1,wS=typeof WeakSet=="function"?WeakSet:Set,G=null;function vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function hf(t,e,n){try{n()}catch(r){Me(t,e,r)}}var c0=!1;function _S(t,e){if(Kh=Nc,t=Iw(),yp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var v;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++h===r&&(u=o),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:t,selectionRange:n},Nc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,k=E.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?S:mn(e.type,S),k);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(P){Me(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return E=c0,c0=!1,E}function ea(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hf(e,n,i)}s=s.next}while(s!==r)}}function wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function b_(t){var e=t.alternate;e!==null&&(t.alternate=null,b_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[_a],delete e[Jh],delete e[rS],delete e[sS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function E_(t){return t.tag===5||t.tag===3||t.tag===4}function u0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sc));else if(r!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var st=null,gn=!1;function Ir(t,e,n){for(n=n.child;n!==null;)N_(t,e,n),n=n.sibling}function N_(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:xt||vi(n,e);case 6:var r=st,s=gn;st=null,Ir(t,e,n),st=r,gn=s,st!==null&&(gn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(gn?(t=st,n=n.stateNode,t.nodeType===8?Bd(t.parentNode,n):t.nodeType===1&&Bd(t,n),ga(t)):Bd(st,n.stateNode));break;case 4:r=st,s=gn,st=n.stateNode.containerInfo,gn=!0,Ir(t,e,n),st=r,gn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hf(n,e,o),s=s.next}while(s!==r)}Ir(t,e,n);break;case 1:if(!xt&&(vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}Ir(t,e,n);break;case 21:Ir(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,Ir(t,e,n),xt=r):Ir(t,e,n);break;default:Ir(t,e,n)}}function d0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wS),e.forEach(function(r){var s=AS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,gn=!1;break e;case 3:st=l.stateNode.containerInfo,gn=!0;break e;case 4:st=l.stateNode.containerInfo,gn=!0;break e}l=l.return}if(st===null)throw Error($(160));N_(i,o,s),st=null,gn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)T_(e,t),e=e.sibling}function T_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),kn(t),r&4){try{ea(3,t,t.return),wu(3,t)}catch(S){Me(t,t.return,S)}try{ea(5,t,t.return)}catch(S){Me(t,t.return,S)}}break;case 1:pn(e,t),kn(t),r&512&&n!==null&&vi(n,n.return);break;case 5:if(pn(e,t),kn(t),r&512&&n!==null&&vi(n,n.return),t.flags&32){var s=t.stateNode;try{ha(s,"")}catch(S){Me(t,t.return,S)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Gx(s,i),Vh(l,o);var d=Vh(l,i);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?Jx(s,p):h==="dangerouslySetInnerHTML"?Yx(s,p):h==="children"?ha(s,p):sp(s,h,p,d)}switch(l){case"input":Rh(s,i);break;case"textarea":Kx(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?bi(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?bi(s,!!i.multiple,i.defaultValue,!0):bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[_a]=i}catch(S){Me(t,t.return,S)}}break;case 6:if(pn(e,t),kn(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(S){Me(t,t.return,S)}}break;case 3:if(pn(e,t),kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(S){Me(t,t.return,S)}break;case 4:pn(e,t),kn(t);break;case 13:pn(e,t),kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mp=$e())),r&4&&d0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(d=xt)||h,pn(e,t),xt=d):pn(e,t),kn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(p=G=h;G!==null;){switch(g=G,v=g.child,g.tag){case 0:case 11:case 14:case 15:ea(4,g,g.return);break;case 1:vi(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){Me(r,n,S)}}break;case 5:vi(g,g.return);break;case 22:if(g.memoizedState!==null){f0(p);continue}}v!==null?(v.return=g,G=v):f0(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Xx("display",o))}catch(S){Me(t,t.return,S)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(S){Me(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:pn(e,t),kn(t),r&4&&d0(t);break;case 21:break;default:pn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(E_(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ha(s,""),r.flags&=-33);var i=u0(t);mf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=u0(t);pf(t,l,o);break;default:throw Error($(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bS(t,e,n){G=t,I_(t)}function I_(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ul;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||xt;l=Ul;var d=xt;if(Ul=o,(xt=u)&&!d)for(G=s;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?p0(s):u!==null?(u.return=o,G=u):p0(s);for(;i!==null;)G=i,I_(i),i=i.sibling;G=s,Ul=l,xt=d}h0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):h0(t)}}function h0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Yy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Yy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ga(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}xt||e.flags&512&&ff(e)}catch(g){Me(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function f0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function p0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wu(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{ff(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{ff(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var ES=Math.ceil,Vc=_r.ReactCurrentDispatcher,Lp=_r.ReactCurrentOwner,an=_r.ReactCurrentBatchConfig,he=0,Ze=null,qe=null,at=0,Wt=0,xi=as(0),Ke=0,Sa=null,Os=0,_u=0,Op=0,ta=null,Lt=null,Mp=0,Fi=1/0,Zn=null,Uc=!1,gf=null,Qr=null,Fl=!1,$r=null,Fc=0,na=0,yf=null,oc=-1,ac=0;function Ct(){return he&6?$e():oc!==-1?oc:oc=$e()}function Yr(t){return t.mode&1?he&2&&at!==0?at&-at:oS.transition!==null?(ac===0&&(ac=uw()),ac):(t=ye,t!==0||(t=window.event,t=t===void 0?16:yw(t.type)),t):1}function bn(t,e,n,r){if(50<na)throw na=0,yf=null,Error($(185));za(t,n,r),(!(he&2)||t!==Ze)&&(t===Ze&&(!(he&2)&&(_u|=n),Ke===4&&Rr(t,at)),$t(t,r),n===1&&he===0&&!(e.mode&1)&&(Fi=$e()+500,yu&&ls()))}function $t(t,e){var n=t.callbackNode;oI(t,e);var r=Ec(t,t===Ze?at:0);if(r===0)n!==null&&Ey(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ey(n),e===1)t.tag===0?iS(m0.bind(null,t)):Ow(m0.bind(null,t)),tS(function(){!(he&6)&&ls()}),n=null;else{switch(dw(r)){case 1:n=cp;break;case 4:n=lw;break;case 16:n=bc;break;case 536870912:n=cw;break;default:n=bc}n=D_(n,S_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S_(t,e){if(oc=-1,ac=0,he&6)throw Error($(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var r=Ec(t,t===Ze?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$c(t,r);else{e=r;var s=he;he|=2;var i=C_();(Ze!==t||at!==e)&&(Zn=null,Fi=$e()+500,Cs(t,e));do try{IS();break}catch(l){k_(t,l)}while(!0);bp(),Vc.current=i,he=s,qe!==null?e=0:(Ze=null,at=0,e=Ke)}if(e!==0){if(e===2&&(s=zh(t),s!==0&&(r=s,e=vf(t,s))),e===1)throw n=Sa,Cs(t,0),Rr(t,r),$t(t,$e()),n;if(e===6)Rr(t,r);else{if(s=t.current.alternate,!(r&30)&&!NS(s)&&(e=$c(t,r),e===2&&(i=zh(t),i!==0&&(r=i,e=vf(t,i))),e===1))throw n=Sa,Cs(t,0),Rr(t,r),$t(t,$e()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:vs(t,Lt,Zn);break;case 3:if(Rr(t,r),(r&130023424)===r&&(e=Mp+500-$e(),10<e)){if(Ec(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xh(vs.bind(null,t,Lt,Zn),e);break}vs(t,Lt,Zn);break;case 4:if(Rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_n(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ES(r/1960))-r,10<r){t.timeoutHandle=Xh(vs.bind(null,t,Lt,Zn),r);break}vs(t,Lt,Zn);break;case 5:vs(t,Lt,Zn);break;default:throw Error($(329))}}}return $t(t,$e()),t.callbackNode===n?S_.bind(null,t):null}function vf(t,e){var n=ta;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=$c(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&xf(e)),t}function xf(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function NS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!En(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~Op,e&=~_u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function m0(t){if(he&6)throw Error($(327));Si();var e=Ec(t,0);if(!(e&1))return $t(t,$e()),null;var n=$c(t,e);if(t.tag!==0&&n===2){var r=zh(t);r!==0&&(e=r,n=vf(t,r))}if(n===1)throw n=Sa,Cs(t,0),Rr(t,e),$t(t,$e()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vs(t,Lt,Zn),$t(t,$e()),null}function Vp(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Fi=$e()+500,yu&&ls())}}function Ms(t){$r!==null&&$r.tag===0&&!(he&6)&&Si();var e=he;he|=1;var n=an.transition,r=ye;try{if(an.transition=null,ye=1,t)return t()}finally{ye=r,an.transition=n,he=e,!(he&6)&&ls()}}function Up(){Wt=xi.current,ke(xi)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eS(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(xp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:Vi(),ke(Ut),ke(bt),kp();break;case 5:Sp(r);break;case 4:Vi();break;case 13:ke(je);break;case 19:ke(je);break;case 10:Ep(r.type._context);break;case 22:case 23:Up()}n=n.return}if(Ze=t,qe=t=Xr(t.current,null),at=Wt=e,Ke=0,Sa=null,Op=_u=Os=0,Lt=ta=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ns=null}return t}function k_(t,e){do{var n=qe;try{if(bp(),rc.current=Mc,Oc){for(var r=Pe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oc=!1}if(Ls=0,Je=Ge=Pe=null,Zo=!1,Na=0,Lp.current=null,n===null||n.return===null){Ke=1,Sa=e,qe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=at,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=n0(o);if(v!==null){v.flags&=-257,r0(v,o,l,i,e),v.mode&1&&t0(i,d,e),e=v,u=d;var E=e.updateQueue;if(E===null){var S=new Set;S.add(u),e.updateQueue=S}else E.add(u);break e}else{if(!(e&1)){t0(i,d,e),Fp();break e}u=Error($(426))}}else if(Ce&&l.mode&1){var k=n0(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),r0(k,o,l,i,e),wp(Ui(u,l));break e}}i=u=Ui(u,l),Ke!==4&&(Ke=2),ta===null?ta=[i]:ta.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=d_(i,u,e);Qy(i,x);break e;case 1:l=u;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qr===null||!Qr.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=h_(i,l,e);Qy(i,P);break e}}i=i.return}while(i!==null)}j_(n)}catch(O){e=O,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function C_(){var t=Vc.current;return Vc.current=Mc,t===null?Mc:t}function Fp(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ze===null||!(Os&268435455)&&!(_u&268435455)||Rr(Ze,at)}function $c(t,e){var n=he;he|=2;var r=C_();(Ze!==t||at!==e)&&(Zn=null,Cs(t,e));do try{TS();break}catch(s){k_(t,s)}while(!0);if(bp(),he=n,Vc.current=r,qe!==null)throw Error($(261));return Ze=null,at=0,Ke}function TS(){for(;qe!==null;)A_(qe)}function IS(){for(;qe!==null&&!XT();)A_(qe)}function A_(t){var e=R_(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?j_(t):qe=e,Lp.current=null}function j_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xS(n,e),n!==null){n.flags&=32767,qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,qe=null;return}}else if(n=vS(n,e,Wt),n!==null){qe=n;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ke===0&&(Ke=5)}function vs(t,e,n){var r=ye,s=an.transition;try{an.transition=null,ye=1,SS(t,e,n,r)}finally{an.transition=s,ye=r}return null}function SS(t,e,n,r){do Si();while($r!==null);if(he&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(aI(t,i),t===Ze&&(qe=Ze=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,D_(bc,function(){return Si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=ye;ye=1;var l=he;he|=4,Lp.current=null,_S(t,n),T_(n,t),GI(Qh),Nc=!!Kh,Qh=Kh=null,t.current=n,bS(n),JT(),he=l,ye=o,an.transition=i}else t.current=n;if(Fl&&(Fl=!1,$r=t,Fc=s),i=t.pendingLanes,i===0&&(Qr=null),tI(n.stateNode),$t(t,$e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Uc)throw Uc=!1,t=gf,gf=null,t;return Fc&1&&t.tag!==0&&Si(),i=t.pendingLanes,i&1?t===yf?na++:(na=0,yf=t):na=0,ls(),null}function Si(){if($r!==null){var t=dw(Fc),e=an.transition,n=ye;try{if(an.transition=null,ye=16>t?16:t,$r===null)var r=!1;else{if(t=$r,$r=null,Fc=0,he&6)throw Error($(331));var s=he;for(he|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(G=d;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:ea(8,h,i)}var p=h.child;if(p!==null)p.return=h,G=p;else for(;G!==null;){h=G;var g=h.sibling,v=h.return;if(b_(h),h===d){G=null;break}if(g!==null){g.return=v,G=g;break}G=v}}}var E=i.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ea(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,G=x;break e}G=i.return}}var y=t.current;for(G=y;G!==null;){o=G;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,G=b;else e:for(o=y;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:wu(9,l)}}catch(O){Me(l,l.return,O)}if(l===o){G=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,G=P;break e}G=l.return}}if(he=s,ls(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(hu,t)}catch{}r=!0}return r}finally{ye=n,an.transition=e}}return!1}function g0(t,e,n){e=Ui(n,e),e=d_(t,e,1),t=Kr(t,e,1),e=Ct(),t!==null&&(za(t,1,e),$t(t,e))}function Me(t,e,n){if(t.tag===3)g0(t,t,n);else for(;e!==null;){if(e.tag===3){g0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=Ui(n,t),t=h_(e,t,1),e=Kr(e,t,1),t=Ct(),e!==null&&(za(e,1,t),$t(e,t));break}}e=e.return}}function kS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(at&n)===n&&(Ke===4||Ke===3&&(at&130023424)===at&&500>$e()-Mp?Cs(t,0):Op|=n),$t(t,e)}function P_(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=Ct();t=mr(t,e),t!==null&&(za(t,e,n),$t(t,n))}function CS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P_(t,n)}function AS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),P_(t,n)}var R_;R_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,yS(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Ce&&e.flags&1048576&&Mw(e,jc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ic(t,e),t=e.pendingProps;var s=Li(e,bt.current);Ii(e,n),s=Ap(null,e,r,t,s,n);var i=jp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(i=!0,Cc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tp(e),s.updater=xu,e.stateNode=s,s._reactInternals=e,sf(e,r,t,n),e=lf(null,e,r,!0,i,n)):(e.tag=0,Ce&&i&&vp(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ic(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=PS(r),t=mn(r,t),s){case 0:e=af(null,e,r,t,n);break e;case 1:e=o0(null,e,r,t,n);break e;case 11:e=s0(null,e,r,t,n);break e;case 14:e=i0(null,e,r,mn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),af(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),o0(t,e,r,s,n);case 3:e:{if(g_(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,zw(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ui(Error($(423)),e),e=a0(t,e,r,n,s);break e}else if(r!==s){s=Ui(Error($(424)),e),e=a0(t,e,r,n,s);break e}else for(Gt=Gr(e.stateNode.containerInfo.firstChild),Qt=e,Ce=!0,yn=null,n=$w(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=gr(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return qw(e),t===null&&tf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yh(r,s)?o=null:i!==null&&Yh(r,i)&&(e.flags|=32),m_(t,e),St(t,e,o,n),e.child;case 6:return t===null&&tf(e),null;case 13:return y_(t,e,n);case 4:return Ip(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mi(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),s0(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,we(Pc,r._currentValue),r._currentValue=o,i!==null)if(En(i.value,o)){if(i.children===s.children&&!Ut.current){e=gr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=lr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),nf(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),nf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ii(e,n),s=cn(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=mn(r,e.pendingProps),s=mn(r.type,s),i0(t,e,r,s,n);case 15:return f_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mn(r,s),ic(t,e),e.tag=1,Ft(r)?(t=!0,Cc(e)):t=!1,Ii(e,n),u_(e,r,s),sf(e,r,s,n),lf(null,e,r,!0,t,n);case 19:return v_(t,e,n);case 22:return p_(t,e,n)}throw Error($(156,e.tag))};function D_(t,e){return aw(t,e)}function jS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new jS(t,e,n,r)}function $p(t){return t=t.prototype,!(!t||!t.isReactComponent)}function PS(t){if(typeof t=="function")return $p(t)?1:0;if(t!=null){if(t=t.$$typeof,t===op)return 11;if(t===ap)return 14}return 2}function Xr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$p(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ci:return As(n.children,s,i,e);case ip:o=8,s|=8;break;case kh:return t=rn(12,n,e,s|2),t.elementType=kh,t.lanes=i,t;case Ch:return t=rn(13,n,e,s),t.elementType=Ch,t.lanes=i,t;case Ah:return t=rn(19,n,e,s),t.elementType=Ah,t.lanes=i,t;case qx:return bu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bx:o=10;break e;case zx:o=9;break e;case op:o=11;break e;case ap:o=14;break e;case Ar:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function As(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function bu(t,e,n,r){return t=rn(22,t,r,e),t.elementType=qx,t.lanes=n,t.stateNode={isHidden:!1},t}function Yd(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function Xd(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bp(t,e,n,r,s,i,o,l,u){return t=new RS(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tp(i),t}function DS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function L_(t){if(!t)return ns;t=t._reactInternals;e:{if(Gs(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Ft(n))return Lw(t,n,e)}return e}function O_(t,e,n,r,s,i,o,l,u){return t=Bp(n,r,!0,t,s,i,o,l,u),t.context=L_(null),n=t.current,r=Ct(),s=Yr(n),i=lr(r,s),i.callback=e??null,Kr(n,i,s),t.current.lanes=s,za(t,s,r),$t(t,r),t}function Eu(t,e,n,r){var s=e.current,i=Ct(),o=Yr(s);return n=L_(n),e.context===null?e.context=n:e.pendingContext=n,e=lr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kr(s,e,o),t!==null&&(bn(t,s,o,i),nc(t,s,o)),o}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function y0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zp(t,e){y0(t,e),(t=t.alternate)&&y0(t,e)}function LS(){return null}var M_=typeof reportError=="function"?reportError:function(t){console.error(t)};function qp(t){this._internalRoot=t}Nu.prototype.render=qp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Eu(t,e,null,null)};Nu.prototype.unmount=qp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){Eu(null,t,null,null)}),e[pr]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=pw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pr.length&&e!==0&&e<Pr[n].priority;n++);Pr.splice(n,0,t),n===0&&gw(t)}};function Wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function v0(){}function OS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Bc(o);i.call(d)}}var o=O_(e,r,t,0,null,!1,!1,"",v0);return t._reactRootContainer=o,t[pr]=o.current,xa(t.nodeType===8?t.parentNode:t),Ms(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Bc(u);l.call(d)}}var u=Bp(t,0,!1,null,null,!1,!1,"",v0);return t._reactRootContainer=u,t[pr]=u.current,xa(t.nodeType===8?t.parentNode:t),Ms(function(){Eu(e,u,n,r)}),u}function Iu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Bc(o);l.call(u)}}Eu(e,o,t,s)}else o=OS(n,e,t,s,r);return Bc(o)}hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(up(e,n|1),$t(e,$e()),!(he&6)&&(Fi=$e()+500,ls()))}break;case 13:Ms(function(){var r=mr(t,1);if(r!==null){var s=Ct();bn(r,t,1,s)}}),zp(t,1)}};dp=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=Ct();bn(e,t,134217728,n)}zp(t,134217728)}};fw=function(t){if(t.tag===13){var e=Yr(t),n=mr(t,e);if(n!==null){var r=Ct();bn(n,t,e,r)}zp(t,e)}};pw=function(){return ye};mw=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};Fh=function(t,e,n){switch(e){case"input":if(Rh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gu(r);if(!s)throw Error($(90));Hx(r),Rh(r,s)}}}break;case"textarea":Kx(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};tw=Vp;nw=Ms;var MS={usingClientEntryPoint:!1,Events:[Wa,fi,gu,Zx,ew,Vp]},jo={findFiberByHostInstance:Es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VS={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iw(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||LS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{hu=$l.inject(VS),Dn=$l}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MS;Jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(e))throw Error($(200));return DS(t,e,null,n)};Jt.createRoot=function(t,e){if(!Wp(t))throw Error($(299));var n=!1,r="",s=M_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bp(t,1,!1,null,null,n,!1,r,s),t[pr]=e.current,xa(t.nodeType===8?t.parentNode:t),new qp(e)};Jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=iw(e),t=t===null?null:t.stateNode,t};Jt.flushSync=function(t){return Ms(t)};Jt.hydrate=function(t,e,n){if(!Tu(e))throw Error($(200));return Iu(null,t,e,!0,n)};Jt.hydrateRoot=function(t,e,n){if(!Wp(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=M_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=O_(e,null,t,1,n??null,s,!1,i,o),t[pr]=e.current,xa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nu(e)};Jt.render=function(t,e,n){if(!Tu(e))throw Error($(200));return Iu(null,t,e,!1,n)};Jt.unmountComponentAtNode=function(t){if(!Tu(t))throw Error($(40));return t._reactRootContainer?(Ms(function(){Iu(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};Jt.unstable_batchedUpdates=Vp;Jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Iu(t,e,n,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function V_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V_)}catch(t){console.error(t)}}V_(),Vx.exports=Jt;var US=Vx.exports,x0=US;Ih.createRoot=x0.createRoot,Ih.hydrateRoot=x0.hydrateRoot;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ka.apply(this,arguments)}var Br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Br||(Br={}));const w0="popstate";function FS(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:l="",hash:u=""}=Ks(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wf("",{pathname:o,search:l,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof i=="string"?i:zc(i))}function r(s,i){Su(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return BS(e,n,r,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Su(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $S(){return Math.random().toString(36).substr(2,8)}function _0(t,e){return{usr:t.state,key:t.key,idx:e}}function wf(t,e,n,r){return n===void 0&&(n=null),ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ks(e):e,{state:n,key:e&&e.key||r||$S()})}function zc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ks(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Br.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(ka({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Br.Pop;let k=h(),x=k==null?null:k-d;d=k,u&&u({action:l,location:S.location,delta:x})}function g(k,x){l=Br.Push;let y=wf(S.location,k,x);n&&n(y,k),d=h()+1;let b=_0(y,d),P=S.createHref(y);try{o.pushState(b,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(P)}i&&u&&u({action:l,location:S.location,delta:1})}function v(k,x){l=Br.Replace;let y=wf(S.location,k,x);n&&n(y,k),d=h();let b=_0(y,d),P=S.createHref(y);o.replaceState(b,"",P),i&&u&&u({action:l,location:S.location,delta:0})}function E(k){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof k=="string"?k:zc(k);return Be(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let S={get action(){return l},get location(){return t(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(w0,p),u=k,()=>{s.removeEventListener(w0,p),u=null}},createHref(k){return e(s,k)},createURL:E,encodeLocation(k){let x=E(k);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:v,go(k){return o.go(k)}};return S}var b0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(b0||(b0={}));function zS(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ks(e):e,s=Hp(r.pathname||"/",n);if(s==null)return null;let i=U_(t);qS(i);let o=null;for(let l=0;o==null&&l<i.length;++l)o=ZS(i[l],nk(s));return o}function U_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Jr([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),U_(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:XS(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of F_(i.path))s(i,o,u)}),e}function F_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=F_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function qS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const WS=/^:[\w-]+$/,HS=3,GS=2,KS=1,QS=10,YS=-2,E0=t=>t==="*";function XS(t,e){let n=t.split("/"),r=n.length;return n.some(E0)&&(r+=YS),e&&(r+=GS),n.filter(s=>!E0(s)).reduce((s,i)=>s+(WS.test(i)?HS:i===""?KS:QS),r)}function JS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ZS(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=ek({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d);if(!h)return null;Object.assign(r,h.params);let p=l.route;i.push({params:r,pathname:Jr([s,h.pathname]),pathnameBase:ak(Jr([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Jr([s,h.pathnameBase]))}return i}function ek(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=tk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:v}=h;if(g==="*"){let S=l[p]||"";o=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const E=l[p];return v&&!E?d[g]=void 0:d[g]=rk(E||"",g),d},{}),pathname:i,pathnameBase:o,pattern:t}}function tk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Su(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nk(t){try{return decodeURI(t)}catch(e){return Su(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function rk(t,e){try{return decodeURIComponent(t)}catch(n){return Su(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Hp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ks(t):t;return{pathname:n?n.startsWith("/")?n:ik(n,e):e,search:lk(r),hash:ck(s)}}function ik(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Jd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ok(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gp(t,e){let n=ok(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Kp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ks(t):(s=ka({},t),Be(!s.pathname||!s.pathname.includes("?"),Jd("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),Jd("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),Jd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=sk(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Jr=t=>t.join("/").replace(/\/\/+/g,"/"),ak=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ck=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $_=["post","put","patch","delete"];new Set($_);const dk=["get",...$_];new Set(dk);/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ca.apply(this,arguments)}const Qp=T.createContext(null),hk=T.createContext(null),cs=T.createContext(null),ku=T.createContext(null),qn=T.createContext({outlet:null,matches:[],isDataRoute:!1}),B_=T.createContext(null);function fk(t,e){let{relative:n}=e===void 0?{}:e;eo()||Be(!1);let{basename:r,navigator:s}=T.useContext(cs),{hash:i,pathname:o,search:l}=q_(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Jr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function eo(){return T.useContext(ku)!=null}function to(){return eo()||Be(!1),T.useContext(ku).location}function z_(t){T.useContext(cs).static||T.useLayoutEffect(t)}function br(){let{isDataRoute:t}=T.useContext(qn);return t?Ck():pk()}function pk(){eo()||Be(!1);let t=T.useContext(Qp),{basename:e,future:n,navigator:r}=T.useContext(cs),{matches:s}=T.useContext(qn),{pathname:i}=to(),o=JSON.stringify(Gp(s,n.v7_relativeSplatPath)),l=T.useRef(!1);return z_(()=>{l.current=!0}),T.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Kp(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Jr([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}const mk=T.createContext(null);function gk(t){let e=T.useContext(qn).outlet;return e&&T.createElement(mk.Provider,{value:t},e)}function yk(){let{matches:t}=T.useContext(qn),e=t[t.length-1];return e?e.params:{}}function q_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(cs),{matches:s}=T.useContext(qn),{pathname:i}=to(),o=JSON.stringify(Gp(s,r.v7_relativeSplatPath));return T.useMemo(()=>Kp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function vk(t,e){return xk(t,e)}function xk(t,e,n,r){eo()||Be(!1);let{navigator:s}=T.useContext(cs),{matches:i}=T.useContext(qn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=to(),h;if(e){var p;let k=typeof e=="string"?Ks(e):e;u==="/"||(p=k.pathname)!=null&&p.startsWith(u)||Be(!1),h=k}else h=d;let g=h.pathname||"/",v=u==="/"?g:g.slice(u.length)||"/",E=zS(t,{pathname:v}),S=Nk(E&&E.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Jr([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Jr([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&S?T.createElement(ku.Provider,{value:{location:Ca({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Br.Pop}},S):S}function wk(){let t=kk(),e=uk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:s},n):null,null)}const _k=T.createElement(wk,null);class bk extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement(qn.Provider,{value:this.props.routeContext},T.createElement(B_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ek(t){let{routeContext:e,match:n,children:r}=t,s=T.useContext(Qp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(qn.Provider,{value:e},r)}function Nk(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id]));h>=0||Be(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:v}=n,E=p.route.loader&&g[p.route.id]===void 0&&(!v||v[p.route.id]===void 0);if(p.route.lazy||E){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let v,E=!1,S=null,k=null;n&&(v=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||_k,u&&(d<0&&g===0?(E=!0,k=null):d===g&&(E=!0,k=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),y=()=>{let b;return v?b=S:E?b=k:p.route.Component?b=T.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=h,T.createElement(Ek,{match:p,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?T.createElement(bk,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var W_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(W_||{}),qc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qc||{});function Tk(t){let e=T.useContext(Qp);return e||Be(!1),e}function Ik(t){let e=T.useContext(hk);return e||Be(!1),e}function Sk(t){let e=T.useContext(qn);return e||Be(!1),e}function H_(t){let e=Sk(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function kk(){var t;let e=T.useContext(B_),n=Ik(qc.UseRouteError),r=H_(qc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ck(){let{router:t}=Tk(W_.UseNavigateStable),e=H_(qc.UseNavigateStable),n=T.useRef(!1);return z_(()=>{n.current=!0}),T.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ca({fromRouteId:e},i)))},[t,e])}function ra(t){let{to:e,replace:n,state:r,relative:s}=t;eo()||Be(!1);let{future:i,static:o}=T.useContext(cs),{matches:l}=T.useContext(qn),{pathname:u}=to(),d=br(),h=Kp(e,Gp(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(h);return T.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Ak(t){return gk(t.context)}function He(t){Be(!1)}function jk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Br.Pop,navigator:i,static:o=!1,future:l}=t;eo()&&Be(!1);let u=e.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:u,navigator:i,static:o,future:Ca({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Ks(r));let{pathname:h="/",search:p="",hash:g="",state:v=null,key:E="default"}=r,S=T.useMemo(()=>{let k=Hp(h,u);return k==null?null:{location:{pathname:k,search:p,hash:g,state:v,key:E},navigationType:s}},[u,h,p,g,v,E,s]);return S==null?null:T.createElement(cs.Provider,{value:d},T.createElement(ku.Provider,{children:n,value:S}))}function N0(t){let{children:e,location:n}=t;return vk(_f(e),n)}new Promise(()=>{});function _f(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(r,s)=>{if(!T.isValidElement(r))return;let i=[...e,s];if(r.type===T.Fragment){n.push.apply(n,_f(r.props.children,i));return}r.type!==He&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_f(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bf.apply(this,arguments)}function Pk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Rk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Dk(t,e){return t.button===0&&(!e||e==="_self")&&!Rk(t)}const Lk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Ok="6";try{window.__reactRouterVersion=Ok}catch{}const Mk="startTransition",T0=kT[Mk];function I0(t){let{basename:e,children:n,future:r,window:s}=t,i=T.useRef();i.current==null&&(i.current=FS({window:s,v5Compat:!0}));let o=i.current,[l,u]=T.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=T.useCallback(p=>{d&&T0?T0(()=>u(p)):u(p)},[u,d]);return T.useLayoutEffect(()=>o.listen(h),[o,h]),T.createElement(jk,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Vk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=T.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,unstable_viewTransition:p}=e,g=Pk(e,Lk),{basename:v}=T.useContext(cs),E,S=!1;if(typeof d=="string"&&Uk.test(d)&&(E=d,Vk))try{let b=new URL(window.location.href),P=d.startsWith("//")?new URL(b.protocol+d):new URL(d),O=Hp(P.pathname,v);P.origin===b.origin&&O!=null?d=O+P.search+P.hash:S=!0}catch{}let k=fk(d,{relative:s}),x=Fk(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,unstable_viewTransition:p});function y(b){r&&r(b),b.defaultPrevented||x(b)}return T.createElement("a",bf({},g,{href:E||k,onClick:S||i?r:y,ref:n,target:u}))});var S0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(S0||(S0={}));var k0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(k0||(k0={}));function Fk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:l}=e===void 0?{}:e,u=br(),d=to(),h=q_(t,{relative:o});return T.useCallback(p=>{if(Dk(p,n)){p.preventDefault();let g=r!==void 0?r:zc(d)===zc(h);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:l})}},[d,u,h,r,s,n,t,i,o,l])}var C0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},$k=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},K_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,v=d&63;u||(v=64,o||(g=64)),r.push(n[h],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$k(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new Bk;const g=i<<2|l>>4;if(r.push(g),d!==64){const v=l<<4&240|d>>2;if(r.push(v),p!==64){const E=d<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Bk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zk=function(t){const e=G_(t);return K_.encodeByteArray(e,!0)},Wc=function(t){return zk(t).replace(/\./g,"")},Q_=function(t){try{return K_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=()=>qk().__FIREBASE_DEFAULTS__,Hk=()=>{if(typeof process>"u"||typeof C0>"u")return;const t=C0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Q_(t[1]);return e&&JSON.parse(e)},Cu=()=>{try{return Wk()||Hk()||Gk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Y_=t=>{var e,n;return(n=(e=Cu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Yp=t=>{const e=Y_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},X_=()=>{var t;return(t=Cu())===null||t===void 0?void 0:t.config},J_=t=>{var e;return(e=Cu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wc(JSON.stringify(n)),Wc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function Yk(){var t;const e=(t=Cu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zk(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eC(){return!Yk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xp(){try{return typeof indexedDB=="object"}catch{return!1}}function Jp(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function tb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="FirebaseError";class dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tC,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,us.prototype.create)}}class us{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nC(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new dn(s,l,r)}}function nC(t,e){return t.replace(rC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rC=/\{\$([^}]+)}/g;function sC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $i(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(A0(i)&&A0(o)){if(!$i(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function A0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Bo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iC(t,e){const n=new oC(t,e);return n.subscribe.bind(n)}class oC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Zd),s.error===void 0&&(s.error=Zd),s.complete===void 0&&(s.complete=Zd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=1e3,cC=2,uC=4*60*60*1e3,dC=.5;function j0(t,e=lC,n=cC){const r=e*Math.pow(n,t),s=Math.round(dC*r*(Math.random()-.5)*2);return Math.min(uC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class Pt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hC=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Kk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pC(e))try{this.getOrInitializeService({instanceIdentifier:xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xs){return this.instances.has(e)}getOptions(e=xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xs){return this.component?this.component.multipleInstances?e:xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function fC(t){return t===xs?void 0:t}function pC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const gC={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},yC=le.INFO,vC={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},xC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=vC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Au{constructor(e){this.name=e,this._logLevel=yC,this._logHandler=xC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const wC=(t,e)=>e.some(n=>t instanceof n);let P0,R0;function _C(){return P0||(P0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bC(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nb=new WeakMap,Ef=new WeakMap,rb=new WeakMap,eh=new WeakMap,Zp=new WeakMap;function EC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(cr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nb.set(n,t)}).catch(()=>{}),Zp.set(e,t),e}function NC(t){if(Ef.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ef.set(t,e)}let Nf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TC(t){Nf=t(Nf)}function IC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(th(this),e,...n);return rb.set(r,e.sort?e.sort():[e]),cr(r)}:bC().includes(t)?function(...e){return t.apply(th(this),e),cr(nb.get(this))}:function(...e){return cr(t.apply(th(this),e))}}function SC(t){return typeof t=="function"?IC(t):(t instanceof IDBTransaction&&NC(t),wC(t,_C())?new Proxy(t,Nf):t)}function cr(t){if(t instanceof IDBRequest)return EC(t);if(eh.has(t))return eh.get(t);const e=SC(t);return e!==t&&(eh.set(t,e),Zp.set(e,t)),e}const th=t=>Zp.get(t);function ju(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=cr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(cr(o.result),u.oldVersion,u.newVersion,cr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function nh(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),cr(n).then(()=>{})}const kC=["get","getKey","getAll","getAllKeys","count"],CC=["put","add","delete","clear"],rh=new Map;function D0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=CC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||kC.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return rh.set(e,i),i}TC(t=>({...t,get:(e,n,r)=>D0(e,n)||t.get(e,n,r),has:(e,n)=>!!D0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tf="@firebase/app",L0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Au("@firebase/app"),PC="@firebase/app-compat",RC="@firebase/analytics-compat",DC="@firebase/analytics",LC="@firebase/app-check-compat",OC="@firebase/app-check",MC="@firebase/auth",VC="@firebase/auth-compat",UC="@firebase/database",FC="@firebase/data-connect",$C="@firebase/database-compat",BC="@firebase/functions",zC="@firebase/functions-compat",qC="@firebase/installations",WC="@firebase/installations-compat",HC="@firebase/messaging",GC="@firebase/messaging-compat",KC="@firebase/performance",QC="@firebase/performance-compat",YC="@firebase/remote-config",XC="@firebase/remote-config-compat",JC="@firebase/storage",ZC="@firebase/storage-compat",eA="@firebase/firestore",tA="@firebase/vertexai-preview",nA="@firebase/firestore-compat",rA="firebase",sA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="[DEFAULT]",iA={[Tf]:"fire-core",[PC]:"fire-core-compat",[DC]:"fire-analytics",[RC]:"fire-analytics-compat",[OC]:"fire-app-check",[LC]:"fire-app-check-compat",[MC]:"fire-auth",[VC]:"fire-auth-compat",[UC]:"fire-rtdb",[FC]:"fire-data-connect",[$C]:"fire-rtdb-compat",[BC]:"fire-fn",[zC]:"fire-fn-compat",[qC]:"fire-iid",[WC]:"fire-iid-compat",[HC]:"fire-fcm",[GC]:"fire-fcm-compat",[KC]:"fire-perf",[QC]:"fire-perf-compat",[YC]:"fire-rc",[XC]:"fire-rc-compat",[JC]:"fire-gcs",[ZC]:"fire-gcs-compat",[eA]:"fire-fst",[nA]:"fire-fst-compat",[tA]:"fire-vertex","fire-js":"fire-js",[rA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,oA=new Map,Sf=new Map;function O0(t,e){try{t.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zt(t){const e=t.name;if(Sf.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Sf.set(e,t);for(const n of Hc.values())O0(n,t);for(const n of oA.values())O0(n,t);return!0}function Wn(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new us("app","Firebase",aA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=sA;function sb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:If,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=X_()),!n)throw Zr.create("no-options");const i=Hc.get(s);if(i){if($i(n,i.options)&&$i(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const o=new mC(s);for(const u of Sf.values())o.addComponent(u);const l=new lA(n,r,o);return Hc.set(s,l),l}function no(t=If){const e=Hc.get(t);if(!e&&t===If&&X_())return sb();if(!e)throw Zr.create("no-app",{appName:t});return e}function et(t,e,n){var r;let s=(r=iA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(l.join(" "));return}zt(new Pt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebase-heartbeat-database",uA=1,Aa="firebase-heartbeat-store";let sh=null;function ib(){return sh||(sh=ju(cA,uA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),sh}async function dA(t){try{const n=(await ib()).transaction(Aa),r=await n.objectStore(Aa).get(ob(t));return await n.done,r}catch(e){if(e instanceof dn)yr.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(n.message)}}}async function M0(t,e){try{const r=(await ib()).transaction(Aa,"readwrite");await r.objectStore(Aa).put(e,ob(t)),await r.done}catch(n){if(n instanceof dn)yr.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});yr.warn(r.message)}}}function ob(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1024,fA=30*24*60*60*1e3;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=V0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=fA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){yr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V0(),{heartbeatsToSend:r,unsentEntries:s}=mA(this._heartbeatsCache.heartbeats),i=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return yr.warn(n),""}}}function V0(){return new Date().toISOString().substring(0,10)}function mA(t,e=hA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),U0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),U0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xp()?Jp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return M0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return M0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function U0(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){zt(new Pt("platform-logger",e=>new AC(e),"PRIVATE")),zt(new Pt("heartbeat",e=>new pA(e),"PRIVATE")),et(Tf,L0,t),et(Tf,L0,"esm2017"),et("fire-js","")}yA("");var vA="firebase",xA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */et(vA,xA,"app");var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,ab;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,_){function I(){}I.prototype=_.prototype,N.D=_.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(C,j,R){for(var A=Array(arguments.length-2),q=2;q<arguments.length;q++)A[q-2]=arguments[q];return _.prototype[j].apply(C,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,_,I){I||(I=0);var C=Array(16);if(typeof _=="string")for(var j=0;16>j;++j)C[j]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(j=0;16>j;++j)C[j]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=N.g[0],I=N.g[1],j=N.g[2];var R=N.g[3],A=_+(R^I&(j^R))+C[0]+3614090360&4294967295;_=I+(A<<7&4294967295|A>>>25),A=R+(j^_&(I^j))+C[1]+3905402710&4294967295,R=_+(A<<12&4294967295|A>>>20),A=j+(I^R&(_^I))+C[2]+606105819&4294967295,j=R+(A<<17&4294967295|A>>>15),A=I+(_^j&(R^_))+C[3]+3250441966&4294967295,I=j+(A<<22&4294967295|A>>>10),A=_+(R^I&(j^R))+C[4]+4118548399&4294967295,_=I+(A<<7&4294967295|A>>>25),A=R+(j^_&(I^j))+C[5]+1200080426&4294967295,R=_+(A<<12&4294967295|A>>>20),A=j+(I^R&(_^I))+C[6]+2821735955&4294967295,j=R+(A<<17&4294967295|A>>>15),A=I+(_^j&(R^_))+C[7]+4249261313&4294967295,I=j+(A<<22&4294967295|A>>>10),A=_+(R^I&(j^R))+C[8]+1770035416&4294967295,_=I+(A<<7&4294967295|A>>>25),A=R+(j^_&(I^j))+C[9]+2336552879&4294967295,R=_+(A<<12&4294967295|A>>>20),A=j+(I^R&(_^I))+C[10]+4294925233&4294967295,j=R+(A<<17&4294967295|A>>>15),A=I+(_^j&(R^_))+C[11]+2304563134&4294967295,I=j+(A<<22&4294967295|A>>>10),A=_+(R^I&(j^R))+C[12]+1804603682&4294967295,_=I+(A<<7&4294967295|A>>>25),A=R+(j^_&(I^j))+C[13]+4254626195&4294967295,R=_+(A<<12&4294967295|A>>>20),A=j+(I^R&(_^I))+C[14]+2792965006&4294967295,j=R+(A<<17&4294967295|A>>>15),A=I+(_^j&(R^_))+C[15]+1236535329&4294967295,I=j+(A<<22&4294967295|A>>>10),A=_+(j^R&(I^j))+C[1]+4129170786&4294967295,_=I+(A<<5&4294967295|A>>>27),A=R+(I^j&(_^I))+C[6]+3225465664&4294967295,R=_+(A<<9&4294967295|A>>>23),A=j+(_^I&(R^_))+C[11]+643717713&4294967295,j=R+(A<<14&4294967295|A>>>18),A=I+(R^_&(j^R))+C[0]+3921069994&4294967295,I=j+(A<<20&4294967295|A>>>12),A=_+(j^R&(I^j))+C[5]+3593408605&4294967295,_=I+(A<<5&4294967295|A>>>27),A=R+(I^j&(_^I))+C[10]+38016083&4294967295,R=_+(A<<9&4294967295|A>>>23),A=j+(_^I&(R^_))+C[15]+3634488961&4294967295,j=R+(A<<14&4294967295|A>>>18),A=I+(R^_&(j^R))+C[4]+3889429448&4294967295,I=j+(A<<20&4294967295|A>>>12),A=_+(j^R&(I^j))+C[9]+568446438&4294967295,_=I+(A<<5&4294967295|A>>>27),A=R+(I^j&(_^I))+C[14]+3275163606&4294967295,R=_+(A<<9&4294967295|A>>>23),A=j+(_^I&(R^_))+C[3]+4107603335&4294967295,j=R+(A<<14&4294967295|A>>>18),A=I+(R^_&(j^R))+C[8]+1163531501&4294967295,I=j+(A<<20&4294967295|A>>>12),A=_+(j^R&(I^j))+C[13]+2850285829&4294967295,_=I+(A<<5&4294967295|A>>>27),A=R+(I^j&(_^I))+C[2]+4243563512&4294967295,R=_+(A<<9&4294967295|A>>>23),A=j+(_^I&(R^_))+C[7]+1735328473&4294967295,j=R+(A<<14&4294967295|A>>>18),A=I+(R^_&(j^R))+C[12]+2368359562&4294967295,I=j+(A<<20&4294967295|A>>>12),A=_+(I^j^R)+C[5]+4294588738&4294967295,_=I+(A<<4&4294967295|A>>>28),A=R+(_^I^j)+C[8]+2272392833&4294967295,R=_+(A<<11&4294967295|A>>>21),A=j+(R^_^I)+C[11]+1839030562&4294967295,j=R+(A<<16&4294967295|A>>>16),A=I+(j^R^_)+C[14]+4259657740&4294967295,I=j+(A<<23&4294967295|A>>>9),A=_+(I^j^R)+C[1]+2763975236&4294967295,_=I+(A<<4&4294967295|A>>>28),A=R+(_^I^j)+C[4]+1272893353&4294967295,R=_+(A<<11&4294967295|A>>>21),A=j+(R^_^I)+C[7]+4139469664&4294967295,j=R+(A<<16&4294967295|A>>>16),A=I+(j^R^_)+C[10]+3200236656&4294967295,I=j+(A<<23&4294967295|A>>>9),A=_+(I^j^R)+C[13]+681279174&4294967295,_=I+(A<<4&4294967295|A>>>28),A=R+(_^I^j)+C[0]+3936430074&4294967295,R=_+(A<<11&4294967295|A>>>21),A=j+(R^_^I)+C[3]+3572445317&4294967295,j=R+(A<<16&4294967295|A>>>16),A=I+(j^R^_)+C[6]+76029189&4294967295,I=j+(A<<23&4294967295|A>>>9),A=_+(I^j^R)+C[9]+3654602809&4294967295,_=I+(A<<4&4294967295|A>>>28),A=R+(_^I^j)+C[12]+3873151461&4294967295,R=_+(A<<11&4294967295|A>>>21),A=j+(R^_^I)+C[15]+530742520&4294967295,j=R+(A<<16&4294967295|A>>>16),A=I+(j^R^_)+C[2]+3299628645&4294967295,I=j+(A<<23&4294967295|A>>>9),A=_+(j^(I|~R))+C[0]+4096336452&4294967295,_=I+(A<<6&4294967295|A>>>26),A=R+(I^(_|~j))+C[7]+1126891415&4294967295,R=_+(A<<10&4294967295|A>>>22),A=j+(_^(R|~I))+C[14]+2878612391&4294967295,j=R+(A<<15&4294967295|A>>>17),A=I+(R^(j|~_))+C[5]+4237533241&4294967295,I=j+(A<<21&4294967295|A>>>11),A=_+(j^(I|~R))+C[12]+1700485571&4294967295,_=I+(A<<6&4294967295|A>>>26),A=R+(I^(_|~j))+C[3]+2399980690&4294967295,R=_+(A<<10&4294967295|A>>>22),A=j+(_^(R|~I))+C[10]+4293915773&4294967295,j=R+(A<<15&4294967295|A>>>17),A=I+(R^(j|~_))+C[1]+2240044497&4294967295,I=j+(A<<21&4294967295|A>>>11),A=_+(j^(I|~R))+C[8]+1873313359&4294967295,_=I+(A<<6&4294967295|A>>>26),A=R+(I^(_|~j))+C[15]+4264355552&4294967295,R=_+(A<<10&4294967295|A>>>22),A=j+(_^(R|~I))+C[6]+2734768916&4294967295,j=R+(A<<15&4294967295|A>>>17),A=I+(R^(j|~_))+C[13]+1309151649&4294967295,I=j+(A<<21&4294967295|A>>>11),A=_+(j^(I|~R))+C[4]+4149444226&4294967295,_=I+(A<<6&4294967295|A>>>26),A=R+(I^(_|~j))+C[11]+3174756917&4294967295,R=_+(A<<10&4294967295|A>>>22),A=j+(_^(R|~I))+C[2]+718787259&4294967295,j=R+(A<<15&4294967295|A>>>17),A=I+(R^(j|~_))+C[9]+3951481745&4294967295,N.g[0]=N.g[0]+_&4294967295,N.g[1]=N.g[1]+(j+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+R&4294967295}r.prototype.u=function(N,_){_===void 0&&(_=N.length);for(var I=_-this.blockSize,C=this.B,j=this.h,R=0;R<_;){if(j==0)for(;R<=I;)s(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<_;)if(C[j++]=N.charCodeAt(R++),j==this.blockSize){s(this,C),j=0;break}}else for(;R<_;)if(C[j++]=N[R++],j==this.blockSize){s(this,C),j=0;break}}this.h=j,this.o+=_},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var _=1;_<N.length-8;++_)N[_]=0;var I=8*this.o;for(_=N.length-8;_<N.length;++_)N[_]=I&255,I/=256;for(this.u(N),N=Array(16),_=I=0;4>_;++_)for(var C=0;32>C;C+=8)N[I++]=this.g[_]>>>C&255;return N};function i(N,_){var I=l;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=_(N)}function o(N,_){this.h=_;for(var I=[],C=!0,j=N.length-1;0<=j;j--){var R=N[j]|0;C&&R==_||(I[j]=R,C=!1)}this.g=I}var l={};function u(N){return-128<=N&&128>N?i(N,function(_){return new o([_|0],0>_?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return k(d(-N));for(var _=[],I=1,C=0;N>=I;C++)_[C]=N/I|0,I*=4294967296;return new o(_,0)}function h(N,_){if(N.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(N.charAt(0)=="-")return k(h(N.substring(1),_));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(_,8)),C=p,j=0;j<N.length;j+=8){var R=Math.min(8,N.length-j),A=parseInt(N.substring(j,j+R),_);8>R?(R=d(Math.pow(_,R)),C=C.j(R).add(d(A))):(C=C.j(I),C=C.add(d(A)))}return C}var p=u(0),g=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(S(this))return-k(this).m();for(var N=0,_=1,I=0;I<this.g.length;I++){var C=this.i(I);N+=(0<=C?C:4294967296+C)*_,_*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(S(this))return"-"+k(this).toString(N);for(var _=d(Math.pow(N,6)),I=this,C="";;){var j=P(I,_).g;I=x(I,j.j(_));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=j,E(I))return R+C;for(;6>R.length;)R="0"+R;C=R+C}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(var _=0;_<N.g.length;_++)if(N.g[_]!=0)return!1;return!0}function S(N){return N.h==-1}t.l=function(N){return N=x(this,N),S(N)?-1:E(N)?0:1};function k(N){for(var _=N.g.length,I=[],C=0;C<_;C++)I[C]=~N.g[C];return new o(I,~N.h).add(g)}t.abs=function(){return S(this)?k(this):this},t.add=function(N){for(var _=Math.max(this.g.length,N.g.length),I=[],C=0,j=0;j<=_;j++){var R=C+(this.i(j)&65535)+(N.i(j)&65535),A=(R>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);C=A>>>16,R&=65535,A&=65535,I[j]=A<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(N,_){return N.add(k(_))}t.j=function(N){if(E(this)||E(N))return p;if(S(this))return S(N)?k(this).j(k(N)):k(k(this).j(N));if(S(N))return k(this.j(k(N)));if(0>this.l(v)&&0>N.l(v))return d(this.m()*N.m());for(var _=this.g.length+N.g.length,I=[],C=0;C<2*_;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var j=0;j<N.g.length;j++){var R=this.i(C)>>>16,A=this.i(C)&65535,q=N.i(j)>>>16,be=N.i(j)&65535;I[2*C+2*j]+=A*be,y(I,2*C+2*j),I[2*C+2*j+1]+=R*be,y(I,2*C+2*j+1),I[2*C+2*j+1]+=A*q,y(I,2*C+2*j+1),I[2*C+2*j+2]+=R*q,y(I,2*C+2*j+2)}for(C=0;C<_;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=_;C<2*_;C++)I[C]=0;return new o(I,0)};function y(N,_){for(;(N[_]&65535)!=N[_];)N[_+1]+=N[_]>>>16,N[_]&=65535,_++}function b(N,_){this.g=N,this.h=_}function P(N,_){if(E(_))throw Error("division by zero");if(E(N))return new b(p,p);if(S(N))return _=P(k(N),_),new b(k(_.g),k(_.h));if(S(_))return _=P(N,k(_)),new b(k(_.g),_.h);if(30<N.g.length){if(S(N)||S(_))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=_;0>=C.l(N);)I=O(I),C=O(C);var j=M(I,1),R=M(C,1);for(C=M(C,2),I=M(I,2);!E(C);){var A=R.add(C);0>=A.l(N)&&(j=j.add(I),R=A),C=M(C,1),I=M(I,1)}return _=x(N,j.j(_)),new b(j,_)}for(j=p;0<=N.l(_);){for(I=Math.max(1,Math.floor(N.m()/_.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),R=d(I),A=R.j(_);S(A)||0<A.l(N);)I-=C,R=d(I),A=R.j(_);E(R)&&(R=g),j=j.add(R),N=x(N,A)}return new b(j,N)}t.A=function(N){return P(this,N).h},t.and=function(N){for(var _=Math.max(this.g.length,N.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)&N.i(C);return new o(I,this.h&N.h)},t.or=function(N){for(var _=Math.max(this.g.length,N.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)|N.i(C);return new o(I,this.h|N.h)},t.xor=function(N){for(var _=Math.max(this.g.length,N.g.length),I=[],C=0;C<_;C++)I[C]=this.i(C)^N.i(C);return new o(I,this.h^N.h)};function O(N){for(var _=N.g.length+1,I=[],C=0;C<_;C++)I[C]=N.i(C)<<1|N.i(C-1)>>>31;return new o(I,N.h)}function M(N,_){var I=_>>5;_%=32;for(var C=N.g.length-I,j=[],R=0;R<C;R++)j[R]=0<_?N.i(R+I)>>>_|N.i(R+I+1)<<32-_:N.i(R+I);return new o(j,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ab=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,js=o}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lb,zo,cb,cc,kf,ub,db,hb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,m){return c==Array.prototype||c==Object.prototype||(c[f]=m.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var f=0;f<c.length;++f){var m=c[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(c,f){if(f)e:{var m=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var D=c[w];if(!(D in m))break e;m=m[D]}c=c[c.length-1],w=m[c],f=f(w),f!=w&&f!=null&&e(m,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var m=0,w=!1,D={next:function(){if(!w&&m<c.length){var L=m++;return{value:f(L,c[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,m){return c.call.apply(c.bind,arguments)}function p(c,f,m){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,w),c.apply(f,D)}}return function(){return c.apply(f,arguments)}}function g(c,f,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(c,f){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function E(c,f){function m(){}m.prototype=f.prototype,c.aa=f.prototype,c.prototype=new m,c.prototype.constructor=c,c.Qb=function(w,D,L){for(var B=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)B[xe-2]=arguments[xe];return f.prototype[D].apply(w,B)}}function S(c){const f=c.length;if(0<f){const m=Array(f);for(let w=0;w<f;w++)m[w]=c[w];return m}return[]}function k(c,f){for(let m=1;m<arguments.length;m++){const w=arguments[m];if(u(w)){const D=c.length||0,L=w.length||0;c.length=D+L;for(let B=0;B<L;B++)c[D+B]=w[B]}else c.push(w)}}class x{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function y(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var O=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(c,f,m){for(const w in c)f.call(m,c[w],w,c)}function N(c,f){for(const m in c)f.call(void 0,c[m],m,c)}function _(c){const f={};for(const m in c)f[m]=c[m];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,f){let m,w;for(let D=1;D<arguments.length;D++){w=arguments[D];for(m in w)c[m]=w[m];for(let L=0;L<I.length;L++)m=I[L],Object.prototype.hasOwnProperty.call(w,m)&&(c[m]=w[m])}}function j(c){var f=1;c=c.split(":");const m=[];for(;0<f&&c.length;)m.push(c.shift()),f--;return c.length&&m.push(c.join(":")),m}function R(c){l.setTimeout(()=>{throw c},0)}function A(){var c=K;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class q{constructor(){this.h=this.g=null}add(f,m){const w=be.get();w.set(f,m),this.h?this.h.next=w:this.g=w,this.h=w}}var be=new x(()=>new Z,c=>c.reset());class Z{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let z,U=!1,K=new q,X=()=>{const c=l.Promise.resolve(void 0);z=()=>{c.then(W)}};var W=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(m){R(m)}var f=be;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}U=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const m=()=>{};l.addEventListener("test",m,f),l.removeEventListener("test",m,f)}catch{}return c}();function hn(c,f){if(de.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var m=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(O){e:{try{P(f.nodeName);var D=!0;break e}catch{}D=!1}D||(f=null)}}else m=="mouseover"?f=c.fromElement:m=="mouseout"&&(f=c.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Kn[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&hn.aa.h.call(this)}}E(hn,de);var Kn={2:"touch",3:"pen",4:"mouse"};hn.prototype.h=function(){hn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qn="closure_listenable_"+(1e6*Math.random()|0),P1=0;function R1(c,f,m,w,D){this.listener=c,this.proxy=null,this.src=f,this.type=m,this.capture=!!w,this.ha=D,this.key=++P1,this.da=this.fa=!1}function al(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ll(c){this.src=c,this.g={},this.h=0}ll.prototype.add=function(c,f,m,w,D){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var B=sd(c,f,w,D);return-1<B?(f=c[B],m||(f.fa=!1)):(f=new R1(f,this.src,L,!!w,D),f.fa=m,c.push(f)),f};function rd(c,f){var m=f.type;if(m in c.g){var w=c.g[m],D=Array.prototype.indexOf.call(w,f,void 0),L;(L=0<=D)&&Array.prototype.splice.call(w,D,1),L&&(al(f),c.g[m].length==0&&(delete c.g[m],c.h--))}}function sd(c,f,m,w){for(var D=0;D<c.length;++D){var L=c[D];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==w)return D}return-1}var id="closure_lm_"+(1e6*Math.random()|0),od={};function dg(c,f,m,w,D){if(Array.isArray(f)){for(var L=0;L<f.length;L++)dg(c,f[L],m,w,D);return null}return m=pg(m),c&&c[Qn]?c.K(f,m,d(w)?!!w.capture:!!w,D):D1(c,f,m,!1,w,D)}function D1(c,f,m,w,D,L){if(!f)throw Error("Invalid event type");var B=d(D)?!!D.capture:!!D,xe=ld(c);if(xe||(c[id]=xe=new ll(c)),m=xe.add(f,m,w,B,L),m.proxy)return m;if(w=L1(),m.proxy=w,w.src=c,w.listener=m,c.addEventListener)dt||(D=B),D===void 0&&(D=!1),c.addEventListener(f.toString(),w,D);else if(c.attachEvent)c.attachEvent(fg(f.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function L1(){function c(m){return f.call(c.src,c.listener,m)}const f=O1;return c}function hg(c,f,m,w,D){if(Array.isArray(f))for(var L=0;L<f.length;L++)hg(c,f[L],m,w,D);else w=d(w)?!!w.capture:!!w,m=pg(m),c&&c[Qn]?(c=c.i,f=String(f).toString(),f in c.g&&(L=c.g[f],m=sd(L,m,w,D),-1<m&&(al(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete c.g[f],c.h--)))):c&&(c=ld(c))&&(f=c.g[f.toString()],c=-1,f&&(c=sd(f,m,w,D)),(m=-1<c?f[c]:null)&&ad(m))}function ad(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Qn])rd(f.i,c);else{var m=c.type,w=c.proxy;f.removeEventListener?f.removeEventListener(m,w,c.capture):f.detachEvent?f.detachEvent(fg(m),w):f.addListener&&f.removeListener&&f.removeListener(w),(m=ld(f))?(rd(m,c),m.h==0&&(m.src=null,f[id]=null)):al(c)}}}function fg(c){return c in od?od[c]:od[c]="on"+c}function O1(c,f){if(c.da)c=!0;else{f=new hn(f,this);var m=c.listener,w=c.ha||c.src;c.fa&&ad(c),c=m.call(w,f)}return c}function ld(c){return c=c[id],c instanceof ll?c:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function pg(c){return typeof c=="function"?c:(c[cd]||(c[cd]=function(f){return c.handleEvent(f)}),c[cd])}function ht(){J.call(this),this.i=new ll(this),this.M=this,this.F=null}E(ht,J),ht.prototype[Qn]=!0,ht.prototype.removeEventListener=function(c,f,m,w){hg(this,c,f,m,w)};function Nt(c,f){var m,w=c.F;if(w)for(m=[];w;w=w.F)m.push(w);if(c=c.M,w=f.type||f,typeof f=="string")f=new de(f,c);else if(f instanceof de)f.target=f.target||c;else{var D=f;f=new de(w,c),C(f,D)}if(D=!0,m)for(var L=m.length-1;0<=L;L--){var B=f.g=m[L];D=cl(B,w,!0,f)&&D}if(B=f.g=c,D=cl(B,w,!0,f)&&D,D=cl(B,w,!1,f)&&D,m)for(L=0;L<m.length;L++)B=f.g=m[L],D=cl(B,w,!1,f)&&D}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var m=c.g[f],w=0;w<m.length;w++)al(m[w]);delete c.g[f],c.h--}}this.F=null},ht.prototype.K=function(c,f,m,w){return this.i.add(String(c),f,!1,m,w)},ht.prototype.L=function(c,f,m,w){return this.i.add(String(c),f,!0,m,w)};function cl(c,f,m,w){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,L=0;L<f.length;++L){var B=f[L];if(B&&!B.da&&B.capture==m){var xe=B.listener,tt=B.ha||B.src;B.fa&&rd(c.i,B),D=xe.call(tt,w)!==!1&&D}}return D&&!w.defaultPrevented}function mg(c,f,m){if(typeof c=="function")m&&(c=g(c,m));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function gg(c){c.g=mg(()=>{c.g=null,c.i&&(c.i=!1,gg(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class M1 extends J{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:gg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(c){J.call(this),this.h=c,this.g={}}E(uo,J);var yg=[];function vg(c){M(c.g,function(f,m){this.g.hasOwnProperty(m)&&ad(f)},c),c.g={}}uo.prototype.N=function(){uo.aa.N.call(this),vg(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ud=l.JSON.stringify,V1=l.JSON.parse,U1=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function dd(){}dd.prototype.h=null;function xg(c){return c.h||(c.h=c.i())}function wg(){}var ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hd(){de.call(this,"d")}E(hd,de);function fd(){de.call(this,"c")}E(fd,de);var fs={},_g=null;function ul(){return _g=_g||new ht}fs.La="serverreachability";function bg(c){de.call(this,fs.La,c)}E(bg,de);function fo(c){const f=ul();Nt(f,new bg(f))}fs.STAT_EVENT="statevent";function Eg(c,f){de.call(this,fs.STAT_EVENT,c),this.stat=f}E(Eg,de);function Tt(c){const f=ul();Nt(f,new Eg(f,c))}fs.Ma="timingevent";function Ng(c,f){de.call(this,fs.Ma,c),this.size=f}E(Ng,de);function po(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function mo(){this.g=!0}mo.prototype.xa=function(){this.g=!1};function F1(c,f,m,w,D,L){c.info(function(){if(c.g)if(L)for(var B="",xe=L.split("&"),tt=0;tt<xe.length;tt++){var pe=xe[tt].split("=");if(1<pe.length){var ft=pe[0];pe=pe[1];var pt=ft.split("_");B=2<=pt.length&&pt[1]=="type"?B+(ft+"="+pe+"&"):B+(ft+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+w+") [attempt "+D+"]: "+f+`
`+m+`
`+B})}function $1(c,f,m,w,D,L,B){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+D+"]: "+f+`
`+m+`
`+L+" "+B})}function ei(c,f,m,w){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+z1(c,m)+(w?" "+w:"")})}function B1(c,f){c.info(function(){return"TIMEOUT: "+f})}mo.prototype.info=function(){};function z1(c,f){if(!c.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(c=0;c<m.length;c++)if(Array.isArray(m[c])){var w=m[c];if(!(2>w.length)){var D=w[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return ud(m)}catch{return f}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pd;function hl(){}E(hl,dd),hl.prototype.g=function(){return new XMLHttpRequest},hl.prototype.i=function(){return{}},pd=new hl;function Er(c,f,m,w){this.j=c,this.i=f,this.l=m,this.R=w||1,this.U=new uo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ig}function Ig(){this.i=null,this.g="",this.h=!1}var Sg={},md={};function gd(c,f,m){c.L=1,c.v=gl(Yn(f)),c.m=m,c.P=!0,kg(c,null)}function kg(c,f){c.F=Date.now(),fl(c),c.A=Yn(c.v);var m=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),Bg(m.i,"t",w),c.C=0,m=c.j.J,c.h=new Ig,c.g=oy(c.j,m?f:null,!c.m),0<c.O&&(c.M=new M1(g(c.Y,c,c.g),c.O)),f=c.U,m=c.g,w=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(yg[0]=D.toString()),D=yg);for(var L=0;L<D.length;L++){var B=dg(m,D[L],w||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),fo(),F1(c.i,c.u,c.A,c.l,c.R,c.m)}Er.prototype.ca=function(c){c=c.target;const f=this.M;f&&Xn(c)==3?f.j():this.Y(c)},Er.prototype.Y=function(c){try{if(c==this.g)e:{const pt=Xn(this.g);var f=this.g.Ba();const ri=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Qg(this.g)))){this.J||pt!=4||f==7||(f==8||0>=ri?fo(3):fo(2)),yd(this);var m=this.g.Z();this.X=m;t:if(Cg(this)){var w=Qg(this.g);c="";var D=w.length,L=Xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),go(this);var B="";break t}this.h.i=new l.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,c+=this.h.i.decode(w[f],{stream:!(L&&f==D-1)});w.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,$1(this.i,this.u,this.A,this.l,this.R,pt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,tt=this.g;if((xe=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(xe)){var pe=xe;break t}}pe=null}if(m=pe)ei(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vd(this,m);else{this.o=!1,this.s=3,Tt(12),ps(this),go(this);break e}}if(this.P){m=!0;let fn;for(;!this.J&&this.C<B.length;)if(fn=q1(this,B),fn==md){pt==4&&(this.s=4,Tt(14),m=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==Sg){this.s=4,Tt(15),ei(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else ei(this.i,this.l,fn,null),vd(this,fn);if(Cg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||B.length!=0||this.h.h||(this.s=1,Tt(16),m=!1),this.o=this.o&&m,!m)ei(this.i,this.l,B,"[Invalid Chunked Response]"),ps(this),go(this);else if(0<B.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Nd(ft),ft.M=!0,Tt(11))}}else ei(this.i,this.l,B,null),vd(this,B);pt==4&&ps(this),this.o&&!this.J&&(pt==4?ny(this.j,this):(this.o=!1,fl(this)))}else aT(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),ps(this),go(this)}}}catch{}finally{}};function Cg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function q1(c,f){var m=c.C,w=f.indexOf(`
`,m);return w==-1?md:(m=Number(f.substring(m,w)),isNaN(m)?Sg:(w+=1,w+m>f.length?md:(f=f.slice(w,w+m),c.C=w+m,f)))}Er.prototype.cancel=function(){this.J=!0,ps(this)};function fl(c){c.S=Date.now()+c.I,Ag(c,c.I)}function Ag(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=po(g(c.ba,c),f)}function yd(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Er.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(B1(this.i,this.A),this.L!=2&&(fo(),Tt(17)),ps(this),this.s=2,go(this)):Ag(this,this.S-c)};function go(c){c.j.G==0||c.J||ny(c.j,c)}function ps(c){yd(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,vg(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function vd(c,f){try{var m=c.j;if(m.G!=0&&(m.g==c||xd(m.h,c))){if(!c.K&&xd(m.h,c)&&m.G==3){try{var w=m.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var D=w;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<c.F)bl(m),wl(m);else break e;Ed(m),Tt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=po(g(m.Za,m),6e3));if(1>=Rg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else gs(m,11)}else if((c.K||m.g==c)&&bl(m),!y(f))for(D=m.Da.g.parse(f),f=0;f<D.length;f++){let pe=D[f];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const ft=pe[3];ft!=null&&(m.la=ft,m.j.info("VER="+m.la));const pt=pe[4];pt!=null&&(m.Aa=pt,m.j.info("SVER="+m.Aa));const ri=pe[5];ri!=null&&typeof ri=="number"&&0<ri&&(w=1.5*ri,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;const fn=c.g;if(fn){const Nl=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var L=w.h;L.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(wd(L,L.h),L.h=null))}if(w.D){const Td=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;Td&&(w.ya=Td,Ee(w.I,w.D,Td))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-c.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var B=c;if(w.qa=iy(w,w.J?w.ia:null,w.W),B.K){Dg(w.h,B);var xe=B,tt=w.L;tt&&(xe.I=tt),xe.B&&(yd(xe),fl(xe)),w.g=B}else ey(w);0<m.i.length&&_l(m)}else pe[0]!="stop"&&pe[0]!="close"||gs(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?gs(m,7):bd(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}fo(4)}catch{}}var W1=class{constructor(c,f){this.g=c,this.map=f}};function jg(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rg(c){return c.h?1:c.g?c.g.size:0}function xd(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function wd(c,f){c.g?c.g.add(f):c.h=f}function Dg(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}jg.prototype.cancel=function(){if(this.i=Lg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Lg(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const m of c.g.values())f=f.concat(m.D);return f}return S(c.i)}function H1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],m=c.length,w=0;w<m;w++)f.push(c[w]);return f}f=[],m=0;for(w in c)f[m++]=c[w];return f}function G1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var m=0;m<c;m++)f.push(m);return f}f=[],m=0;for(const w in c)f[m++]=w;return f}}}function Og(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var m=G1(c),w=H1(c),D=w.length,L=0;L<D;L++)f.call(void 0,w[L],m&&m[L],c)}var Mg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function K1(c,f){if(c){c=c.split("&");for(var m=0;m<c.length;m++){var w=c[m].indexOf("="),D=null;if(0<=w){var L=c[m].substring(0,w);D=c[m].substring(w+1)}else L=c[m];f(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ms(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ms){this.h=c.h,pl(this,c.j),this.o=c.o,this.g=c.g,ml(this,c.s),this.l=c.l;var f=c.i,m=new xo;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),Vg(this,m),this.m=c.m}else c&&(f=String(c).match(Mg))?(this.h=!1,pl(this,f[1]||"",!0),this.o=yo(f[2]||""),this.g=yo(f[3]||"",!0),ml(this,f[4]),this.l=yo(f[5]||"",!0),Vg(this,f[6]||"",!0),this.m=yo(f[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}ms.prototype.toString=function(){var c=[],f=this.j;f&&c.push(vo(f,Ug,!0),":");var m=this.g;return(m||f=="file")&&(c.push("//"),(f=this.o)&&c.push(vo(f,Ug,!0),"@"),c.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&c.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&c.push("/"),c.push(vo(m,m.charAt(0)=="/"?X1:Y1,!0))),(m=this.i.toString())&&c.push("?",m),(m=this.m)&&c.push("#",vo(m,Z1)),c.join("")};function Yn(c){return new ms(c)}function pl(c,f,m){c.j=m?yo(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function ml(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Vg(c,f,m){f instanceof xo?(c.i=f,eT(c.i,c.h)):(m||(f=vo(f,J1)),c.i=new xo(f,c.h))}function Ee(c,f,m){c.i.set(f,m)}function gl(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function yo(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vo(c,f,m){return typeof c=="string"?(c=encodeURI(c).replace(f,Q1),m&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Q1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ug=/[#\/\?@]/g,Y1=/[#\?:]/g,X1=/[#\?]/g,J1=/[#\?@]/g,Z1=/#/g;function xo(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Nr(c){c.g||(c.g=new Map,c.h=0,c.i&&K1(c.i,function(f,m){c.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=xo.prototype,t.add=function(c,f){Nr(this),this.i=null,c=ti(this,c);var m=this.g.get(c);return m||this.g.set(c,m=[]),m.push(f),this.h+=1,this};function Fg(c,f){Nr(c),f=ti(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function $g(c,f){return Nr(c),f=ti(c,f),c.g.has(f)}t.forEach=function(c,f){Nr(this),this.g.forEach(function(m,w){m.forEach(function(D){c.call(f,D,w,this)},this)},this)},t.na=function(){Nr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let w=0;w<f.length;w++){const D=c[w];for(let L=0;L<D.length;L++)m.push(f[w])}return m},t.V=function(c){Nr(this);let f=[];if(typeof c=="string")$g(this,c)&&(f=f.concat(this.g.get(ti(this,c))));else{c=Array.from(this.g.values());for(let m=0;m<c.length;m++)f=f.concat(c[m])}return f},t.set=function(c,f){return Nr(this),this.i=null,c=ti(this,c),$g(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Bg(c,f,m){Fg(c,f),0<m.length&&(c.i=null,c.g.set(ti(c,f),S(m)),c.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var w=f[m];const L=encodeURIComponent(String(w)),B=this.V(w);for(w=0;w<B.length;w++){var D=L;B[w]!==""&&(D+="="+encodeURIComponent(String(B[w]))),c.push(D)}}return this.i=c.join("&")};function ti(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function eT(c,f){f&&!c.j&&(Nr(c),c.i=null,c.g.forEach(function(m,w){var D=w.toLowerCase();w!=D&&(Fg(this,w),Bg(this,D,m))},c)),c.j=f}function tT(c,f){const m=new mo;if(l.Image){const w=new Image;w.onload=v(Tr,m,"TestLoadImage: loaded",!0,f,w),w.onerror=v(Tr,m,"TestLoadImage: error",!1,f,w),w.onabort=v(Tr,m,"TestLoadImage: abort",!1,f,w),w.ontimeout=v(Tr,m,"TestLoadImage: timeout",!1,f,w),l.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else f(!1)}function nT(c,f){const m=new mo,w=new AbortController,D=setTimeout(()=>{w.abort(),Tr(m,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:w.signal}).then(L=>{clearTimeout(D),L.ok?Tr(m,"TestPingServer: ok",!0,f):Tr(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),Tr(m,"TestPingServer: error",!1,f)})}function Tr(c,f,m,w,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),w(m)}catch{}}function rT(){this.g=new U1}function sT(c,f,m){const w=m||"";try{Og(c,function(D,L){let B=D;d(D)&&(B=ud(D)),f.push(w+L+"="+encodeURIComponent(B))})}catch(D){throw f.push(w+"type="+encodeURIComponent("_badmap")),D}}function yl(c){this.l=c.Ub||null,this.j=c.eb||!1}E(yl,dd),yl.prototype.g=function(){return new vl(this.l,this.j)},yl.prototype.i=function(c){return function(){return c}}({});function vl(c,f){ht.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(vl,ht),t=vl.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,_o(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,_o(this)),this.g&&(this.readyState=3,_o(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;zg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function zg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?wo(this):_o(this),this.readyState==3&&zg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,wo(this))},t.Qa=function(c){this.g&&(this.response=c,wo(this))},t.ga=function(){this.g&&wo(this)};function wo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,_o(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,c.push(m[0]+": "+m[1]),m=f.next();return c.join(`\r
`)};function _o(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qg(c){let f="";return M(c,function(m,w){f+=w,f+=":",f+=m,f+=`\r
`}),f}function _d(c,f,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=qg(m),typeof c=="string"?m!=null&&encodeURIComponent(String(m)):Ee(c,f,m))}function Le(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Le,ht);var iT=/^https?$/i,oT=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pd.g(),this.v=this.o?xg(this.o):xg(pd),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(L){Wg(this,L);return}if(c=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var D in w)m.set(D,w[D]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())m.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),D=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(oT,f,void 0))||w||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of m)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kg(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){Wg(this,L)}};function Wg(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Hg(c),xl(c)}function Hg(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),xl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xl(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gg(this):this.bb())},t.bb=function(){Gg(this)};function Gg(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Xn(c)!=4||c.Z()!=2)){if(c.u&&Xn(c)==4)mg(c.Ea,0,c);else if(Nt(c,"readystatechange"),Xn(c)==4){c.h=!1;try{const B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var w;if(w=B===0){var D=String(c.D).match(Mg)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),w=!iT.test(D?D.toLowerCase():"")}m=w}if(m)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var L=2<Xn(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",Hg(c)}}finally{xl(c)}}}}function xl(c,f){if(c.g){Kg(c);const m=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||Nt(c,"ready");try{m.onreadystatechange=w}catch{}}}function Kg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Xn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),V1(f)}};function Qg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function aT(c){const f={};c=(c.g&&2<=Xn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(y(c[w]))continue;var m=j(c[w]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[D]||[];f[D]=L,L.push(m)}N(f,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bo(c,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[c]||f}function Yg(c){this.Aa=0,this.i=[],this.j=new mo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bo("baseRetryDelayMs",5e3,c),this.cb=bo("retryDelaySeedMs",1e4,c),this.Wa=bo("forwardChannelMaxRetries",2,c),this.wa=bo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new jg(c&&c.concurrentRequestLimit),this.Da=new rT,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Yg.prototype,t.la=8,t.G=1,t.connect=function(c,f,m,w){Tt(0),this.W=c,this.H=f||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=iy(this,null,this.W),_l(this)};function bd(c){if(Xg(c),c.G==3){var f=c.U++,m=Yn(c.I);if(Ee(m,"SID",c.K),Ee(m,"RID",f),Ee(m,"TYPE","terminate"),Eo(c,m),f=new Er(c,c.j,f),f.L=2,f.v=gl(Yn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=f.v,m=!0),m||(f.g=oy(f.j,null),f.g.ea(f.v)),f.F=Date.now(),fl(f)}sy(c)}function wl(c){c.g&&(Nd(c),c.g.cancel(),c.g=null)}function Xg(c){wl(c),c.u&&(l.clearTimeout(c.u),c.u=null),bl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function _l(c){if(!Pg(c.h)&&!c.s){c.s=!0;var f=c.Ga;z||X(),U||(z(),U=!0),K.add(f,c),c.B=0}}function lT(c,f){return Rg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=po(g(c.Ga,c,f),ry(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const D=new Er(this,this.j,c);let L=this.o;if(this.S&&(L?(L=_(L),C(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=Zg(this,D,f),m=Yn(this.I),Ee(m,"RID",c),Ee(m,"CVER",22),this.D&&Ee(m,"X-HTTP-Session-Id",this.D),Eo(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(qg(L)))+"&"+f:this.m&&_d(m,this.m,L)),wd(this.h,D),this.Ua&&Ee(m,"TYPE","init"),this.P?(Ee(m,"$req",f),Ee(m,"SID","null"),D.T=!0,gd(D,m,null)):gd(D,m,f),this.G=2}}else this.G==3&&(c?Jg(this,c):this.i.length==0||Pg(this.h)||Jg(this))};function Jg(c,f){var m;f?m=f.l:m=c.U++;const w=Yn(c.I);Ee(w,"SID",c.K),Ee(w,"RID",m),Ee(w,"AID",c.T),Eo(c,w),c.m&&c.o&&_d(w,c.m,c.o),m=new Er(c,c.j,m,c.B+1),c.m===null&&(m.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Zg(c,m,1e3),m.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wd(c.h,m),gd(m,w,f)}function Eo(c,f){c.H&&M(c.H,function(m,w){Ee(f,w,m)}),c.l&&Og({},function(m,w){Ee(f,w,m)})}function Zg(c,f,m){m=Math.min(c.i.length,m);var w=c.l?g(c.l.Na,c.l,c):null;e:{var D=c.i;let L=-1;for(;;){const B=["count="+m];L==-1?0<m?(L=D[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let xe=!0;for(let tt=0;tt<m;tt++){let pe=D[tt].g;const ft=D[tt].map;if(pe-=L,0>pe)L=Math.max(0,D[tt].g-100),xe=!1;else try{sT(ft,B,"req"+pe+"_")}catch{w&&w(ft)}}if(xe){w=B.join("&");break e}}}return c=c.i.splice(0,m),f.D=c,w}function ey(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;z||X(),U||(z(),U=!0),K.add(f,c),c.v=0}}function Ed(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=po(g(c.Fa,c),ry(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ty(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=po(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),wl(this),ty(this))};function Nd(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function ty(c){c.g=new Er(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Yn(c.qa);Ee(f,"RID","rpc"),Ee(f,"SID",c.K),Ee(f,"AID",c.T),Ee(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(f,"TO",c.ja),Ee(f,"TYPE","xmlhttp"),Eo(c,f),c.m&&c.o&&_d(f,c.m,c.o),c.L&&(c.g.I=c.L);var m=c.g;c=c.ia,m.L=1,m.v=gl(Yn(f)),m.m=null,m.P=!0,kg(m,c)}t.Za=function(){this.C!=null&&(this.C=null,wl(this),Ed(this),Tt(19))};function bl(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function ny(c,f){var m=null;if(c.g==f){bl(c),Nd(c),c.g=null;var w=2}else if(xd(c.h,f))m=f.D,Dg(c.h,f),w=1;else return;if(c.G!=0){if(f.o)if(w==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var D=c.B;w=ul(),Nt(w,new Ng(w,m)),_l(c)}else ey(c);else if(D=f.s,D==3||D==0&&0<f.X||!(w==1&&lT(c,f)||w==2&&Ed(c)))switch(m&&0<m.length&&(f=c.h,f.i=f.i.concat(m)),D){case 1:gs(c,5);break;case 4:gs(c,10);break;case 3:gs(c,6);break;default:gs(c,2)}}}function ry(c,f){let m=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(m*=2),m*f}function gs(c,f){if(c.j.info("Error code "+f),f==2){var m=g(c.fb,c),w=c.Xa;const D=!w;w=new ms(w||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||pl(w,"https"),gl(w),D?tT(w.toString(),m):nT(w.toString(),m)}else Tt(2);c.G=0,c.l&&c.l.sa(f),sy(c),Xg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function sy(c){if(c.G=0,c.ka=[],c.l){const f=Lg(c.h);(f.length!=0||c.i.length!=0)&&(k(c.ka,f),k(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function iy(c,f,m){var w=m instanceof ms?Yn(m):new ms(m);if(w.g!="")f&&(w.g=f+"."+w.g),ml(w,w.s);else{var D=l.location;w=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var L=new ms(null);w&&pl(L,w),f&&(L.g=f),D&&ml(L,D),m&&(L.l=m),w=L}return m=c.D,f=c.ya,m&&f&&Ee(w,m,f),Ee(w,"VER",c.la),Eo(c,w),w}function oy(c,f,m){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Le(new yl({eb:m})):new Le(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ay(){}t=ay.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(c,f){return new qt(c,f)};function qt(c,f){ht.call(this),this.g=new Yg(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!y(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!y(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new ni(this)}E(qt,ht),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){bd(this.g)},qt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var m={};m.__data__=c,c=m}else this.u&&(m={},m.__data__=ud(c),c=m);f.i.push(new W1(f.Ya++,c)),f.G==3&&_l(f)},qt.prototype.N=function(){this.g.l=null,delete this.j,bd(this.g),delete this.g,qt.aa.N.call(this)};function ly(c){hd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const m in f){c=m;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(ly,hd);function cy(){fd.call(this),this.status=1}E(cy,fd);function ni(c){this.g=c}E(ni,ay),ni.prototype.ua=function(){Nt(this.g,"a")},ni.prototype.ta=function(c){Nt(this.g,new ly(c))},ni.prototype.sa=function(c){Nt(this.g,new cy)},ni.prototype.ra=function(){Nt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,hb=function(){return new El},db=function(){return ul()},ub=fs,kf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,cc=dl,Tg.COMPLETE="complete",cb=Tg,wg.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",ht.prototype.listen=ht.prototype.K,zo=wg,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,lb=Le}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Au("@firebase/firestore");function Po(){return Vs.logLevel}function Q(t,...e){if(Vs.logLevel<=le.DEBUG){const n=e.map(em);Vs.debug(`Firestore (${ro}): ${t}`,...n)}}function vr(t,...e){if(Vs.logLevel<=le.ERROR){const n=e.map(em);Vs.error(`Firestore (${ro}): ${t}`,...n)}}function Bi(t,...e){if(Vs.logLevel<=le.WARN){const n=e.map(em);Vs.warn(`Firestore (${ro}): ${t}`,...n)}}function em(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${ro}) INTERNAL ASSERTION FAILED: `+t;throw vr(e),new Error(e)}function ve(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class _A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bA{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ur,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ur)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new fb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new vt(e)}}class EA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class NA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new EA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ve(this.o===void 0);const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new TA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=SA(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Qe(0,0))}static max(){return new ne(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends ja{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ja{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ie.fromString(e))}static fromName(e){return new Y(Ie.fromString(e).popFirst(5))}static empty(){return new Y(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ie(e.slice()))}}function CA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new rs(s,Y.empty(),e)}function AA(t){return new rs(t.readTime,t.key,-1)}class rs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new rs(ne.min(),Y.empty(),-1)}static max(){return new rs(ne.max(),Y.empty(),-1)}}function jA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==PA)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function DA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tm.oe=-1;function Pu(t){return t==null}function Gc(t){return t===0&&1/t==-1/0}function LA(t){return typeof t=="number"&&Number.isInteger(t)&&!Gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ys(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zl(this.root,e,this.comparator,!0)}}class zl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new sn([])}unionWith(e){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gb("Invalid base64 string: "+i):i}}(e);return new ut(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const OA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(t){if(ve(!!t),typeof t=="string"){let e=0;const n=OA.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Us(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rm(t){const e=t.mapValue.fields.__previous_value__;return nm(e)?rm(e):e}function Pa(t){const e=ss(t.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Ra{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ra&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nm(t)?4:UA(t)?9007199254740991:VA(t)?10:11:te()}function Bn(t,e){if(t===e)return!0;const n=Fs(t);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ss(s.timestampValue),l=ss(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Us(s.bytesValue).isEqual(Us(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Fe(s.geoPointValue.latitude)===Fe(i.geoPointValue.latitude)&&Fe(s.geoPointValue.longitude)===Fe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Fe(s.integerValue)===Fe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Fe(s.doubleValue),l=Fe(i.doubleValue);return o===l?Gc(o)===Gc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(B0(o)!==B0(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Bn(o[u],l[u])))return!1;return!0}(t,e);default:return te()}}function Da(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function qi(t,e){if(t===e)return 0;const n=Fs(t),r=Fs(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Fe(i.integerValue||i.doubleValue),u=Fe(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return q0(t.timestampValue,e.timestampValue);case 4:return q0(Pa(t),Pa(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Us(i),u=Us(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=me(l[d],u[d]);if(h!==0)return h}return me(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=me(Fe(i.latitude),Fe(o.latitude));return l!==0?l:me(Fe(i.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return W0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,h;const p=i.fields||{},g=o.fields||{},v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,E=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=me(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:W0(v,E)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ql.mapValue&&o===ql.mapValue)return 0;if(i===ql.mapValue)return 1;if(o===ql.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=me(u[p],h[p]);if(g!==0)return g;const v=qi(l[u[p]],d[h[p]]);if(v!==0)return v}return me(u.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=ss(t),r=ss(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function W0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qi(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Wi(t){return Cf(t)}function Cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Cf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Cf(n.fields[o])}`;return s+"}"}(t.mapValue):te()}function H0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Af(t){return!!t&&"integerValue"in t}function sm(t){return!!t&&"arrayValue"in t}function G0(t){return!!t&&"nullValue"in t}function K0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uc(t){return!!t&&"mapValue"in t}function VA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ys(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function UA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sa(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=sa(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];uc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ys(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ht(sa(this.value))}}function yb(t){const e=[];return Ys(t.fields,(n,r)=>{const s=new ot([n]);if(uc(r)){const i=yb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,ne.min(),ne.min(),ne.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,s){return new wt(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new wt(e,2,n,ne.min(),ne.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ne.min(),ne.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.position=e,this.inclusive=n}}function Q0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=qi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Y0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n="asc"){this.field=e,this.dir=n}}function FA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class We extends vb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BA(e,n,r):n==="array-contains"?new WA(e,r):n==="in"?new HA(e,r):n==="not-in"?new GA(e,r):n==="array-contains-any"?new KA(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new zA(e,r):new qA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qi(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends vb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Nn(e,n)}matches(e){return xb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xb(t){return t.op==="and"}function wb(t){return $A(t)&&xb(t)}function $A(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function jf(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Wi(t.value);if(wb(t))return t.filters.map(e=>jf(e)).join(",");{const e=t.filters.map(n=>jf(n)).join(",");return`${t.op}(${e})`}}function _b(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&Bn(r.value,s.value)}(t,e):t instanceof Nn?function(r,s){return s instanceof Nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&_b(o,s.filters[l]),!0):!1}(t,e):void te()}function bb(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Wi(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(bb).join(" ,")+"}"}(t):"Filter"}class BA extends We{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class zA extends We{constructor(e,n){super(e,"in",n),this.keys=Eb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class qA extends We{constructor(e,n){super(e,"not-in",n),this.keys=Eb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Eb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class WA extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sm(n)&&Da(n.arrayValue,this.value)}}class HA extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class GA extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Da(this.value.arrayValue,n)}}class KA extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function X0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new QA(t,e,n,r,s,i,o)}function im(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wi(r)).join(",")),e.ue=n}return e.ue}function om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!FA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_b(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y0(t.startAt,e.startAt)&&Y0(t.endAt,e.endAt)}function Pf(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YA(t,e,n,r,s,i,o,l){return new so(t,e,n,r,s,i,o,l)}function am(t){return new so(t)}function J0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nb(t){return t.collectionGroup!==null}function ia(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new lt(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new La(i,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new La(ot.keyField(),r))}return e.ce}function On(t){const e=re(t);return e.le||(e.le=XA(e,ia(t))),e.le}function XA(t,e){if(t.limitType==="F")return X0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new La(s.field,i)});const n=t.endAt?new Kc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kc(t.startAt.position,t.startAt.inclusive):null;return X0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rf(t,e){const n=t.filters.concat([e]);return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Df(t,e,n){return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ru(t,e){return om(On(t),On(e))&&t.limitType===e.limitType}function Tb(t){return`${im(On(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>bb(s)).join(", ")}]`),Pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Wi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Wi(s)).join(",")),`Target(${r})`}(On(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ia(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Q0(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,ia(r),s)||r.endAt&&!function(o,l,u){const d=Q0(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,ia(r),s))}(t,e)}function JA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ib(t){return(e,n)=>{let r=!1;for(const s of ia(t)){const i=ZA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ZA(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?qi(u,d):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return mb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new De(Y.comparator);function xr(){return ej}const Sb=new De(Y.comparator);function qo(...t){let e=Sb;for(const n of t)e=e.insert(n.key,n);return e}function kb(t){let e=Sb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Is(){return oa()}function Cb(){return oa()}function oa(){return new io(t=>t.toString(),(t,e)=>t.isEqual(e))}const tj=new De(Y.comparator),nj=new lt(Y.comparator);function ae(...t){let e=nj;for(const n of t)e=e.add(n);return e}const rj=new lt(me);function sj(){return rj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(e)?"-0":e}}function Ab(t){return{integerValue:""+t}}function ij(t,e){return LA(e)?Ab(e):lm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function oj(t,e,n){return t instanceof Oa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&nm(i)&&(i=rm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Hi?Pb(t,e):t instanceof Ma?Rb(t,e):function(s,i){const o=jb(s,i),l=Z0(o)+Z0(s.Pe);return Af(o)&&Af(s.Pe)?Ab(l):lm(s.serializer,l)}(t,e)}function aj(t,e,n){return t instanceof Hi?Pb(t,e):t instanceof Ma?Rb(t,e):n}function jb(t,e){return t instanceof Qc?function(r){return Af(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Oa extends Lu{}class Hi extends Lu{constructor(e){super(),this.elements=e}}function Pb(t,e){const n=Db(e);for(const r of t.elements)n.some(s=>Bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends Lu{constructor(e){super(),this.elements=e}}function Rb(t,e){let n=Db(e);for(const r of t.elements)n=n.filter(s=>!Bn(s,r));return{arrayValue:{values:n}}}class Qc extends Lu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Z0(t){return Fe(t.integerValue||t.doubleValue)}function Db(t){return sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.field=e,this.transform=n}}function lj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Hi&&s instanceof Hi||r instanceof Ma&&s instanceof Ma?zi(r.elements,s.elements,Bn):r instanceof Qc&&s instanceof Qc?Bn(r.Pe,s.Pe):r instanceof Oa&&s instanceof Oa}(t.transform,e.transform)}class cj{constructor(e,n){this.version=e,this.transformResults=n}}class ln{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ou{}function Ob(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cm(t.key,ln.none()):new Ya(t.key,t.data,ln.none());{const n=t.data,r=Ht.empty();let s=new lt(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ds(t.key,r,new sn(s.toArray()),ln.none())}}function uj(t,e,n){t instanceof Ya?function(s,i,o){const l=s.value.clone(),u=tv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(s,i,o){if(!dc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=tv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Mb(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,r){return t instanceof Ya?function(i,o,l,u){if(!dc(i.precondition,o))return l;const d=i.value.clone(),h=nv(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ds?function(i,o,l,u){if(!dc(i.precondition,o))return l;const d=nv(i.fieldTransforms,u,o),h=o.data;return h.setAll(Mb(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return dc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function dj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jb(r.transform,s||null);i!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,i))}return n||null}function ev(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>lj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ya extends Ou{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ds extends Ou{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tv(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,aj(o,l,n[s]))}return r}function nv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,oj(i,o,e))}return r}class cm extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hj extends Ou{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&uj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=aa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Cb();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Ob(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>ev(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>ev(n,r))}}class um{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return tj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new um(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ue;function gj(t){switch(t){default:return te();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Vb(t){if(t===void 0)return vr("GRPC error has no .code"),V.UNKNOWN;switch(t){case ze.OK:return V.OK;case ze.CANCELLED:return V.CANCELLED;case ze.UNKNOWN:return V.UNKNOWN;case ze.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case ze.INTERNAL:return V.INTERNAL;case ze.UNAVAILABLE:return V.UNAVAILABLE;case ze.UNAUTHENTICATED:return V.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case ze.NOT_FOUND:return V.NOT_FOUND;case ze.ALREADY_EXISTS:return V.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return V.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case ze.ABORTED:return V.ABORTED;case ze.OUT_OF_RANGE:return V.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return V.UNIMPLEMENTED;case ze.DATA_LOSS:return V.DATA_LOSS;default:return te()}}(ue=ze||(ze={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new js([4294967295,4294967295],0);function rv(t){const e=yj().encode(t),n=new ab;return n.update(e),new Uint8Array(n.digest())}function sv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new js([n,r],0),new js([s,i],0)]}class dm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=js.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(js.fromNumber(r)));return s.compare(vj)===1&&(s=new js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=rv(e),[r,s]=sv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=rv(e),[r,s]=sv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mu(ne.min(),s,new De(me),xr(),ae())}}class Xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xa(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Ub{constructor(e,n){this.targetId=e,this.me=n}}class Fb{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class iv{constructor(){this.fe=0,this.ge=av(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ae(),n=ae(),r=ae();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new Xa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=av()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xj{constructor(e){this.Le=e,this.Be=new Map,this.ke=xr(),this.qe=ov(),this.Qe=new De(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Pf(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,wt.newNoDocument(o,ne.min()))}else ve(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Us(r).toUint8Array()}catch(u){if(u instanceof gb)return Bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new dm(o,s,i)}catch(u){return Bi(u instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Pf(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,wt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ae();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Mu(e,n,this.Qe,this.ke,r);return this.ke=xr(),this.qe=ov(),this.Qe=new De(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new iv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new iv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ov(){return new De(Y.comparator)}function av(){return new De(Y.comparator)}const wj={asc:"ASCENDING",desc:"DESCENDING"},_j={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bj={and:"AND",or:"OR"};class Ej{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Lf(t,e){return t.useProto3Json||Pu(e)?e:{value:e}}function Yc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $b(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Nj(t,e){return Yc(t,e.toTimestamp())}function Mn(t){return ve(!!t),ne.fromTimestamp(function(n){const r=ss(n);return new Qe(r.seconds,r.nanos)}(t))}function hm(t,e){return Of(t,e).canonicalString()}function Of(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bb(t){const e=Ie.fromString(t);return ve(Gb(e)),e}function Mf(t,e){return hm(t.databaseId,e.path)}function ih(t,e){const n=Bb(e);if(n.get(1)!==t.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(qb(n))}function zb(t,e){return hm(t.databaseId,e)}function Tj(t){const e=Bb(t);return e.length===4?Ie.emptyPath():qb(e)}function Vf(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qb(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lv(t,e,n){return{name:Mf(t,e),fields:n.value.mapValue.fields}}function Ij(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ve(h===void 0||typeof h=="string"),ut.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ut.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?V.UNKNOWN:Vb(d.code);return new H(h,d.message||"")}(o);n=new Fb(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ih(t,r.document.name),i=Mn(r.document.updateTime),o=r.document.createTime?Mn(r.document.createTime):ne.min(),l=new Ht({mapValue:{fields:r.document.fields}}),u=wt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new hc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ih(t,r.document),i=r.readTime?Mn(r.readTime):ne.min(),o=wt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new hc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ih(t,r.document),i=r.removedTargetIds||[];n=new hc([],i,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mj(s,i),l=r.targetId;n=new Ub(l,o)}}return n}function Sj(t,e){let n;if(e instanceof Ya)n={update:lv(t,e.key,e.value)};else if(e instanceof cm)n={delete:Mf(t,e.key)};else if(e instanceof ds)n={update:lv(t,e.key,e.data),updateMask:Oj(e.fieldMask)};else{if(!(e instanceof hj))return te();n={verify:Mf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Oa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Hi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Nj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:te()}(t,e.precondition)),n}function kj(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Mn(s.updateTime):Mn(i);return o.isEqual(ne.min())&&(o=Mn(i)),new cj(o,s.transformResults||[])}(n,e))):[]}function Cj(t,e){return{documents:[zb(t,e.path)]}}function Aj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zb(t,s);const i=function(d){if(d.length!==0)return Hb(Nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:oi(g.field),direction:Rj(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Lf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function jj(t){let e=Tj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const g=Wb(p);return g instanceof Nn&&wb(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(E){return new La(ai(E.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Pu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,v=p.values||[];return new Kc(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,v=p.values||[];return new Kc(v,g)}(n.endAt)),YA(e,s,o,i,l,"F",u,d)}function Pj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ai(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ai(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ai(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ai(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return We.create(ai(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(r=>Wb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function Rj(t){return wj[t]}function Dj(t){return _j[t]}function Lj(t){return bj[t]}function oi(t){return{fieldPath:t.canonicalString()}}function ai(t){return ot.fromServerFormat(t.fieldPath)}function Hb(t){return t instanceof We?function(n){if(n.op==="=="){if(K0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(G0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(K0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(G0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:Dj(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const r=n.getFilters().map(s=>Hb(s));return r.length===1?r[0]:{compositeFilter:{op:Lj(n.op),filters:r}}}(t):te()}function Oj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r,s,i=ne.min(),o=ne.min(),l=ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.ct=e}}function Vj(t){const e=jj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this.un=new Fj}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(rs.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Fj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gi(0)}static kn(){return new Gi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.changes=new io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&aa(r.mutation,s,sn.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const s=Is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=xr();const o=oa(),l=function(){return oa()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof ds)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),aa(h.mutation,d,h.mutation.getFieldMask(),Qe.now())):o.set(d.key,sn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var p;return l.set(d,new Bj(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=oa();let s=new De((o,l)=>o-l),i=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||sn.empty();h=l.applyToLocalView(d,h),r.set(u,h);const p=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,p=Cb();h.forEach(g=>{if(!i.has(g)){const v=Ob(n.get(g),r.get(g));v!==null&&p.set(g,v),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Is());let l=-1,u=i;return o.next(d=>F.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ae())).next(h=>({batchId:l,changes:kb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const d=function(p,g){return new so(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,wt.newInvalidDocument(h)))});let l=qo();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&aa(h.mutation,d,sn.empty(),Qe.now()),Du(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Vj(s.bundledQuery),readTime:Mn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.overlays=new De(Y.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Is();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Is(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new De((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Is(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Is(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ae(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.sessionToken=ut.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.Tr=new lt(Xe.Er),this.dr=new lt(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new Ie([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new Ie([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=ae();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Xe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fj(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Xe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(me);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new Y(i),0);let l=new lt(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xe(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.Mr=e,this.docs=function(){return new De(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=xr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xr();const o=n.path,l=new Y(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||jA(AA(h),r)<=0||(s.has(h.key)||Du(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){te()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qj(this)}getSize(e){return F.resolve(this.size)}}class Qj extends $j{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.persistence=e,this.Nr=new io(n=>im(n),om),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fm,this.targetCount=0,this.kr=Gi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Gi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tm(0),this.Kr=!1,this.Kr=!0,this.$r=new Hj,this.referenceDelegate=e(this),this.Ur=new Yj(this),this.indexManager=new Uj,this.remoteDocumentCache=function(s){return new Kj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Mj(n),this.Gr=new qj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Wj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Gj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new Jj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Jj extends RA{constructor(e){super(),this.currentSequenceNumber=e}}class pm{constructor(e){this.persistence=e,this.Jr=new fm,this.Yr=null}static Zr(e){return new pm(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ae(),s=ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eC()?8:DA(Et())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Zj;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Po()<=le.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Po()<=le.DEBUG&&Q("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Po()<=le.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(n))):F.resolve())}Yi(e,n){if(J0(n))return F.resolve(null);let r=On(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Df(n,null,"F"),r=On(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ae(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,Df(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return J0(n)||s.isEqual(ne.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Po()<=le.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ii(n)),this.rs(e,o,n,CA(s,-1)).next(l=>l))})}ts(e,n){let r=new lt(Ib(e));return n.forEach((s,i)=>{Du(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Po()<=le.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ii(n)),this.Ji.getDocumentsMatchingQuery(e,n,rs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new De(me),this._s=new io(i=>im(i),om),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function nP(t,e,n,r){return new tP(t,e,n,r)}async function Kb(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ae();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function rP(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const p=d.batch,g=p.keys();let v=F.resolve();return g.forEach(E=>{v=v.next(()=>h.getEntry(u,E)).next(S=>{const k=d.docVersions.get(E);ve(k!==null),S.version.compareTo(k)<0&&(p.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),h.addEntry(S)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Qb(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function sP(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,p)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(ut.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(p,v),function(S,k,x){return S.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,v,h)&&l.push(n.Ur.updateTargetData(i,v))});let u=xr(),d=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(iP(i,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(ne.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function iP(t,e,n){let r=ae(),s=ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=xr();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function oP(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aP(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Uf(t,e,n){const r=re(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Qa(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function cv(t,e,n){const r=re(t);let s=ne.min(),i=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const p=re(u),g=p._s.get(h);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,h)}(r,o,On(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ne.min(),n?i:ae())).next(l=>(lP(r,JA(e),l),{documents:l,Ts:i})))}function lP(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class uv{constructor(){this.activeTargetIds=sj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cP{constructor(){this.so=new uv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl=null;function oh(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class fP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=oh(),u=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(h=>(Q("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw Bi("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=dP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=oh();return new Promise((o,l)=>{const u=new lb;u.setWithCredentials(!0),u.listenOnce(cb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cc.NO_ERROR:const h=u.getResponseJson();Q(yt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case cc.TIMEOUT:Q(yt,`RPC '${e}' ${i} timed out`),l(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const p=u.getStatus();if(Q(yt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const E=function(k){const x=k.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(x)>=0?x:V.UNKNOWN}(v.status);l(new H(E,v.message))}else l(new H(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(V.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{Q(yt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Q(yt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=oh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hb(),l=db(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");Q(yt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=o.createWebChannel(h,u);let g=!1,v=!1;const E=new hP({Io:k=>{v?Q(yt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(Q(yt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Q(yt,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),S=(k,x,y)=>{k.listen(x,b=>{try{y(b)}catch(P){setTimeout(()=>{throw P},0)}})};return S(p,zo.EventType.OPEN,()=>{v||(Q(yt,`RPC '${e}' stream ${s} transport opened.`),E.yo())}),S(p,zo.EventType.CLOSE,()=>{v||(v=!0,Q(yt,`RPC '${e}' stream ${s} transport closed`),E.So())}),S(p,zo.EventType.ERROR,k=>{v||(v=!0,Bi(yt,`RPC '${e}' stream ${s} transport errored:`,k),E.So(new H(V.UNAVAILABLE,"The operation could not be completed")))}),S(p,zo.EventType.MESSAGE,k=>{var x;if(!v){const y=k.data[0];ve(!!y);const b=y,P=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(P){Q(yt,`RPC '${e}' stream ${s} received error:`,P);const O=P.status;let M=function(I){const C=ze[I];if(C!==void 0)return Vb(C)}(O),N=P.message;M===void 0&&(M=V.INTERNAL,N="Unknown error status: "+O+" with message "+P.message),v=!0,E.So(new H(M,N)),p.close()}else Q(yt,`RPC '${e}' stream ${s} received:`,y),E.bo(y)}}),S(l,ub.STAT_EVENT,k=>{k.stat===kf.PROXY?Q(yt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===kf.NOPROXY&&Q(yt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return new Ej(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pP extends Xb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Ij(this.serializer,e),r=function(i){if(!("targetChange"in i))return ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Mn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Vf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Pf(u)?{documents:Cj(i,u)}:{query:Aj(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=$b(i,o.resumeToken);const d=Lf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=Yc(i,o.snapshotVersion.toTimestamp());const d=Lf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=Pj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Vf(this.serializer),n.removeTarget=e,this.a_(n)}}class mP extends Xb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=kj(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Vf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Of(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Of(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vr(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Xs(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=re(u);d.L_.add(4),await Ja(d),d.q_.set("Unknown"),d.L_.delete(4),await Uu(d)}(this))})}),this.q_=new yP(r,s)}}async function Uu(t){if(Xs(t))for(const e of t.B_)await e(!0)}async function Ja(t){for(const e of t.B_)await e(!1)}function Jb(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xm(n)?vm(n):oo(n).r_()&&ym(n,e))}function gm(t,e){const n=re(t),r=oo(n);n.N_.delete(e),r.r_()&&Zb(n,e),n.N_.size===0&&(r.r_()?r.o_():Xs(n)&&n.q_.set("Unknown"))}function ym(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oo(t).A_(e)}function Zb(t,e){t.Q_.xe(e),oo(t).R_(e)}function vm(t){t.Q_=new xj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),oo(t).start(),t.q_.v_()}function xm(t){return Xs(t)&&!oo(t).n_()&&t.N_.size>0}function Xs(t){return re(t).L_.size===0}function eE(t){t.Q_=void 0}async function xP(t){t.q_.set("Online")}async function wP(t){t.N_.forEach((e,n)=>{ym(t,e)})}async function _P(t,e){eE(t),xm(t)?(t.q_.M_(e),vm(t)):t.q_.set("Unknown")}async function bP(t,e,n){if(t.q_.set("Online"),e instanceof Fb&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xc(t,r)}else if(e instanceof hc?t.Q_.Ke(e):e instanceof Ub?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await Qb(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(d);h&&i.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(ut.EMPTY_BYTE_STRING,h.snapshotVersion)),Zb(i,u);const p=new zr(h.target,u,d,h.sequenceNumber);ym(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Xc(t,r)}}async function Xc(t,e,n){if(!Qa(e))throw e;t.L_.add(1),await Ja(t),t.q_.set("Offline"),n||(n=()=>Qb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Uu(t)})}function tE(t,e){return e().catch(n=>Xc(t,n,e))}async function Fu(t){const e=re(t),n=is(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EP(e);)try{const s=await oP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,NP(e,s)}catch(s){await Xc(e,s)}nE(e)&&rE(e)}function EP(t){return Xs(t)&&t.O_.length<10}function NP(t,e){t.O_.push(e);const n=is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function nE(t){return Xs(t)&&!is(t).n_()&&t.O_.length>0}function rE(t){is(t).start()}async function TP(t){is(t).p_()}async function IP(t){const e=is(t);for(const n of t.O_)e.m_(n.mutations)}async function SP(t,e,n){const r=t.O_.shift(),s=um.from(r,e,n);await tE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fu(t)}async function kP(t,e){e&&is(t).V_&&await async function(r,s){if(function(o){return gj(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();is(r).s_(),await tE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fu(r)}}(t,e),nE(t)&&rE(t)}async function hv(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Xs(n);n.L_.add(3),await Ja(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Uu(n)}async function CP(t,e){const n=re(t);e?(n.L_.delete(2),await Uu(n)):e||(n.L_.add(2),await Ja(n),n.q_.set("Unknown"))}function oo(t){return t.K_||(t.K_=function(n,r,s){const i=re(n);return i.w_(),new pP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:xP.bind(null,t),Ro:wP.bind(null,t),mo:_P.bind(null,t),d_:bP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xm(t)?vm(t):t.q_.set("Unknown")):(await t.K_.stop(),eE(t))})),t.K_}function is(t){return t.U_||(t.U_=function(n,r,s){const i=re(n);return i.w_(),new mP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:TP.bind(null,t),mo:kP.bind(null,t),f_:IP.bind(null,t),g_:SP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Fu(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new wm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _m(t,e){if(vr("AsyncQueue",`${e}: ${t}`),Qa(t))return new H(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=qo(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.W_=new De(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ki{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ki(e,n,ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class jP{constructor(){this.queries=pv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=pv(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(V.ABORTED,"Firestore shutting down"))}}function pv(){return new io(t=>Tb(t),Ru)}async function sE(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new AP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=_m(o,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&bm(n)}async function iE(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PP(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&bm(n)}function RP(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function bm(t){t.Y_.forEach(e=>{e.next()})}var Ff,mv;(mv=Ff||(Ff={})).ea="default",mv.Cache="cache";class oE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.key=e}}class lE{constructor(e){this.key=e}}class DP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ae(),this.mutatedKeys=ae(),this.Aa=Ib(e),this.Ra=new ki(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),v=Du(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;g&&v?g.data.isEqual(v.data)?E!==S&&(r.track({type:3,doc:v}),k=!0):this.ga(g,v)||(r.track({type:2,doc:v}),k=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(l=!0)):!g&&v?(r.track({type:0,doc:v}),k=!0):g&&!v&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(l=!0)),k&&(v?(o=o.add(v),i=S?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(v,E){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return S(v)-S(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ki(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new lE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new aE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ki.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OP{constructor(e){this.key=e,this.va=!1}}class MP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new io(l=>Tb(l),Ru),this.Ma=new Map,this.xa=new Set,this.Oa=new De(Y.comparator),this.Na=new Map,this.La=new fm,this.Ba={},this.ka=new Map,this.qa=Gi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function VP(t,e,n=!0){const r=pE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await cE(r,e,n,!0),s}async function UP(t,e){const n=pE(t);await cE(n,e,!0,!1)}async function cE(t,e,n,r){const s=await aP(t.localStore,On(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await FP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jb(t.remoteStore,s),l}async function FP(t,e,n,r,s){t.Ka=(p,g,v)=>async function(S,k,x,y){let b=k.view.ma(x);b.ns&&(b=await cv(S.localStore,k.query,!1).then(({documents:N})=>k.view.ma(N,b)));const P=y&&y.targetChanges.get(k.targetId),O=y&&y.targetMismatches.get(k.targetId)!=null,M=k.view.applyChanges(b,S.isPrimaryClient,P,O);return yv(S,k.targetId,M.wa),M.snapshot}(t,p,g,v);const i=await cv(t.localStore,e,!0),o=new DP(e,i.Ts),l=o.ma(i.documents),u=Xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);yv(t,n,d.wa);const h=new LP(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function $P(t,e,n){const r=re(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ru(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Uf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gm(r.remoteStore,s.targetId),$f(r,s.targetId)}).catch(Ka)):($f(r,s.targetId),await Uf(r.localStore,s.targetId,!0))}async function BP(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gm(n.remoteStore,r.targetId))}async function zP(t,e,n){const r=YP(t);try{const s=await function(o,l){const u=re(o),d=Qe.now(),h=l.reduce((v,E)=>v.add(E.key),ae());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let E=xr(),S=ae();return u.cs.getEntries(v,h).next(k=>{E=k,E.forEach((x,y)=>{y.isValidDocument()||(S=S.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,E)).next(k=>{p=k;const x=[];for(const y of l){const b=dj(y,p.get(y.key).overlayedDocument);b!=null&&x.push(new ds(y.key,b,yb(b.value.mapValue),ln.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,x,l)}).next(k=>{g=k;const x=k.applyToLocalDocumentSet(p,S);return u.documentOverlayCache.saveOverlays(v,k.batchId,x)})}).then(()=>({batchId:g.batchId,changes:kb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new De(me)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Za(r,s.changes),await Fu(r.remoteStore)}catch(s){const i=_m(s,"Failed to persist write");n.reject(i)}}async function uE(t,e){const n=re(t);try{const r=await sP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ve(o.va):s.removedDocuments.size>0&&(ve(o.va),o.va=!1))}),await Za(n,r,e)}catch(r){await Ka(r)}}function gv(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let d=!1;u.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&bm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qP(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new De(Y.comparator);o=o.insert(i,wt.newNoDocument(i,ne.min()));const l=ae().add(i),u=new Mu(ne.min(),new Map,new De(me),o,l);await uE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Em(r)}else await Uf(r.localStore,e,!1).then(()=>$f(r,e,n)).catch(Ka)}async function WP(t,e){const n=re(t),r=e.batch.batchId;try{const s=await rP(n.localStore,e);hE(n,r,null),dE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Za(n,s)}catch(s){await Ka(s)}}async function HP(t,e,n){const r=re(t);try{const s=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ve(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);hE(r,e,n),dE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Za(r,s)}catch(s){await Ka(s)}}function dE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function hE(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function $f(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||fE(t,r)})}function fE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Em(t))}function yv(t,e,n){for(const r of n)r instanceof aE?(t.La.addReference(r.key,e),GP(t,r)):r instanceof lE?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||fE(t,r.key)):te()}function GP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Em(t))}function Em(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new OP(n)),t.Oa=t.Oa.insert(n,r),Jb(t.remoteStore,new zr(On(am(n.path)),r,"TargetPurposeLimboResolution",tm.oe))}}async function Za(t,e,n){const r=re(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=mm.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const h=re(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>F.forEach(g.Ui,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!Qa(p))throw p;Q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const v=h.os.get(g),E=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(g,S)}}}(r.localStore,i))}async function KP(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await Kb(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Za(n,r.hs)}}function QP(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return ae().add(r.key);{let s=ae();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function pE(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qP.bind(null,e),e.Ca.d_=PP.bind(null,e.eventManager),e.Ca.$a=RP.bind(null,e.eventManager),e}function YP(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HP.bind(null,e),e}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return nP(this.persistence,new eP,e.initialUser,this.serializer)}Ga(e){return new Xj(pm.Zr,this.serializer)}Wa(e){return new cP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class Bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KP.bind(null,this.syncEngine),await CP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jP}()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),r=function(i){return new fP(i)}(e.databaseInfo);return function(i,o,l,u){return new gP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new vP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>gv(this.syncEngine,n,0),function(){return dv.D()?new dv:new uP}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,h){const p=new MP(s,i,o,l,u,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ja(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bf.provider={build:()=>new Bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=vt.UNAUTHENTICATED,this.clientId=pb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_m(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lh(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Kb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JP(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>hv(e.remoteStore,s)),t._onlineComponents=e}async function JP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),await lh(t,new Jc)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await lh(t,new Jc);return t._offlineComponents}async function gE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await vv(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await vv(t,new Bf))),t._onlineComponents}function ZP(t){return gE(t).then(e=>e.syncEngine)}async function yE(t){const e=await gE(t),n=e.eventManager;return n.onListen=VP.bind(null,e.syncEngine),n.onUnlisten=$P.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BP.bind(null,e.syncEngine),n}function eR(t,e,n={}){const r=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new mE({next:g=>{h.Za(),o.enqueueAndForget(()=>iE(i,p));const v=g.docs.has(l);!v&&g.fromCache?d.reject(new H(V.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new oE(am(l.path),h,{includeMetadataChanges:!0,_a:!0});return sE(i,p)}(await yE(t),t.asyncQueue,e,n,r)),r.promise}function tR(t,e,n={}){const r=new ur;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new mE({next:g=>{h.Za(),o.enqueueAndForget(()=>iE(i,p)),g.fromCache&&u.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new oE(l,h,{includeMetadataChanges:!0,_a:!0});return sE(i,p)}(await yE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(t,e,n){if(!n)throw new H(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nR(t,e,n,r){if(e===!0&&r===!0)throw new H(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wv(t){if(!Y.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _v(t){if(Y.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $u(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$u(t);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wA;switch(r.type){case"firstParty":return new NA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xv.get(n);r&&(Q("ComponentProvider","Removing Datastore"),xv.delete(n),r.terminate())}(this),Promise.resolve()}}function rR(t,e,n,r={}){var s;const i=(t=Tn(t,Bu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=vt.MOCK_USER;else{l=Z_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new vt(d)}t._authCredentials=new _A(new fb(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class At{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class es extends Js{constructor(e,n,r){super(e,n,am(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Y(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function dr(t,e,...n){if(t=fe(t),xE("collection","path",e),t instanceof Bu){const r=Ie.fromString(e,...n);return _v(r),new es(t,null,r)}{if(!(t instanceof At||t instanceof es))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return _v(r),new es(t.firestore,null,r)}}function Ae(t,e,...n){if(t=fe(t),arguments.length===1&&(e=pb.newId()),xE("doc","path",e),t instanceof Bu){const r=Ie.fromString(e,...n);return wv(r),new At(t,null,new Y(r))}{if(!(t instanceof At||t instanceof es))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return wv(r),new At(t.firestore,t instanceof es?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yb(this,"async_queue_retry"),this.Vu=()=>{const r=ah();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qa(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw vr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=wm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Zs extends Bu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ev,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ev(e),this._firestoreClient=void 0,await e}}}function wE(t,e){const n=typeof t=="object"?t:no(),r=typeof t=="string"?t:"(default)",s=Wn(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Yp("firestore");i&&rR(s,...i)}return s}function Nm(t){if(t._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sR(t),t._firestoreClient}function sR(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,h){return new MA(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new XP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qi(ut.fromBase64String(e))}catch(n){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qi(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=/^__.*__$/;class oR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ya(e,this.data,n,this.fieldTransforms)}}class aR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _E(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class qu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_E(this.Cu)&&iR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class lR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vu(e)}Qu(e,n,r,s=!1){return new qu({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(t){const e=t._freezeSettings(),n=Vu(t._databaseId);return new lR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Am("Data must be an object, but it was:",o,r);const l=EE(r,o);let u,d;if(i.merge)u=new sn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=TE(e,p,n);if(!o.contains(g))throw new H(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pR(h,g)||h.push(g)}u=new sn(h),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new oR(new Ht(l),u,d)}class Sm extends el{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}function cR(t,e,n){return new qu({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class km extends el{_toFieldTransform(e){return new Lb(e.path,new Oa)}isEqual(e){return e instanceof km}}class Cm extends el{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=cR(this,e,!0),r=this.Ku.map(i=>tl(i,n)),s=new Hi(r);return new Lb(e.path,s)}isEqual(e){return e instanceof Cm&&$i(this.Ku,e.Ku)}}function uR(t,e,n,r){const s=t.Qu(1,e,n);Am("Data must be an object, but it was:",s,r);const i=[],o=Ht.empty();Ys(r,(u,d)=>{const h=jm(e,u,n);d=fe(d);const p=s.Nu(h);if(d instanceof Sm)i.push(h);else{const g=tl(d,p);g!=null&&(i.push(h),o.set(h,g))}});const l=new sn(i);return new aR(o,l,s.fieldTransforms)}function dR(t,e,n,r,s,i){if(t.Qu(1,e,n),TE(e,r,n),i.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`)}function hR(t,e,n,r=!1){return tl(n,t.Qu(r?4:3,e))}function tl(t,e){if(NE(t=fe(t)))return Am("Unsupported field value:",e,t),EE(t,e);if(t instanceof el)return function(r,s){if(!_E(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=tl(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ij(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:Yc(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yc(s.serializer,i)}}if(r instanceof Tm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qi)return{bytesValue:$b(s.serializer,r._byteString)};if(r instanceof At){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Im)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return lm(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${$u(r)}`)}(t,e)}function EE(t,e){const n={};return mb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(t,(r,s)=>{const i=tl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function NE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Tm||t instanceof Qi||t instanceof At||t instanceof el||t instanceof Im)}function Am(t,e,n){if(!NE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$u(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function TE(t,e,n){if((e=fe(e))instanceof zu)return e._internalPath;if(typeof e=="string")return jm(t,e);throw Zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const fR=new RegExp("[~\\*/\\[\\]]");function jm(t,e,n){if(e.search(fR)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zu(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new H(V.INVALID_ARGUMENT,l+t+u)}function pR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mR extends IE{data(){return super.data()}}function Hu(t,e){return typeof e=="string"?jm(t,e):e instanceof zu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pm{}class SE extends Pm{}function xn(t,e,...n){let r=[];e instanceof Pm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Rm).length,l=i.filter(u=>u instanceof Gu).length;if(o>1||o>0&&l>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Gu extends SE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Gu(e,n,r)}_apply(e){const n=this._parse(e);return kE(e._query,n),new Js(e.firestore,e.converter,Rf(e._query,n))}_parse(e){const n=Wu(e.firestore);return function(i,o,l,u,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Tv(p,h);const v=[];for(const E of p)v.push(Nv(u,i,E));g={arrayValue:{values:v}}}else g=Nv(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Tv(p,h),g=hR(l,o,p,h==="in"||h==="not-in");return We.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(t,e,n){const r=e,s=Hu("where",t);return Gu._create(s,r,n)}class Rm extends Pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)kE(o,u),o=Rf(o,u)}(e._query,n),new Js(e.firestore,e.converter,Rf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dm extends SE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new La(i,o)}(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new so(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function yR(t,e="asc"){const n=e,r=Hu("orderBy",t);return Dm._create(r,n)}function Nv(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nb(e)&&n.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!Y.isDocumentKey(r))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return H0(t,new Y(r))}if(n instanceof At)return H0(t,n._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$u(n)}.`)}function Tv(t,e){if(!Array.isArray(t)||t.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vR{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ys(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Fe(o.doubleValue));return new Im(i)}convertGeoPoint(e){return new Tm(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=ss(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);ve(Gb(r));const s=new Ra(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||vr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AE extends IE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class fc extends AE{data(e={}){return super.data(e)}}class xR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ho(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fc(this._firestore,this._userDataWriter,r.key,r,new Ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new fc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new fc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:wR(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function wR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){t=Tn(t,At);const e=Tn(t.firestore,Zs);return eR(Nm(e),t._key).then(n=>bR(e,t,n))}class jE extends vR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function Vn(t){t=Tn(t,Js);const e=Tn(t.firestore,Zs),n=Nm(e),r=new jE(e);return gR(t._query),tR(n,t._query).then(s=>new xR(e,r,t,s))}function _R(t,e,n){t=Tn(t,At);const r=Tn(t.firestore,Zs),s=CE(t.converter,e);return Ku(r,[bE(Wu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ln.none())])}function wn(t,e,n,...r){t=Tn(t,At);const s=Tn(t.firestore,Zs),i=Wu(s);let o;return o=typeof(e=fe(e))=="string"||e instanceof zu?dR(i,"updateDoc",t._key,e,n,r):uR(i,"updateDoc",t._key,e),Ku(s,[o.toMutation(t._key,ln.exists(!0))])}function PE(t){return Ku(Tn(t.firestore,Zs),[new cm(t._key,ln.none())])}function Lm(t,e){const n=Tn(t.firestore,Zs),r=Ae(t),s=CE(t.converter,e);return Ku(n,[bE(Wu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}function Ku(t,e){return function(r,s){const i=new ur;return r.asyncQueue.enqueueAndForget(async()=>zP(await ZP(r),s,i)),i.promise}(Nm(t),e)}function bR(t,e,n){const r=n.docs.get(e._key),s=new jE(t);return new AE(t,s,e._key,r,new Ho(n.hasPendingWrites,n.fromCache),e.converter)}function on(){return new km("serverTimestamp")}function ER(...t){return new Cm("arrayUnion",t)}(function(e,n=!0){(function(s){ro=s})(Qs),zt(new Pt("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Zs(new bA(r.getProvider("auth-internal")),new IA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(d.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),et($0,"4.7.3",e),et($0,"4.7.3","esm2017")})();function Om(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function RE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NR=RE,DE=new us("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Au("@firebase/auth");function TR(t,...e){eu.logLevel<=le.WARN&&eu.warn(`Auth (${Qs}): ${t}`,...e)}function pc(t,...e){eu.logLevel<=le.ERROR&&eu.error(`Auth (${Qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,...e){throw Mm(t,...e)}function Un(t,...e){return Mm(t,...e)}function LE(t,e,n){const r=Object.assign(Object.assign({},NR()),{[e]:n});return new us("auth","Firebase",r).create(e,{appName:t.name})}function hr(t){return LE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DE.create(t,...e)}function ee(t,e,...n){if(!t)throw Mm(e,...n)}function ir(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function wr(t,e){t||ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OE(){return Iv()==="http:"||Iv()==="https:"}function Iv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OE()||eb()||"connection"in navigator)?navigator.onLine:!0}function SR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,wr(n>e,"Short delay should be less than long delay!"),this.isMobile=Qk()||Jk()}get(){return IR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e){wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new nl(3e4,6e4);function Hn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gn(t,e,n,r,s={}){return VE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ga(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return Xk()||(d.referrerPolicy="no-referrer"),ME.fetch()(UE(t,t.config.apiHost,n,l),d)})}async function VE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kR),e);try{const s=new jR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Hl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Hl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw LE(t,h,d);In(t,h)}}catch(s){if(s instanceof dn)throw s;In(t,"network-request-failed",{message:String(s)})}}async function rl(t,e,n,r,s={}){const i=await Gn(t,e,n,r,s);return"mfaPendingCredential"in i&&In(t,"multi-factor-auth-required",{_serverResponse:i}),i}function UE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Vm(t.config,s):`${t.config.apiScheme}://${s}`}function AR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Un(this.auth,"network-request-failed")),CR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Un(t,e,r);return s.customData._tokenResponse=n,s}function Sv(t){return t!==void 0&&t.enterprise!==void 0}class PR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function RR(t,e){return Gn(t,"GET","/v2/recaptchaConfig",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e){return Gn(t,"POST","/v1/accounts:delete",e)}async function FE(t,e){return Gn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LR(t,e=!1){const n=fe(t),r=await n.getIdToken(e),s=Um(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:la(ch(s.auth_time)),issuedAtTime:la(ch(s.iat)),expirationTime:la(ch(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ch(t){return Number(t)*1e3}function Um(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const s=Q_(n);return s?JSON.parse(s):(pc("Failed to decode base64 JWT payload"),null)}catch(s){return pc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kv(t){const e=Um(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dn&&OR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Va(t,FE(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?$E(i.providerUserInfo):[],l=UR(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new zf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function VR(t){const e=fe(t);await nu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $E(t){return t.map(e=>{var{providerId:n}=e,r=Om(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e){const n=await VE(t,{},async()=>{const r=Ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=UE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ME.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $R(t,e){return Gn(t,"POST","/v2/accounts:revokeToken",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await FR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ci;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ci,this.toJSON())}_performRefresh(){return ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class or{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Om(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Va(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LR(this,e)}reload(){return VR(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jn(this.auth.app))return Promise.reject(hr(this.auth));const e=await this.getIdToken();return await Va(this,DR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:P,isAnonymous:O,providerData:M,stsTokenManager:N}=n;ee(b&&N,e,"internal-error");const _=Ci.fromJSON(this.name,N);ee(typeof b=="string",e,"internal-error"),Sr(p,e.name),Sr(g,e.name),ee(typeof P=="boolean",e,"internal-error"),ee(typeof O=="boolean",e,"internal-error"),Sr(v,e.name),Sr(E,e.name),Sr(S,e.name),Sr(k,e.name),Sr(x,e.name),Sr(y,e.name);const I=new or({uid:b,auth:e,email:g,emailVerified:P,displayName:p,isAnonymous:O,photoURL:E,phoneNumber:v,tenantId:S,stsTokenManager:_,createdAt:x,lastLoginAt:y});return M&&Array.isArray(M)&&(I.providerData=M.map(C=>Object.assign({},C))),k&&(I._redirectEventId=k),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ci;s.updateFromServerResponse(n);const i=new or({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?$E(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ci;l.updateFromIdToken(r);const u=new or({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new zf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;function ar(t){wr(t instanceof Function,"Expected a class definition");let e=Cv.get(t);return e?(wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BE.type="NONE";const Av=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ai{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=mc(this.userKey,s.apiKey,i),this.fullPersistenceKey=mc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ai(ar(Av),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||ar(Av);const o=mc(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){const p=or._fromJSON(e,h);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ai(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ai(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KE(e))return"Blackberry";if(QE(e))return"Webos";if(qE(e))return"Safari";if((e.includes("chrome/")||WE(e))&&!e.includes("edge/"))return"Chrome";if(GE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zE(t=Et()){return/firefox\//i.test(t)}function qE(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WE(t=Et()){return/crios\//i.test(t)}function HE(t=Et()){return/iemobile/i.test(t)}function GE(t=Et()){return/android/i.test(t)}function KE(t=Et()){return/blackberry/i.test(t)}function QE(t=Et()){return/webos/i.test(t)}function Fm(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BR(t=Et()){var e;return Fm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zR(){return Zk()&&document.documentMode===10}function YE(t=Et()){return Fm(t)||GE(t)||QE(t)||KE(t)||/windows phone/i.test(t)||HE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t,e=[]){let n;switch(t){case"Browser":n=jv(Et());break;case"Worker":n=`${jv(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e={}){return Gn(t,"GET","/v2/passwordPolicy",Hn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=6;class GR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:HR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pv(this),this.idTokenSubscription=new Pv(this),this.beforeStateQueue=new qR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ar(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ai.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FE(this,{idToken:e}),r=await or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jn(this.app))return Promise.reject(hr(this));const n=e?fe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jn(this.app)?Promise.reject(hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jn(this.app)?Promise.reject(hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WR(this),n=new GR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new us("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $R(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ar(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Ai.create(this,[ar(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hs(t){return fe(t)}class Pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=iC(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QR(t){Qu=t}function JE(t){return Qu.loadJS(t)}function YR(){return Qu.recaptchaEnterpriseScript}function XR(){return Qu.gapiScript}function JR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ZR="recaptcha-enterprise",e2="NO_RECAPTCHA";class t2{constructor(e){this.type=ZR,this.auth=hs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{RR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new PR(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Sv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(e2)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Sv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=YR();u.length!==0&&(u+=l),JE(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Rv(t,e,n,r=!1){const s=new t2(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ru(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Rv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Rv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t,e){const n=Wn(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($i(i,e??{}))return s;In(s,"already-initialized")}return n.initialize({options:e})}function r2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ar);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function s2(t,e,n){const r=hs(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ZE(e),{host:o,port:l}=i2(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),o2()}function ZE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i2(t){const e=ZE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Dv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Dv(o)}}}function Dv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}}async function a2(t,e){return Gn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){return rl(t,"POST","/v1/accounts:signInWithPassword",Hn(t,e))}async function c2(t,e){return Gn(t,"POST","/v1/accounts:sendOobCode",Hn(t,e))}async function u2(t,e){return c2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,e))}async function h2(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends $m{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ua(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ua(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,n,"signInWithPassword",l2);case"emailLink":return d2(e,{email:this._email,oobCode:this._password});default:In(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ru(e,r,"signUpPassword",a2);case"emailLink":return h2(e,{idToken:n,email:this._email,oobCode:this._password});default:In(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e){return rl(t,"POST","/v1/accounts:signInWithIdp",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="http://localhost";class $s extends $m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):In("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Om(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new $s(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ji(e,n)}buildRequest(){const e={requestUri:f2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ga(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m2(t){const e=$o(Bo(t)).link,n=e?$o(Bo(e)).deep_link_id:null,r=$o(Bo(t)).deep_link_id;return(r?$o(Bo(r)).link:null)||r||n||e||t}class Bm{constructor(e){var n,r,s,i,o,l;const u=$o(Bo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=p2((s=u.mode)!==null&&s!==void 0?s:null);ee(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=m2(e);try{return new Bm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Ua._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Bm.parseLink(n);return ee(r,"argument-error"),Ua._fromEmailAndCode(e,r.code,r.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends eN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends sl{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends sl{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends sl{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mr.credential(n,r)}catch{return null}}}Mr.TWITTER_SIGN_IN_METHOD="twitter.com";Mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e){return rl(t,"POST","/v1/accounts:signUp",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await or._fromIdTokenResponse(e,r,s),o=Lv(r);return new Bs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Lv(r);return new Bs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends dn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new su(e,n,r,s)}}function tN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(t,i,e,r):i})}async function y2(t,e,n=!1){const r=await Va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t,e,n=!1){const{auth:r}=t;if(jn(r.app))return Promise.reject(hr(r));const s="reauthenticate";try{const i=await Va(t,tN(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=Um(i.idToken);ee(o,r,"internal-error");const{sub:l}=o;return ee(t.uid===l,r,"user-mismatch"),Bs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&In(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e,n=!1){if(jn(t.app))return Promise.reject(hr(t));const r="signIn",s=await tN(t,r,e),i=await Bs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function x2(t,e){return nN(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t){const e=hs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function w2(t,e,n){const r=hs(t);await ru(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",u2)}async function _2(t,e,n){if(jn(t.app))return Promise.reject(hr(t));const r=hs(t),o=await ru(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&rN(t),u}),l=await Bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function b2(t,e,n){return jn(t.app)?Promise.reject(hr(t)):x2(fe(t),ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rN(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e){return Gn(t,"POST","/v1/accounts:createAuthUri",Hn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e){const n=OE()?tu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await E2(fe(t),r);return s||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){return fe(t).setPersistence(e)}function I2(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function S2(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function k2(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}function C2(t){return fe(t).signOut()}async function Ov(t){return fe(t).delete()}const iu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(iu,"1"),this.storage.removeItem(iu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1e3,j2=10;class iN extends sN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);zR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,j2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},A2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iN.type="LOCAL";const oN=iN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN extends sN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}aN.type="SESSION";const lN=aN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await P2(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=zm("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function D2(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function L2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M2(){return cN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firebaseLocalStorageDb",V2=1,ou="firebaseLocalStorage",dN="fbase_key";class il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xu(t,e){return t.transaction([ou],e?"readwrite":"readonly").objectStore(ou)}function U2(){const t=indexedDB.deleteDatabase(uN);return new il(t).toPromise()}function qf(){const t=indexedDB.open(uN,V2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ou,{keyPath:dN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ou)?e(r):(r.close(),await U2(),e(await qf()))})})}async function Mv(t,e,n){const r=Xu(t,!0).put({[dN]:e,value:n});return new il(r).toPromise()}async function F2(t,e){const n=Xu(t,!1).get(e),r=await new il(n).toPromise();return r===void 0?null:r.value}function Vv(t,e){const n=Xu(t,!0).delete(e);return new il(n).toPromise()}const $2=800,B2=3;class hN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>B2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yu._getInstance(M2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await L2(),!this.activeServiceWorker)return;this.sender=new R2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qf();return await Mv(e,iu,"1"),await Vv(e,iu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>F2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Xu(s,!1).getAll();return new il(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hN.type="LOCAL";const z2=hN;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t,e){return e?ar(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends $m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function W2(t){return nN(t.auth,new qm(t),t.bypassAuthState)}function H2(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),v2(n,new qm(t),t.bypassAuthState)}async function G2(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),y2(n,new qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return W2;case"linkViaPopup":case"linkViaRedirect":return G2;case"reauthViaPopup":case"reauthViaRedirect":return H2;default:In(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new nl(2e3,1e4);class wi extends fN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,wi.currentPopupAction&&wi.currentPopupAction.cancel(),wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const e=zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K2.get())};e()}}wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="pendingRedirect",gc=new Map;class Y2 extends fN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const r=await X2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X2(t,e){const n=e4(e),r=Z2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function J2(t,e){gc.set(t._key(),e)}function Z2(t){return ar(t._redirectPersistence)}function e4(t){return mc(Q2,t.config.apiKey,t.name)}async function t4(t,e,n=!1){if(jn(t.app))return Promise.reject(hr(t));const r=hs(t),s=q2(r,e),o=await new Y2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=10*60*1e3;class r4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uv(e))}saveEventToCache(e){this.cachedEventUids.add(Uv(e)),this.lastProcessedEventTime=Date.now()}}function Uv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function s4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e={}){return Gn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a4=/^https?/;async function l4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await i4(t);for(const n of e)try{if(c4(n))return}catch{}In(t,"unauthorized-domain")}function c4(t){const e=tu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!a4.test(n))return!1;if(o4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=new nl(3e4,6e4);function Fv(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function d4(t){return new Promise((e,n)=>{var r,s,i;function o(){Fv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fv(),n(Un(t,"network-request-failed"))},timeout:u4.get()})}if(!((s=(r=Fn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Fn().gapi)===null||i===void 0)&&i.load)o();else{const l=JR("iframefcb");return Fn()[l]=()=>{gapi.load?o():n(Un(t,"network-request-failed"))},JE(`${XR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw yc=null,e})}let yc=null;function h4(t){return yc=yc||d4(t),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=new nl(5e3,15e3),p4="__/auth/iframe",m4="emulator/auth/iframe",g4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v4(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Vm(e,m4):`https://${t.config.authDomain}/${p4}`,r={apiKey:e.apiKey,appName:t.name,v:Qs},s=y4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ga(r).slice(1)}`}async function x4(t){const e=await h4(t),n=Fn().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:v4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:g4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Un(t,"network-request-failed"),l=Fn().setTimeout(()=>{i(o)},f4.get());function u(){Fn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_4=500,b4=600,E4="_blank",N4="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T4(t,e,n,r=_4,s=b4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},w4),{width:r.toString(),height:s.toString(),top:i,left:o}),d=Et().toLowerCase();n&&(l=WE(d)?E4:n),zE(d)&&(e=e||N4,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[v,E])=>`${g}${v}=${E},`,"");if(BR(d)&&l!=="_self")return I4(e||"",l),new $v(null);const p=window.open(e||"",l,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new $v(p)}function I4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="__/auth/handler",k4="emulator/auth/handler",C4=encodeURIComponent("fac");async function Bv(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qs,eventId:s};if(e instanceof eN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof sl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${C4}=${encodeURIComponent(u)}`:"";return`${A4(t)}?${Ga(l).slice(1)}${d}`}function A4({config:t}){return t.emulator?Vm(t,k4):`https://${t.authDomain}/${S4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="webStorageSupport";class j4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lN,this._completeRedirectFn=t4,this._overrideRedirectResult=J2}async _openPopup(e,n,r,s){var i;wr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Bv(e,n,r,tu(),s);return T4(e,o,zm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Bv(e,n,r,tu(),s);return D2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await x4(e),r=new r4(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(uh,{type:uh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[uh];o!==void 0&&n(!!o),In(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=l4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return YE()||qE()||Fm()}}const P4=j4;var zv="@firebase/auth",qv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function L4(t){zt(new Pt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XE(t)},d=new KR(r,s,i,u);return r2(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zt(new Pt("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(r=>new R4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),et(zv,qv,D4(t)),et(zv,qv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=5*60,M4=J_("authIdTokenMaxAge")||O4;let Wv=null;const V4=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>M4)return;const s=n==null?void 0:n.token;Wv!==s&&(Wv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function U4(t=no()){const e=Wn(t,"auth");if(e.isInitialized())return e.getImmediate();const n=n2(t,{popupRedirectResolver:P4,persistence:[z2,oN,lN]}),r=J_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=V4(i.toString());S2(n,o,()=>o(n.currentUser)),I2(n,l=>o(l))}}const s=Y_("auth");return s&&s2(n,`http://${s}`),n}function F4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}QR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",F4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});L4("Browser");const mN="@firebase/installations",Wm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=1e4,yN=`w:${Wm}`,vN="FIS_v2",$4="https://firebaseinstallations.googleapis.com/v1",B4=60*60*1e3,z4="installations",q4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zs=new us(z4,q4,W4);function xN(t){return t instanceof dn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN({projectId:t}){return`${$4}/projects/${t}/installations`}function _N(t){return{token:t.token,requestStatus:2,expiresIn:G4(t.expiresIn),creationTime:Date.now()}}async function bN(t,e){const r=(await e.json()).error;return zs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function EN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function H4(t,{refreshToken:e}){const n=EN(t);return n.append("Authorization",K4(e)),n}async function NN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function G4(t){return Number(t.replace("s","000"))}function K4(t){return`${vN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=wN(t),s=EN(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:vN,appId:t.appId,sdkVersion:yN},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await NN(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:_N(d.authToken)}}else throw await bN("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=/^[cdef][\w-]{21}$/,Wf="";function J4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Z4(t);return X4.test(n)?n:Wf}catch{return Wf}}function Z4(t){return Y4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new Map;function SN(t,e){const n=Ju(t);kN(n,e),eD(n,e)}function kN(t,e){const n=IN.get(t);if(n)for(const r of n)r(e)}function eD(t,e){const n=tD();n&&n.postMessage({key:t,fid:e}),nD()}let Ss=null;function tD(){return!Ss&&"BroadcastChannel"in self&&(Ss=new BroadcastChannel("[Firebase] FID Change"),Ss.onmessage=t=>{kN(t.data.key,t.data.fid)}),Ss}function nD(){IN.size===0&&Ss&&(Ss.close(),Ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="firebase-installations-database",sD=1,qs="firebase-installations-store";let dh=null;function Hm(){return dh||(dh=ju(rD,sD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qs)}}})),dh}async function au(t,e){const n=Ju(t),s=(await Hm()).transaction(qs,"readwrite"),i=s.objectStore(qs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&SN(t,e.fid),e}async function CN(t){const e=Ju(t),r=(await Hm()).transaction(qs,"readwrite");await r.objectStore(qs).delete(e),await r.done}async function Zu(t,e){const n=Ju(t),s=(await Hm()).transaction(qs,"readwrite"),i=s.objectStore(qs),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&SN(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gm(t){let e;const n=await Zu(t.appConfig,r=>{const s=iD(r),i=oD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Wf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function iD(t){const e=t||{fid:J4(),registrationStatus:0};return AN(e)}function oD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(zs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:lD(t)}:{installationEntry:e}}async function aD(t,e){try{const n=await Q4(t,e);return au(t.appConfig,n)}catch(n){throw xN(n)&&n.customData.serverCode===409?await CN(t.appConfig):await au(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function lD(t){let e=await Hv(t.appConfig);for(;e.registrationStatus===1;)await TN(100),e=await Hv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Gm(t);return r||n}return e}function Hv(t){return Zu(t,e=>{if(!e)throw zs.create("installation-not-found");return AN(e)})}function AN(t){return cD(t)?{fid:t.fid,registrationStatus:0}:t}function cD(t){return t.registrationStatus===1&&t.registrationTime+gN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD({appConfig:t,heartbeatServiceProvider:e},n){const r=dD(t,n),s=H4(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:yN,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await NN(()=>fetch(r,l));if(u.ok){const d=await u.json();return _N(d)}else throw await bN("Generate Auth Token",u)}function dD(t,{fid:e}){return`${wN(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Km(t,e=!1){let n;const r=await Zu(t.appConfig,i=>{if(!jN(i))throw zs.create("not-registered");const o=i.authToken;if(!e&&pD(o))return i;if(o.requestStatus===1)return n=hD(t,e),i;{if(!navigator.onLine)throw zs.create("app-offline");const l=gD(i);return n=fD(t,l),l}});return n?await n:r.authToken}async function hD(t,e){let n=await Gv(t.appConfig);for(;n.authToken.requestStatus===1;)await TN(100),n=await Gv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Km(t,e):r}function Gv(t){return Zu(t,e=>{if(!jN(e))throw zs.create("not-registered");const n=e.authToken;return yD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fD(t,e){try{const n=await uD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await au(t.appConfig,r),n}catch(n){if(xN(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await CN(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await au(t.appConfig,r)}throw n}}function jN(t){return t!==void 0&&t.registrationStatus===2}function pD(t){return t.requestStatus===2&&!mD(t)}function mD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+B4}function gD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yD(t){return t.requestStatus===1&&t.requestTime+gN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(t){const e=t,{installationEntry:n,registrationPromise:r}=await Gm(e);return r?r.catch(console.error):Km(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e=!1){const n=t;return await wD(n),(await Km(n,e)).token}async function wD(t){const{registrationPromise:e}=await Gm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){if(!t||!t.options)throw hh("App Configuration");if(!t.name)throw hh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function hh(t){return zs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="installations",bD="installations-internal",ED=t=>{const e=t.getProvider("app").getImmediate(),n=_D(e),r=Wn(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ND=t=>{const e=t.getProvider("app").getImmediate(),n=Wn(e,PN).getImmediate();return{getId:()=>vD(n),getToken:s=>xD(n,s)}};function TD(){zt(new Pt(PN,ED,"PUBLIC")),zt(new Pt(bD,ND,"PRIVATE"))}TD();et(mN,Wm);et(mN,Wm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu="analytics",ID="firebase_id",SD="origin",kD=60*1e3,CD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=new Au("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Yt=new us("analytics","Analytics",AD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){if(!t.startsWith(Qm)){const e=Yt.create("invalid-gtag-resource",{gtagURL:t});return jt.warn(e.message),""}return t}function RN(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function PD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function RD(t,e){const n=PD("firebase-js-sdk-policy",{createScriptURL:jD}),r=document.createElement("script"),s=`${Qm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function DD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function LD(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const u=(await RN(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(l){jt.error(l)}t("config",s,i)}async function OD(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await RN(n);for(const u of o){const d=l.find(p=>p.measurementId===u),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){jt.error(i)}}function MD(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,u]=o;await OD(t,e,n,l,u)}else if(i==="config"){const[l,u]=o;await LD(t,e,n,r,l,u)}else if(i==="consent"){const[l,u]=o;t("consent",l,u)}else if(i==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){jt.error(l)}}return s}function VD(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=MD(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function UD(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Qm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=30,$D=1e3;class BD{constructor(e={},n=$D){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const DN=new BD;function zD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qD(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:zD(r)},i=CD.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Yt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function WD(t,e=DN,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Yt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Yt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new KD;return setTimeout(async()=>{l.abort()},kD),LN({appId:r,apiKey:s,measurementId:i},o,l,e)}async function LN(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=DN){var i;const{appId:o,measurementId:l}=t;try{await HD(r,e)}catch(u){if(l)return jt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await qD(t);return s.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!GD(d)){if(s.deleteThrottleMetadata(o),l)return jt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const h=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?j0(n,s.intervalMillis,FD):j0(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,p),jt.debug(`Calling attemptFetch again in ${h} millis`),LN(t,p,r,s)}}function HD(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Yt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function GD(t){if(!(t instanceof dn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class KD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function QD(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}async function YD(t,e,n,r){{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(){if(Xp())try{await Jp()}catch(t){return jt.warn(Yt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return jt.warn(Yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function JD(t,e,n,r,s,i,o){var l;const u=WD(t);u.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&jt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>jt.error(v)),e.push(u);const d=XD().then(v=>{if(v)return r.getId()}),[h,p]=await Promise.all([u,d]);UD(i)||RD(i,h.measurementId),s("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[SD]="firebase",g.update=!0,p!=null&&(g[ID]=p),s("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZD=class{constructor(e){this.app=e}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}},Pi={},Kv=[];const Qv={};let fh="dataLayer",eL="gtag",Yv,Ym,Xv=!1;function tL(){const t=[];if(eb()&&t.push("This is a browser extension environment."),tb()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Yt.create("invalid-analytics-context",{errorInfo:e});jt.warn(n.message)}}function nL(t,e,n){tL();const r=t.options.appId;if(!r)throw Yt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)jt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Yt.create("no-api-key");if(Pi[r]!=null)throw Yt.create("already-exists",{id:r});if(!Xv){DD(fh);const{wrappedGtag:i,gtagCore:o}=VD(Pi,Kv,Qv,fh,eL);Ym=i,Yv=o,Xv=!0}return Pi[r]=JD(t,Kv,Qv,e,Yv,fh,n),new ZD(t)}function rL(t=no()){t=fe(t);const e=Wn(t,lu);return e.isInitialized()?e.getImmediate():sL(t)}function sL(t,e={}){const n=Wn(t,lu);if(n.isInitialized()){const s=n.getImmediate();if($i(e,n.getOptions()))return s;throw Yt.create("already-initialized")}return n.initialize({options:e})}function iL(t,e,n){t=fe(t),YD(Ym,Pi[t.app.options.appId],e).catch(r=>jt.error(r))}function ON(t,e,n,r){t=fe(t),QD(Ym,Pi[t.app.options.appId],e,n,r).catch(s=>jt.error(s))}const Jv="@firebase/analytics",Zv="0.10.8";function oL(){zt(new Pt(lu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return nL(r,s,n)},"PUBLIC")),zt(new Pt("analytics-internal",t,"PRIVATE")),et(Jv,Zv),et(Jv,Zv,"esm2017");function t(e){try{const n=e.getProvider(lu).getImmediate();return{logEvent:(r,s,i)=>ON(n,r,s,i)}}catch(n){throw Yt.create("interop-component-reg-failed",{reason:n})}}}oL();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="firebasestorage.googleapis.com",VN="storageBucket",aL=2*60*1e3,lL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue extends dn{constructor(e,n,r=0){super(ph(e),`Firebase Storage: ${n} (${ph(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ue.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ph(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ve;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ve||(Ve={}));function ph(t){return"storage/"+t}function Xm(){const t="An unknown error occurred, please check the error payload for server response.";return new Ue(Ve.UNKNOWN,t)}function cL(t){return new Ue(Ve.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function uL(t){return new Ue(Ve.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ue(Ve.UNAUTHENTICATED,t)}function hL(){return new Ue(Ve.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fL(t){return new Ue(Ve.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pL(){return new Ue(Ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mL(){return new Ue(Ve.CANCELED,"User canceled the upload/download.")}function gL(t){return new Ue(Ve.INVALID_URL,"Invalid URL '"+t+"'.")}function yL(t){return new Ue(Ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vL(){return new Ue(Ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VN+"' property when initializing the app?")}function xL(){return new Ue(Ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wL(){return new Ue(Ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _L(t){return new Ue(Ve.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hf(t){return new Ue(Ve.INVALID_ARGUMENT,t)}function UN(){return new Ue(Ve.APP_DELETED,"The Firebase app was deleted.")}function bL(t){return new Ue(Ve.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ca(t,e){return new Ue(Ve.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ro(t){throw new Ue(Ve.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Kt.makeFromUrl(e,n)}catch{return new Kt(e,"")}if(r.path==="")return r;throw yL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${s}/o${g}`,"i"),E={bucket:1,path:3},S=n===MN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",x=new RegExp(`^https?://${S}/${s}/${k}`,"i"),b=[{regex:l,indices:u,postModify:i},{regex:v,indices:E,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<b.length;P++){const O=b[P],M=O.regex.exec(e);if(M){const N=M[O.indices.bucket];let _=M[O.indices.path];_||(_=""),r=new Kt(N,_),O.postModify(r);break}}if(r==null)throw gL(e);return r}}class EL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function p(k){s=setTimeout(()=>{s=null,t(v,u())},k)}function g(){i&&clearTimeout(i)}function v(k,...x){if(d){g();return}if(k){g(),h.call(null,k,...x);return}if(u()||o){g(),h.call(null,k,...x);return}r<64&&(r*=2);let b;l===1?(l=2,b=0):b=(r+Math.random())*1e3,p(b)}let E=!1;function S(k){E||(E=!0,g(),!d&&(s!==null?(k||(l=2),clearTimeout(s),p(0)):k||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,S(!0)},n),S}function TL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){return t!==void 0}function SL(t){return typeof t=="object"&&!Array.isArray(t)}function Jm(t){return typeof t=="string"||t instanceof String}function ex(t){return Zm()&&t instanceof Blob}function Zm(){return typeof Blob<"u"}function tx(t,e,n,r){if(r<e)throw Hf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function FN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ps;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ps||(Ps={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,r,s,i,o,l,u,d,h,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,E)=>{this.resolve_=v,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Ps.NO_ERROR,u=i.getStatus();if(!l||kL(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Ps.ABORT;r(!1,new Gl(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Gl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());IL(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=Xm();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?UN():mL();o(u)}else{const u=pL();o(u)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=NL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function AL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DL(t,e,n,r,s,i,o=!0){const l=FN(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return PL(d,e),AL(d,n),jL(d,i),RL(d,r),new CL(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OL(...t){const e=LL();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zm())return new Blob(t);throw new Ue(Ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ML(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){if(typeof atob>"u")throw _L("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mh{constructor(e,n){this.data=e,this.contentType=n||null}}function UL(t,e){switch(t){case Pn.RAW:return new mh($N(e));case Pn.BASE64:case Pn.BASE64URL:return new mh(BN(t,e));case Pn.DATA_URL:return new mh($L(e),BL(e))}throw Xm()}function $N(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function FL(t){let e;try{e=decodeURIComponent(t)}catch{throw ca(Pn.DATA_URL,"Malformed data URL.")}return $N(e)}function BN(t,e){switch(t){case Pn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ca(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Pn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ca(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VL(e)}catch(s){throw s.message.includes("polyfill")?s:ca(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class zN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ca(Pn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $L(t){const e=new zN(t);return e.base64?BN(Pn.BASE64,e.rest):FL(e.rest)}function BL(t){return new zN(t).contentType}function zL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n){let r=0,s="";ex(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(ex(this.data_)){const r=this.data_,s=ML(r,e,n);return s===null?null:new Vr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Vr(r,!0)}}static getBlob(...e){if(Zm()){const n=e.map(r=>r instanceof Vr?r.data_:r);return new Vr(OL.apply(null,n))}else{const n=e.map(o=>Jm(o)?UL(Pn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Vr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t){let e;try{e=JSON.parse(t)}catch{return null}return SL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function WL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function WN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t,e){return e}class It{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||HL}}let Kl=null;function GL(t){return!Jm(t)||t.length<2?t:WN(t)}function HN(){if(Kl)return Kl;const t=[];t.push(new It("bucket")),t.push(new It("generation")),t.push(new It("metageneration")),t.push(new It("name","fullPath",!0));function e(i,o){return GL(o)}const n=new It("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new It("size");return s.xform=r,t.push(s),t.push(new It("timeCreated")),t.push(new It("updated")),t.push(new It("md5Hash",null,!0)),t.push(new It("cacheControl",null,!0)),t.push(new It("contentDisposition",null,!0)),t.push(new It("contentEncoding",null,!0)),t.push(new It("contentLanguage",null,!0)),t.push(new It("contentType",null,!0)),t.push(new It("metadata","customMetadata",!0)),Kl=t,Kl}function KL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Kt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function QL(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return KL(r,t),r}function GN(t,e,n){const r=qN(e);return r===null?null:QL(t,r,n)}function YL(t,e,n,r){const s=qN(e);if(s===null||!Jm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,p=t.fullPath,g="/b/"+o(h)+"/o/"+o(p),v=ed(g,n,r),E=FN({alt:"media",token:d});return v+E})[0]}function XL(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class eg{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){if(!t)throw Xm()}function JL(t,e){function n(r,s){const i=GN(t,s,e);return KN(i!==null),i}return n}function ZL(t,e){function n(r,s){const i=GN(t,s,e);return KN(i!==null),YL(i,s,t.host,t._protocol)}return n}function QN(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=hL():s=dL():n.getStatus()===402?s=uL(t.bucket):n.getStatus()===403?s=fL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function YN(t){const e=QN(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=cL(t.path)),i.serverResponse=s.serverResponse,i}return n}function eO(t,e,n){const r=e.fullServerUrl(),s=ed(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new eg(s,i,ZL(t,n),o);return l.errorHandler=YN(e),l}function tO(t,e){const n=e.fullServerUrl(),r=ed(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const l=new eg(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=YN(e),l}function nO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function rO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=nO(null,e)),r}function sO(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let b="";for(let P=0;P<2;P++)b=b+Math.random().toString().slice(2);return b}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=rO(e,r,s),h=XL(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",v=Vr.getBlob(p,r,g);if(v===null)throw xL();const E={name:d.fullPath},S=ed(i,t.host,t._protocol),k="POST",x=t.maxUploadRetryTime,y=new eg(S,k,JL(t,n),x);return y.urlParams=E,y.headers=o,y.body=v.uploadData(),y.errorHandler=QN(e),y}class iO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ps.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ps.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ps.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Ro("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ro("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ro("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ro("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ro("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class oO extends iO{initXhr(){this.xhr_.responseType="text"}}function tg(){return new oO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this._service=e,n instanceof Kt?this._location=n:this._location=Kt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ws(e,n)}get root(){const e=new Kt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WN(this._location.path)}get storage(){return this._service}get parent(){const e=qL(this._location.path);if(e===null)return null;const n=new Kt(this._location.bucket,e);return new Ws(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bL(e)}}function aO(t,e,n){t._throwIfRoot("uploadBytes");const r=sO(t.storage,t._location,HN(),new Vr(e,!0),n);return t.storage.makeRequestWithTokens(r,tg).then(s=>({metadata:s,ref:t}))}function lO(t){t._throwIfRoot("getDownloadURL");const e=eO(t.storage,t._location,HN());return t.storage.makeRequestWithTokens(e,tg).then(n=>{if(n===null)throw wL();return n})}function cO(t){t._throwIfRoot("deleteObject");const e=tO(t.storage,t._location);return t.storage.makeRequestWithTokens(e,tg)}function uO(t,e){const n=WL(t._location.path,e),r=new Kt(t._location.bucket,n);return new Ws(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){return/^[A-Za-z]+:\/\//.test(t)}function hO(t,e){return new Ws(t,e)}function XN(t,e){if(t instanceof ng){const n=t;if(n._bucket==null)throw vL();const r=new Ws(n,n._bucket);return e!=null?XN(r,e):r}else return e!==void 0?uO(t,e):t}function fO(t,e){if(e&&dO(e)){if(t instanceof ng)return hO(t,e);throw Hf("To use ref(service, url), the first argument must be a Storage instance.")}else return XN(t,e)}function nx(t,e){const n=e==null?void 0:e[VN];return n==null?null:Kt.makeFromBucketSpec(n,t)}function pO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Z_(s,t.app.options.projectId))}class ng{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=MN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aL,this._maxUploadRetryTime=lL,this._requests=new Set,s!=null?this._bucket=Kt.makeFromBucketSpec(s,this._host):this._bucket=nx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kt.makeFromBucketSpec(this._url,e):this._bucket=nx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ws(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new EL(UN());{const o=DL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const rx="@firebase/storage",sx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="storage";function ix(t,e,n){return t=fe(t),aO(t,e,n)}function gh(t){return t=fe(t),lO(t)}function mO(t){return t=fe(t),cO(t)}function Ql(t,e){return t=fe(t),fO(t,e)}function gO(t=no(),e){t=fe(t);const r=Wn(t,JN).getImmediate({identifier:e}),s=Yp("storage");return s&&yO(r,...s),r}function yO(t,e,n,r={}){pO(t,e,n,r)}function vO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ng(n,r,s,e,Qs)}function xO(){zt(new Pt(JN,vO,"PUBLIC").setMultipleInstances(!0)),et(rx,sx,""),et(rx,sx,"esm2017")}xO();const wO={apiKey:"AIzaSyD7VNKg6Gqam8qHZiHUpzgleVYbk8Gc9qU",authDomain:"bankroll-2ccb4.firebaseapp.com",databaseURL:"https://bankroll-2ccb4-default-rtdb.firebaseio.com",projectId:"bankroll-2ccb4",storageBucket:"bankroll-2ccb4.firebasestorage.app",messagingSenderId:"443440711718",appId:"1:443440711718:web:dc3f58dfe81324edc3bee7",measurementId:"G-QZ2NEGJV6D"};let ws=null,ie=null,Oe=null,_i=null,rt=null;try{console.log("Initializing Firebase app..."),ws=sb(wO),console.log("Firebase app initialized successfully"),console.log("Initializing Firestore..."),ie=wE(ws),console.log("Firestore initialized successfully"),console.log("Initializing Auth..."),Oe=U4(ws),console.log("Auth initialized successfully"),console.log("Initializing Storage..."),rt=gO(ws),console.log("Storage initialized successfully"),console.log("Initializing Analytics..."),typeof window<"u"?(_i=rL(ws),console.log("Analytics initialized successfully")):console.log("Analytics skipped - not in browser environment")}catch(t){console.error("Firebase initialization error:",t),console.error("Error details:",{code:t.code,message:t.message,stack:t.stack}),ws||console.error("Failed to initialize Firebase app"),ie||console.error("Failed to initialize Firestore"),Oe||console.error("Failed to initialize Auth"),rt||console.error("Failed to initialize Storage"),!_i&&typeof window<"u"&&console.error("Failed to initialize Analytics")}var Ix;if(ie)try{const t=(Ix=ie._firestoreClient)==null?void 0:Ix.connectivityMonitor;t&&t.addCallback(e=>{console.log("Firestore connection state:",e?"CONNECTED":"DISCONNECTED")})}catch(t){console.error("Error setting up Firestore connection listener:",t)}rt?console.log("Storage bucket:",rt.app.options.storageBucket):console.error("Storage is not initialized");const yh=ws,Do=new Map;class kt{static async uploadProfileImage(e,n){var r,s;try{if(!rt)throw new Error("Firebase Storage is not initialized");if(!e||!n)throw new Error("File and user ID are required");const i=Date.now(),o=Math.random().toString(36).substring(2,15),l=e.name.split(".").pop(),u=`${i}-${o}.${l}`,d=Ql(rt,`profile-images/${n}/${u}`),h={contentType:e.type,customMetadata:{userId:n,uploadedAt:new Date().toISOString()},cacheControl:"public,max-age=31536000"};console.log("Uploading file...");const p=await ix(d,e,h);if(!p)throw new Error("Upload failed - no snapshot returned");console.log("Getting download URL...");const g=await gh(p.ref);if(!g)throw new Error("Failed to get download URL");const v=`${g}?t=${i}`;return console.log("Upload complete. URL:",v),v}catch(i){throw console.error("Detailed error in uploadProfileImage:",{code:i.code,message:i.message,stack:i.stack,name:i.name,userId:n,fileName:e==null?void 0:e.name,storageBucket:(s=(r=rt==null?void 0:rt.app)==null?void 0:r.options)==null?void 0:s.storageBucket}),i.code==="storage/unauthorized"?new Error("Permission denied. Please check your authentication."):i.code==="storage/canceled"?new Error("Upload was canceled."):i.code==="storage/unknown"?new Error("An unknown error occurred. Please try again."):new Error(`Failed to upload image: ${i.message}`)}}static async getStaticAssetUrl(e,n){try{if(!rt)throw new Error("Firebase Storage is not initialized");const r=`${e}/${n}`;if(Do.has(r))return console.log("Using cached URL for:",r),Do.get(r);console.log("Fetching URL for:",r);const s=Ql(rt,`static/${e}/${n}`);let i=0;const o=3;let l;for(;i<o;)try{const u=await gh(s);return Do.set(r,u),console.log("Successfully fetched and cached URL for:",r),u}catch(u){l=u,i++,i<o&&await new Promise(d=>setTimeout(d,Math.pow(2,i)*1e3))}throw l}catch(r){throw console.error("Error getting static asset URL:",{category:e,filename:n,error:{code:r.code,message:r.message,stack:r.stack}}),rt||console.error("Storage not initialized. Current storage state:",rt),new Error(`Failed to get static asset URL: ${r.message}`)}}static async uploadStaticAsset(e,n,r){try{if(!rt)throw new Error("Firebase Storage is not initialized");if(!e||!n||!r)throw new Error("File, category, and filename are required");const s=Ql(rt,`static/${n}/${r}`),i={contentType:e.type,customMetadata:{category:n,uploadedAt:new Date().toISOString()},cacheControl:"public,max-age=31536000"};console.log("Uploading static asset...");const o=await ix(s,e,i);if(!o)throw new Error("Upload failed - no snapshot returned");console.log("Getting download URL...");const l=await gh(o.ref);if(!l)throw new Error("Failed to get download URL");const u=`${n}/${r}`;return Do.set(u,l),console.log("Static asset upload complete. URL:",l),l}catch(s){throw console.error("Detailed error in uploadStaticAsset:",{code:s.code,message:s.message,stack:s.stack,name:s.name,category:n,fileName:r}),new Error(`Failed to upload static asset: ${s.message}`)}}static async deleteProfileImage(e){try{if(!rt)throw new Error("Firebase Storage is not initialized");const n=e.split("?")[0];if(!n||!n.includes("firebasestorage.googleapis.com")){console.log("Invalid or non-Firebase URL, skipping deletion");return}try{const r=Ql(rt,n);await mO(r),console.log("Old profile image deleted successfully")}catch(r){if(r.code==="storage/object-not-found"){console.log("Old profile image not found, skipping deletion");return}throw r}}catch(n){console.error("Detailed error in deleteProfileImage:",{code:n.code,message:n.message,stack:n.stack,name:n.name,imageUrl:e}),console.warn("Failed to delete old profile image:",n.message)}}static clearCache(){Do.clear(),console.log("Storage URL cache cleared")}}const ZN=T.createContext(),Yl="/images/profile_1.jpeg";function _e(){return T.useContext(ZN)}const e1=T.memo(({children:t})=>{const[e,n]=T.useState(null),[r,s]=T.useState(!0),[i,o]=T.useState(!1),[l,u]=T.useState(null),d=T.useCallback(async(k,x)=>{if(!ie){console.warn("Firestore is not initialized (development mode)");return}try{console.log("Starting profile image update for user:",k);let y;x instanceof File?(console.log("Uploading new image file to Storage"),y=await kt.uploadProfileImage(x,k),console.log("Image uploaded successfully, URL:",y)):(console.log("Using provided image URL"),y=x);const b=Ae(ie,"users",k);await wn(b,{profileImage:y,lastUpdated:on()}),console.log("Firestore document updated with new image URL");const O=(await Bt(b)).data();return n(M=>({...M,...O,profileImage:y})),console.log("Local state updated with new user data"),y}catch(y){throw console.error("Error in updateProfileImage:",y),y}},[]),h=T.useCallback(async(k,x)=>{if(!Oe){console.warn("Auth is not initialized (development mode)");return}try{if((await N2(Oe,k)).length>0)throw new Error("Email is already in use");return u({email:k,password:x}),o(!0),!0}catch(y){throw console.error("Signup validation error:",y),y}},[]),p=T.useCallback(async k=>{var y;if(!ie||!l){console.warn("Firestore is not initialized or no signup data");return}let x=null;try{const b=["firstName","lastName","username","phoneNumber"];for(const C of b)if(!k[C])throw new Error(`${C} is required`);if(!k.username.startsWith("#"))throw new Error("Username must start with #");x=(await _2(Oe,l.email,l.password)).user;const O=xn(dr(ie,"users"),vn("username","==",k.username));if(!(await Vn(O)).empty)throw await Ov(x),new Error("Username is already taken");const N=k.sleeperUsername?k.sleeperUsername.startsWith("@")?k.sleeperUsername:`@${k.sleeperUsername}`:null,_=k.venmoUsername?k.venmoUsername.startsWith("@")?k.venmoUsername:`@${k.venmoUsername}`:null,I={id:x.uid,email:l.email,firstName:k.firstName,lastName:k.lastName,username:k.username,phoneNumbers:[{number:k.phoneNumber,verified:!1,primary:!0,dateAdded:new Date().toISOString()}],identifiers:{username:k.username,sleeperUsername:N,venmoUsername:_},profileImage:Yl,notificationPreferences:{inApp:!0,email:((y=k.notificationPreferences)==null?void 0:y.email)??!0,pushToken:null},notifications:[],dwollaCustomerId:"",dwollaBalance:0,bonusBalance:0,lastUpdated:on(),lastBalanceUpdate:on(),createdAt:on()};return console.log("Creating Firestore document for user:",I),await _R(Ae(ie,"users",x.uid),I),console.log("Firestore document created successfully"),o(!1),u(null),n({...x,...I}),I}catch(b){if(x)try{await Ov(x)}catch(P){console.error("Error cleaning up temporary user:",P)}throw console.error("Signup completion error:",b),b}},[l]),g=T.useCallback(async(k,x)=>{if(!Oe||!ie)return console.warn("Auth/Firestore is not initialized (development mode)"),null;try{await T2(Oe,oN),console.log("Auth persistence set to LOCAL");let y=k;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k)){console.log("Looking up user by username:",k);const N=dr(ie,"users"),_=xn(N,vn("username","==",k)),I=await Vn(_);if(I.empty)throw new Error("No user found with this username");y=I.docs[0].data().email,console.log("Found email for username:",y)}console.log("Attempting to sign in with email:",y);const O=await b2(Oe,y,x);console.log("Sign in successful, user ID:",O.user.uid);const M=await Bt(Ae(ie,"users",O.user.uid));if(M.exists()){const N=M.data();console.log("Fetched user data from Firestore:",N),n({...O.user,...N})}else console.warn("No Firestore document found for user:",O.user.uid),n(O.user);return O.user}catch(y){throw console.error("Login error:",y),y}},[]),v=T.useCallback(async()=>{if(!Oe){console.warn("Auth is not initialized (development mode)");return}try{await C2(Oe),n(null),o(!1),u(null),kt.clearCache(),console.log("User signed out successfully")}catch(k){throw console.error("Error in logout:",k),k}},[]),E=T.useCallback(async k=>{if(!Oe){console.warn("Auth is not initialized (development mode)");return}try{await w2(Oe,k)}catch(x){throw console.error("Error in password reset:",x),x}},[]);T.useEffect(()=>{if(!Oe){console.warn("Auth is not initialized (development mode)"),s(!1);return}return console.log("Setting up auth state change listener"),k2(Oe,async x=>{if(console.log("Auth state changed. User:",x?x.uid:"null"),x&&ie&&!i)try{console.log("Fetching additional user data from Firestore");const y=await Bt(Ae(ie,"users",x.uid));if(y.exists()){const b=y.data();console.log("User data fetched successfully:",b),n({...x,...b,profileImage:b.profileImage||Yl})}else console.warn("No Firestore document found for user:",x.uid),n({...x,profileImage:Yl})}catch(y){console.error("Error fetching user data:",y),n({...x,profileImage:Yl})}else i||(console.log("No user logged in or new user in signup process"),n(null));s(!1)})},[i]);const S={currentUser:e,validateSignupStep1:h,completeSignup:p,login:g,logout:v,resetPassword:E,updateProfileImage:d,loading:r,isNewUser:i};return a.jsx(ZN.Provider,{value:S,children:!r&&t})});e1.displayName="AuthProvider";const vh="https://api.sleeper.app/v1";class _O{async getUser(e){try{const n=await fetch(`${vh}/user/${e}`);if(!n.ok)throw new Error("User not found");return await n.json()}catch(n){throw n}}async getUserLeagues(e,n="2023",r="nfl"){try{const s=await fetch(`${vh}/user/${e}/leagues/${r}/${n}`);if(!s.ok)throw new Error("Failed to fetch leagues");return await s.json()}catch(s){throw s}}async getLeagueUsers(e){try{const n=await fetch(`${vh}/league/${e}/users`);if(!n.ok)throw new Error("Failed to fetch league users");return await n.json()}catch(n){throw n}}getAvatarUrl(e){return e?`https://sleepercdn.com/avatars/${e}`:null}getLeagueAvatarUrl(e){return e?`https://sleepercdn.com/avatars/${e}`:null}}const vc=new _O,t1=T.createContext(null);function n1(){const t=T.useContext(t1);if(!t)throw new Error("useSleeper must be used within a SleeperProvider");return t}function bO({children:t}){const[e,n]=T.useState([]),[r,s]=T.useState(null),[i,o]=T.useState(!0),[l,u]=T.useState(null),{currentUser:d}=_e(),h=async v=>{try{o(!0),u(null);const E=await vc.getUser(v);s(E);const S=await vc.getUserLeagues(E.user_id);return n(S),E}catch(E){throw console.error("Error fetching Sleeper user:",E),u("Failed to find Sleeper user"),E}finally{o(!1)}},p=()=>{s(null),n([])};T.useEffect(()=>{(async()=>{if(!d||!r){n([]),o(!1);return}try{u(null);const E=await vc.getUserLeagues(r.user_id);n(E)}catch(E){console.error("Error fetching Sleeper leagues:",E),u("Failed to load Sleeper leagues")}finally{o(!1)}})()},[d,r]);const g={leagues:e,user:r,loading:i,error:l,fetchUser:h,disconnectSleeper:p};return a.jsx(t1.Provider,{value:g,children:t})}class EO{constructor(){this.collection=dr(ie,"espn_leagues")}async createLeague(e){try{return{id:(await Lm(this.collection,{...e,createdAt:on(),updatedAt:on(),platform:"ESPN"})).id,...e,createdAt:new Date().toISOString(),platform:"ESPN"}}catch(n){throw console.error("Error creating ESPN league:",n),new Error("Failed to create ESPN league. Please try again.")}}async getLeaguesByUserId(e){try{const n=xn(this.collection,vn("userId","==",e));return(await Vn(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw console.error("Error getting ESPN leagues:",n),new Error("Failed to fetch ESPN leagues. Please try again.")}}async updateLeague(e,n){try{const r=Ae(ie,"espn_leagues",e);return await wn(r,{...n,updatedAt:on()}),{id:e,...n,updatedAt:new Date().toISOString()}}catch(r){throw console.error("Error updating ESPN league:",r),new Error("Failed to update ESPN league. Please try again.")}}async deleteLeague(e){try{const n=Ae(ie,"espn_leagues",e);return await PE(n),!0}catch(n){throw console.error("Error deleting ESPN league:",n),new Error("Failed to delete ESPN league. Please try again.")}}}const ox=new EO,r1=T.createContext();function rg(){return T.useContext(r1)}const s1=T.memo(({children:t})=>{const[e,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(null),{currentUser:l}=_e(),u=async()=>{if(!l){n([]),s(!1);return}try{o(null);const p=await ox.getLeaguesByUserId(l.uid);n(p)}catch(p){console.error("Error fetching ESPN leagues:",p),o("Failed to load ESPN leagues")}finally{s(!1)}};T.useEffect(()=>{u()},[l]);const h={leagues:e,loading:r,error:i,createLeague:async p=>{if(!l)throw new Error("User must be logged in to create a league");try{s(!0),o(null);const g=await ox.createLeague({...p,userId:l.uid});return n(v=>[...v,g]),g}catch(g){throw console.error("Error creating ESPN league:",g),o("Failed to create ESPN league"),g}finally{s(!1)}},fetchLeagues:u,isLoading:r};return a.jsx(r1.Provider,{value:h,children:t})});s1.displayName="ESPNProvider";class NO{constructor(){this.leaguesCollection=dr(ie,"yahoo_leagues")}async getLeagues(){try{const e=xn(this.leaguesCollection);return(await Vn(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching Yahoo leagues:",e),e}}async getUserLeagues(e){try{if(!e)throw new Error("User ID is required to fetch leagues");const n=xn(this.leaguesCollection,vn("userId","==",e));return(await Vn(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){throw console.error("Error fetching user Yahoo leagues:",n),n}}async createLeague(e){var n,r,s,i,o,l;try{if(await new Promise(p=>{const g=Oe.onAuthStateChanged(v=>{g(),p(v)})}),!Oe.currentUser)throw new Error("User must be authenticated to create a league");if(!((n=e.name)!=null&&n.trim()))throw new Error("League name is required");if(console.log("Current user:",Oe.currentUser.uid),console.log("League data userId:",e.userId),e.userId!==Oe.currentUser.uid)throw new Error("League userId must match authenticated user");const u={userId:Oe.currentUser.uid,platform:"yahoo",status:e.status||"pending",createdAt:new Date().toISOString(),name:e.name.trim(),isCommissioner:!!e.isCommissioner,leagueSize:Number(e.leagueSize),hasBuyIn:!!e.hasBuyIn,buyInAmount:Number(e.buyInAmount||0),payouts:{first:Number(((r=e.payouts)==null?void 0:r.first)||0),second:Number(((s=e.payouts)==null?void 0:s.second)||0),third:Number(((i=e.payouts)==null?void 0:i.third)||0),fourth:Number(((o=e.payouts)==null?void 0:o.fourth)||0)},hasWeeklyPayouts:!!e.hasWeeklyPayouts,weeklyPayoutDetails:e.weeklyPayoutDetails||"",wantToInvest:!!e.wantToInvest,invitedUsers:Array.isArray(e.invitedUsers)?e.invitedUsers:[],convertToSleeper:e.convertToSleeper||!1,bountyToLeaguePot:e.bountyToLeaguePot||!1};console.log("Creating league with formatted data:",u);const d=await Lm(this.leaguesCollection,u);if(!(await Bt(d)).exists())throw new Error("Failed to create league document");return{id:d.id,...u}}catch(u){throw console.error("Error creating Yahoo league:",u),u.code==="permission-denied"&&console.error("Permission denied. Current auth state:",{isAuthenticated:!!Oe.currentUser,userId:(l=Oe.currentUser)==null?void 0:l.uid,attemptedUserId:e==null?void 0:e.userId}),u}}}const ax=new NO,i1=T.createContext(),sg=()=>{const t=T.useContext(i1);if(!t)throw new Error("useYahoo must be used within a YahooProvider");return t},TO=({children:t})=>{const[e,n]=T.useState([]),[r,s]=T.useState(!1),[i,o]=T.useState(null),{currentUser:l}=_e(),u=async()=>{try{if(!l)throw new Error("You must be logged in to fetch leagues");s(!0),o(null);const p=await ax.getUserLeagues(l.uid);n(p)}catch(p){o(p.message),console.error("Error fetching Yahoo leagues:",p)}finally{s(!1)}};T.useEffect(()=>{l?u():n([])},[l]);const h={leagues:e,isLoading:r,error:i,fetchLeagues:u,createLeague:async p=>{try{if(!l)throw new Error("You must be logged in to create a league");if(s(!0),o(null),p.userId!==l.uid)throw new Error("Invalid user ID for league creation");const g=await ax.createLeague(p);return n(v=>[...v,g]),await u(),g}catch(g){const v=g.message||"Failed to create league";throw o(v),console.error("Error creating Yahoo league:",g),new Error(v)}finally{s(!1)}}};return a.jsx(i1.Provider,{value:h,children:t})};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=T.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>T.createElement("svg",{ref:h,...IO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${SO(t)}`,l].join(" "),...d},[...e.map(([p,g])=>T.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ce("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=ce("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=ce("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ce("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ce("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ce("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ce("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ce("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wh="/images/BankrollLogoTransparent.png",zO=({notificationError:t})=>{const[e,n]=T.useState(!1),[r,s]=T.useState(""),[i,o]=T.useState(!1),[l,u]=T.useState(!1),{currentUser:d,logout:h,isNewUser:p}=_e(),g=br(),v=to();T.useEffect(()=>{p&&g("/signup")},[p,g]),T.useEffect(()=>{if(t){u(!0);const y=setTimeout(()=>u(!1),5e3);return()=>clearTimeout(y)}},[t]),T.useEffect(()=>{(async()=>{try{o(!1);const b=await kt.getStaticAssetUrl("site-images","Bankroll Gradient.jpg");console.log("Fetched logo URL:",b),s(b)}catch(b){console.error("Error fetching logo:",b),o(!0)}})()},[]);const E=async()=>{try{await h(),kt.clearCache(),g("/login")}catch(y){console.error("Failed to log out:",y)}},S=[{name:"Partners",href:"/spend"},{name:"Banking",href:"/banking"},{name:"Wallets",href:"/wallets"},{name:"Leagues",href:"/leagues"},{name:"Send",href:"/send"}],k=y=>v.pathname===y,x=y=>{console.error("Error loading image:",y),y.target.onerror=null,y.target.src=wh};return a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[l&&t&&a.jsx("div",{className:"bg-red-600 text-white px-4 py-3",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(o1,{className:"h-5 w-5 mr-2"}),a.jsx("p",{className:"text-sm",children:t.includes("Service Worker")?"Unable to enable notifications. Please try refreshing the page.":t})]}),a.jsx("button",{onClick:()=>u(!1),className:"text-white hover:text-gray-200",children:a.jsx(Ye,{className:"h-5 w-5"})})]})}),a.jsxs("nav",{className:"bg-gray-800",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(nn,{to:"/spend",children:a.jsx("img",{className:"h-8 w-auto",src:r||wh,alt:"Bankroll",onError:x})})}),a.jsx("div",{className:"hidden md:block",children:a.jsx("div",{className:"ml-10 flex items-baseline space-x-4",children:S.map(y=>a.jsx(nn,{to:y.href,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${k(y.href)?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:y.name},y.name))})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(nn,{to:"/notifications",className:`p-2 transition-colors duration-200 ${k("/notifications")?"text-white bg-blue-600 rounded-md":"text-gray-400 hover:text-white"}`,children:a.jsx(Gf,{className:"h-6 w-6"})}),a.jsx(nn,{to:"/profile",className:`ml-3 flex items-center transition-colors duration-200 ${k("/profile")?"ring-2 ring-blue-600 rounded-full":"text-gray-300 hover:text-white"}`,children:a.jsx("img",{className:"h-8 w-8 rounded-full",src:(d==null?void 0:d.profileImage)||wh,alt:d==null?void 0:d.firstName,onError:x})}),a.jsx("div",{className:"ml-3 md:hidden",children:a.jsx("button",{onClick:()=>n(!e),className:"text-gray-400 hover:text-white",children:e?a.jsx(Ye,{className:"h-6 w-6"}):a.jsx(LO,{className:"h-6 w-6"})})})]})]})}),e&&a.jsx("div",{className:"md:hidden",children:a.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[S.map(y=>a.jsx(nn,{to:y.href,className:`block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 ${k(y.href)?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,onClick:()=>n(!1),children:y.name},y.name)),a.jsx("button",{onClick:E,className:"text-gray-300 hover:bg-gray-700 hover:text-white block w-full text-left px-3 py-2 rounded-md text-base font-medium",children:"Sign out"})]})})]}),a.jsx("main",{children:a.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:a.jsx(Ak,{})})})]})};function d1(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=d1(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qO(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=d1(t))&&(r&&(r+=" "),r+=e);return r}const ag="-",WO=t=>{const e=GO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(ag);return l[0]===""&&l.length!==1&&l.shift(),h1(l,e)||HO(o)},getConflictingClassGroupIds:(o,l)=>{const u=n[o]||[];return l&&r[o]?[...u,...r[o]]:u}}},h1=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?h1(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(ag);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},dx=/^\[(.+)\]$/,HO=t=>{if(dx.test(t)){const e=dx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},GO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return QO(Object.entries(t.classGroups),n).forEach(([i,o])=>{Kf(o,r,i,e)}),r},Kf=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:hx(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(KO(s)){Kf(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Kf(o,hx(e,i),n,r)})})},hx=(t,e)=>{let n=t;return e.split(ag).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},KO=t=>t.isThemeGetter,QO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,YO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},f1="!",XO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const u=[];let d=0,h=0,p;for(let k=0;k<l.length;k++){let x=l[k];if(d===0){if(x===s&&(r||l.slice(k,k+i)===e)){u.push(l.slice(h,k)),h=k+i;continue}if(x==="/"){p=k;continue}}x==="["?d++:x==="]"&&d--}const g=u.length===0?l:l.substring(h),v=g.startsWith(f1),E=v?g.substring(1):g,S=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:E,maybePostfixModifierPosition:S}};return n?l=>n({className:l,parseClassName:o}):o},JO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},ZO=t=>({cache:YO(t.cacheSize),parseClassName:XO(t),...WO(t)}),eM=/\s+/,tM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(eM);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:v}=n(d);let E=!!v,S=r(E?g.substring(0,v):g);if(!S){if(!E){l=d+(l.length>0?" "+l:l);continue}if(S=r(g),!S){l=d+(l.length>0?" "+l:l);continue}E=!1}const k=JO(h).join(":"),x=p?k+f1:k,y=x+S;if(i.includes(y))continue;i.push(y);const b=s(S,E);for(let P=0;P<b.length;++P){const O=b[P];i.push(x+O)}l=d+(l.length>0?" "+l:l)}return l};function nM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=p1(e))&&(r&&(r+=" "),r+=n);return r}const p1=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=p1(t[r]))&&(n&&(n+=" "),n+=e);return n};function rM(t,...e){let n,r,s,i=o;function o(u){const d=e.reduce((h,p)=>p(h),t());return n=ZO(d),r=n.cache.get,s=n.cache.set,i=l,l(u)}function l(u){const d=r(u);if(d)return d;const h=tM(u,n);return s(u,h),h}return function(){return i(nM.apply(null,arguments))}}const Ne=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},m1=/^\[(?:([a-z-]+):)?(.+)\]$/i,sM=/^\d+\/\d+$/,iM=new Set(["px","full","screen"]),oM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jn=t=>Ri(t)||iM.has(t)||sM.test(t),kr=t=>lo(t,"length",vM),Ri=t=>!!t&&!Number.isNaN(Number(t)),_h=t=>lo(t,"number",Ri),Lo=t=>!!t&&Number.isInteger(Number(t)),dM=t=>t.endsWith("%")&&Ri(t.slice(0,-1)),se=t=>m1.test(t),Cr=t=>oM.test(t),hM=new Set(["length","size","percentage"]),fM=t=>lo(t,hM,g1),pM=t=>lo(t,"position",g1),mM=new Set(["image","url"]),gM=t=>lo(t,mM,wM),yM=t=>lo(t,"",xM),Oo=()=>!0,lo=(t,e,n)=>{const r=m1.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},vM=t=>aM.test(t)&&!lM.test(t),g1=()=>!1,xM=t=>cM.test(t),wM=t=>uM.test(t),_M=()=>{const t=Ne("colors"),e=Ne("spacing"),n=Ne("blur"),r=Ne("brightness"),s=Ne("borderColor"),i=Ne("borderRadius"),o=Ne("borderSpacing"),l=Ne("borderWidth"),u=Ne("contrast"),d=Ne("grayscale"),h=Ne("hueRotate"),p=Ne("invert"),g=Ne("gap"),v=Ne("gradientColorStops"),E=Ne("gradientColorStopPositions"),S=Ne("inset"),k=Ne("margin"),x=Ne("opacity"),y=Ne("padding"),b=Ne("saturate"),P=Ne("scale"),O=Ne("sepia"),M=Ne("skew"),N=Ne("space"),_=Ne("translate"),I=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",se,e],R=()=>[se,e],A=()=>["",Jn,kr],q=()=>["auto",Ri,se],be=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",se],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Ri,se];return{cacheSize:500,separator:":",theme:{colors:[Oo],spacing:[Jn,kr],blur:["none","",Cr,se],brightness:W(),borderColor:[t],borderRadius:["none","","full",Cr,se],borderSpacing:R(),borderWidth:A(),contrast:W(),grayscale:K(),hueRotate:W(),invert:K(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[dM,kr],inset:j(),margin:j(),opacity:W(),padding:R(),saturate:W(),scale:W(),sepia:K(),skew:W(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[Cr]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...be(),se]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lo,se]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",Lo,se]}],"grid-cols":[{"grid-cols":[Oo]}],"col-start-end":[{col:["auto",{span:["full",Lo,se]},se]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Oo]}],"row-start-end":[{row:["auto",{span:[Lo,se]},se]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,e]}],"min-w":[{"min-w":[se,e,"min","max","fit"]}],"max-w":[{"max-w":[se,e,"none","full","min","max","fit","prose",{screen:[Cr]},Cr]}],h:[{h:[se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Cr,kr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_h]}],"font-family":[{font:[Oo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",Ri,_h]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jn,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jn,kr]}],"underline-offset":[{"underline-offset":["auto",Jn,se]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...be(),pM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},gM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Jn,se]}],"outline-w":[{outline:[Jn,kr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Jn,kr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Cr,yM]}],"shadow-color":[{shadow:[Oo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Cr,se]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[b]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Lo,se]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Jn,kr,_h]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bM=rM(_M);function co(...t){return bM(qO(t))}const ge=T.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:co("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...e}));ge.displayName="Card";const Ot=T.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:co("flex flex-col space-y-1.5 p-6",t),...e}));Ot.displayName="CardHeader";const Mt=T.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:co("text-2xl font-semibold leading-none tracking-tight",t),...e}));Mt.displayName="CardTitle";const EM=T.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:co("text-sm text-gray-500 dark:text-gray-400",t),...e}));EM.displayName="CardDescription";const Se=T.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:co("p-6 pt-0",t),...e}));Se.displayName="CardContent";const NM=T.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:co("flex items-center p-6 pt-0",t),...e}));NM.displayName="CardFooter";const nt=[];for(let t=0;t<256;++t)nt.push((t+256).toString(16).slice(1));function TM(t,e=0){return(nt[t[e+0]]+nt[t[e+1]]+nt[t[e+2]]+nt[t[e+3]]+"-"+nt[t[e+4]]+nt[t[e+5]]+"-"+nt[t[e+6]]+nt[t[e+7]]+"-"+nt[t[e+8]]+nt[t[e+9]]+"-"+nt[t[e+10]]+nt[t[e+11]]+nt[t[e+12]]+nt[t[e+13]]+nt[t[e+14]]+nt[t[e+15]]).toLowerCase()}let bh;const IM=new Uint8Array(16);function SM(){if(!bh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bh=crypto.getRandomValues.bind(crypto)}return bh(IM)}const kM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),fx={randomUUID:kM};function CM(t,e,n){if(fx.randomUUID&&!e&&!t)return fx.randomUUID();t=t||{};const r=t.random||(t.rng||SM)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,TM(r)}class ua{constructor(){if(ua.instance)return ua.instance;ua.instance=this,this.groupsCollection="groups",this.usersCollection="users"}sanitizeUserData(e){return{uid:e.uid||"",displayName:e.displayName||"",username:e.username||"",phone:e.phone||"",photoURL:e.photoURL||null,firstName:e.firstName||"",lastName:e.lastName||""}}async getUserGroups(e){try{if(console.log("Fetching groups for user:",e),!e)throw new Error("User ID is required");const n=dr(ie,this.groupsCollection),r=xn(n,vn("memberIds","array-contains",e)),s=xn(n,vn("ownerId","==",e)),[i,o]=await Promise.all([Vn(r),Vn(s)]),l=new Map;i.forEach(d=>{console.log("Found member group:",d.id,d.data()),l.set(d.id,{id:d.id,...d.data()})}),o.forEach(d=>{console.log("Found owner group:",d.id,d.data()),l.set(d.id,{id:d.id,...d.data()})});const u=Array.from(l.values());return console.log("Total groups found:",u.length,u),u}catch(n){throw console.error("Error fetching user groups:",n),n}}async searchUsers(e){try{if(!e||e.length<2)return[];const n=dr(ie,this.usersCollection),r=e.toLowerCase(),s=r+"",i=[xn(n,vn("username",">=",r),vn("username","<=",s)),xn(n,vn("phone",">=",r),vn("phone","<=",s))],o=await Promise.all(i.map(u=>Vn(u))),l=new Map;return o.forEach(u=>{u.forEach(d=>{if(!l.has(d.id)){const h=d.data();l.set(d.id,this.sanitizeUserData({uid:d.id,displayName:h.firstName&&h.lastName?`${h.firstName} ${h.lastName}`:h.username||d.id,username:h.username,phone:h.phone,photoURL:h.profileImage}))}})}),Array.from(l.values())}catch(n){throw console.error("Error searching users:",n),n}}async getUserData(e){try{console.log("Fetching user data for:",e);const n=await Bt(Ae(ie,this.usersCollection,e));if(n.exists()){const r=n.data();return console.log("Found user data:",r),this.sanitizeUserData({uid:e,displayName:r.firstName&&r.lastName?`${r.firstName} ${r.lastName}`:r.username||e,photoURL:r.profileImage,firstName:r.firstName,lastName:r.lastName,username:r.username,phone:r.phone})}return console.log("No user data found for:",e),this.sanitizeUserData({uid:e,displayName:e,photoURL:null,firstName:"",lastName:"",username:"",phone:""})}catch(n){throw console.error("Error fetching user data:",n),n}}async createGroup(e,n){try{if(console.log("Creating group with data:",{groupData:e,creator:n}),!e||!n)throw new Error("Group data and creator information are required");if(!e.name)throw new Error("Group name is required");if(!n.id&&!n.uid)throw new Error("Creator must have an id or uid property");const r=n.id||n.uid,s=CM(),i=dr(ie,this.groupsCollection),o=await this.getUserData(r);console.log("Creator data:",o);const l={id:s,name:e.name,emoji:e.emoji||"👥",description:e.description||"",ownerId:r,owner:o,members:[o],memberIds:[r],pendingMembers:(e.pendingMembers||[]).map(h=>this.sanitizeUserData(h)),dateCreated:new Date().toISOString(),isHidden:!1,visibility:e.visibility||"private",inviteLink:`https://onbankroll.com/group/${s}`,status:"active"};console.log("Creating new group:",l);const u=await Lm(i,l);console.log("Group created with ID:",u.id);const d={...l,id:u.id};return await wn(Ae(i,u.id),{id:u.id}),console.log("Group updated with ID"),d}catch(r){throw console.error("Error creating group:",r),r}}async updateGroup(e,n,r){var s;try{const i=await this.getGroup(e);if(i.ownerId!==r&&!((s=i.coOwners)!=null&&s.includes(r)))throw new Error("User does not have permission to update this group");const o=Ae(ie,this.groupsCollection,e);return await wn(o,n),await this.getGroup(e)}catch(i){throw console.error("Error updating group:",i),i}}async deleteGroup(e,n){try{if((await this.getGroup(e)).ownerId!==n)throw new Error("Only the group owner can delete the group");const s=Ae(ie,this.groupsCollection,e);await PE(s)}catch(r){throw console.error("Error deleting group:",r),r}}async leaveGroup(e,n){var r;try{const s=await this.getGroup(e);if(s.ownerId===n)throw new Error("Group owner cannot leave the group");const i=s.members.filter(u=>u.uid!==n),o=s.memberIds.filter(u=>u!==n),l=((r=s.coOwners)==null?void 0:r.filter(u=>u!==n))||[];await this.updateGroup(e,{members:i,memberIds:o,coOwners:l},s.ownerId)}catch(s){throw console.error("Error leaving group:",s),s}}async addMembers(e,n){try{const r=await this.getGroup(e),s=n.map(u=>this.getUserData(u.id||u.uid)),i=await Promise.all(s),o=[...r.members],l=[...r.memberIds];return i.forEach(u=>{u&&!l.includes(u.uid)&&(o.push(u),l.push(u.uid))}),await this.updateGroup(e,{members:o,memberIds:l},r.ownerId),await this.getGroup(e)}catch(r){throw console.error("Error adding members:",r),r}}async isUserInGroup(e,n){try{if(!e||!n)throw new Error("User ID and Group ID are required");const r=await this.getGroup(n);return r.memberIds.includes(e)||r.ownerId===e}catch(r){throw console.error("Error checking user group membership:",r),r}}async getGroup(e){try{if(console.log("Fetching group:",e),!e)throw new Error("Group ID is required");const n=Ae(ie,this.groupsCollection,e),r=await Bt(n);if(console.log("Group doc exists:",r.exists()),r.exists()){const s=r.data();console.log("Raw group data:",s),console.log("Fetching owner data for:",s.ownerId);const i=await this.getUserData(s.ownerId);console.log("Owner data:",i),console.log("Fetching member data for:",s.memberIds);const o=(s.memberIds||[]).map(d=>this.getUserData(d)),l=await Promise.all(o);console.log("Member data:",l);const u={id:r.id,...s,owner:i,members:l.filter(d=>d!==null)};return console.log("Full group data:",u),u}else throw console.log("Group not found with ID:",e),new Error("Group not found")}catch(n){throw console.error("Error fetching group:",n),n}}}const zn=new ua,AM=()=>{const{currentUser:t}=_e();return a.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[a.jsx("div",{className:"relative overflow-hidden",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("img",{className:"h-24 sm:h-32 w-auto mx-auto mb-6 sm:mb-8",src:"/images/BankrollLogoTransparent.png",alt:"Bankroll Logo"}),a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-bold mb-4 sm:mb-6 bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent leading-tight px-4",children:"Your Fantasy Sports Bank"}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-300 mb-6 sm:mb-8 max-w-2xl mx-auto px-4",children:"Manage your fantasy sports and sports betting bankroll all in one place. Connect with friends, join leagues, and compete for prizes!"}),a.jsx("div",{className:"flex flex-col sm:flex-row justify-center gap-4 px-4",children:t?a.jsxs(a.Fragment,{children:[a.jsx(nn,{to:"/create-group",className:"w-full sm:w-auto px-8 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors text-center",children:"Create a Group"}),a.jsx(nn,{to:"/groups",className:"w-full sm:w-auto px-8 py-3 bg-gray-700 text-white rounded-lg font-medium hover:bg-gray-600 transition-colors text-center",children:"View My Groups"})]}):a.jsxs(a.Fragment,{children:[a.jsx(nn,{to:"/signup",className:"w-full sm:w-auto px-8 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors text-center",children:"Get Started"}),a.jsx(nn,{to:"/login",className:"w-full sm:w-auto px-8 py-3 bg-gray-700 text-white rounded-lg font-medium hover:bg-gray-600 transition-colors text-center",children:"Sign In"})]})})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8",children:[a.jsx(ge,{className:"bg-gray-800 border-gray-700 h-full",children:a.jsxs(Se,{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("span",{className:"text-4xl",children:"👥"})}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:"Group Management"}),a.jsx("p",{className:"text-gray-300",children:"Create and join groups with friends. Share leagues, track group performance, and compete together across multiple platforms."})]})}),a.jsx(ge,{className:"bg-gray-800 border-gray-700 h-full",children:a.jsxs(Se,{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("span",{className:"text-4xl",children:"🏦"})}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:"Unified Banking"}),a.jsx("p",{className:"text-gray-300",children:"Connect all your fantasy sports and betting accounts in one place. Track your balances and manage transfers easily."})]})}),a.jsx(ge,{className:"bg-gray-800 border-gray-700 h-full",children:a.jsxs(Se,{className:"p-6",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("span",{className:"text-4xl",children:"🔒"})}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:"Secure & Private"}),a.jsx("p",{className:"text-gray-300",children:"Bank-level security for your transactions. Your data is encrypted and protected."})]})})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 bg-gray-800",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Powerful Group Features"}),a.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"Create private groups, invite friends, and manage your fantasy sports experience together."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-gray-700 p-6 rounded-lg",children:[a.jsx("div",{className:"text-2xl mb-4",children:"🤝"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"League Sharing"}),a.jsx("p",{className:"text-gray-300",children:"Share and track leagues across multiple platforms within your group."})]}),a.jsxs("div",{className:"bg-gray-700 p-6 rounded-lg",children:[a.jsx("div",{className:"text-2xl mb-4",children:"📊"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Performance Tracking"}),a.jsx("p",{className:"text-gray-300",children:"Monitor group members' performance and compete for the top spot."})]}),a.jsxs("div",{className:"bg-gray-700 p-6 rounded-lg",children:[a.jsx("div",{className:"text-2xl mb-4",children:"🏆"}),a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Group Challenges"}),a.jsx("p",{className:"text-gray-300",children:"Create and participate in group-specific challenges and competitions."})]})]})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-8 sm:mb-12",children:"Supported Platforms"}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 sm:gap-8",children:[a.jsx("div",{className:"flex items-center justify-center bg-gray-800 rounded-lg p-4",children:a.jsx("img",{src:"/images/betmgm.png",alt:"BetMGM",className:"max-h-12 w-auto object-contain"})}),a.jsx("div",{className:"flex items-center justify-center bg-gray-800 rounded-lg p-4",children:a.jsx("img",{src:"/images/caesars.png",alt:"Caesars",className:"max-h-12 w-auto object-contain"})}),a.jsx("div",{className:"flex items-center justify-center bg-gray-800 rounded-lg p-4",children:a.jsx("img",{src:"/images/betespn.png",alt:"ESPN",className:"max-h-12 w-auto object-contain"})}),a.jsx("div",{className:"flex items-center justify-center bg-gray-800 rounded-lg p-4",children:a.jsx("img",{src:"/images/betrFantasy.png",alt:"Betr Fantasy",className:"max-h-12 w-auto object-contain"})})]})]}),a.jsx("footer",{className:"bg-gray-800 py-8 sm:py-12 mt-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-8",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold mb-4",children:"About"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Company"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Team"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Careers"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold mb-4",children:"Resources"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Documentation"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Help Center"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"FAQ"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold mb-4",children:"Legal"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Privacy Policy"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Terms of Service"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Security"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold mb-4",children:"Connect"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Twitter"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Discord"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-300 hover:text-white",children:"Email"})})]})]})]}),a.jsx("div",{className:"mt-8 sm:mt-12 text-center text-gray-400",children:a.jsx("p",{children:"© 2024 Bankroll. All rights reserved."})})]})})]})},jM=()=>{const[t,e]=T.useState(1),[n,r]=T.useState({firstName:"",lastName:"",username:"",email:"",password:"",confirmPassword:"",phoneNumber:"",sleeperUsername:"",venmoUsername:"",emailNotifications:!0}),[s,i]=T.useState(""),[o,l]=T.useState(!1),[u,d]=T.useState(""),{validateSignupStep1:h,completeSignup:p,isNewUser:g}=_e(),v=br();T.useEffect(()=>{!g&&t===2&&v("/")},[g,t,v]),T.useEffect(()=>{(async()=>{try{const O=await kt.getStaticAssetUrl("site-images","Bankroll Gradient.jpg");d(O)}catch(O){console.error("Error fetching logo:",O)}})()},[]);const E=P=>{const{name:O,value:M,type:N,checked:_}=P.target;r(I=>({...I,[O]:N==="checkbox"?_:M}))},S=()=>!n.email||!n.password||!n.confirmPassword?(i("Please fill in all required fields"),!1):n.password!==n.confirmPassword?(i("Passwords do not match"),!1):n.password.length<6?(i("Password must be at least 6 characters"),!1):!0,k=()=>!n.firstName||!n.lastName||!n.username||!n.phoneNumber?(i("Please fill in all required fields"),!1):n.username.startsWith("#")?/^\+?[\d\s-]{10,}$/.test(n.phoneNumber)?!0:(i("Please enter a valid phone number"),!1):(i("Username must start with #"),!1),x=async P=>{if(P.preventDefault(),i(""),!!S())try{l(!0),await h(n.email,n.password),e(2)}catch(O){i("Failed to validate signup: "+O.message)}finally{l(!1)}},y=()=>{i(""),e(1)},b=async P=>{if(P.preventDefault(),!!k())try{i(""),l(!0),await p({firstName:n.firstName,lastName:n.lastName,username:n.username,phoneNumber:n.phoneNumber,sleeperUsername:n.sleeperUsername,venmoUsername:n.venmoUsername,notificationPreferences:{inApp:!0,email:n.emailNotifications,pushToken:null}})}catch(O){i("Failed to complete signup: "+O.message)}finally{l(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("img",{className:"mx-auto h-24 w-auto",src:u||"/newBankrollWebsite/public/images/Bankroll Gradient.jpg",alt:"Bankroll"}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Create your account"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-400",children:["Step ",t," of 2"]})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&a.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:s}),t===1?a.jsxs("form",{className:"space-y-6",onSubmit:x,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n.email,onChange:E,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:n.password,onChange:E,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-300",children:"Confirm Password"}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:n.confirmPassword,onChange:E,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${o?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:o?"Validating...":"Next"})]}):a.jsxs("form",{className:"space-y-6",onSubmit:b,children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-300",children:"First Name"}),a.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:n.firstName,onChange:E,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-300",children:"Last Name"}),a.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,value:n.lastName,onChange:E,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300",children:"Username (must start with #)"}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:n.username,onChange:E,placeholder:"#username",className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-300",children:"Phone Number"}),a.jsx("input",{id:"phoneNumber",name:"phoneNumber",type:"tel",required:!0,value:n.phoneNumber,onChange:E,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"sleeperUsername",className:"block text-sm font-medium text-gray-300",children:"Sleeper Username (optional)"}),a.jsx("input",{id:"sleeperUsername",name:"sleeperUsername",type:"text",value:n.sleeperUsername,onChange:E,placeholder:"@username",className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"venmoUsername",className:"block text-sm font-medium text-gray-300",children:"Venmo Username (optional)"}),a.jsx("input",{id:"venmoUsername",name:"venmoUsername",type:"text",value:n.venmoUsername,onChange:E,placeholder:"@username",className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"emailNotifications",name:"emailNotifications",type:"checkbox",checked:n.emailNotifications,onChange:E,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"emailNotifications",className:"ml-2 block text-sm text-gray-300",children:"By checking this box, you will be notified of ways to add free money to your bankroll."})]}),a.jsxs("div",{className:"flex justify-between space-x-4",children:[a.jsx("button",{type:"button",onClick:y,className:"flex-1 py-2 px-4 border border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Back"}),a.jsx("button",{type:"submit",disabled:o,className:`flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${o?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:o?"Creating Account...":"Sign Up"})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",children:"Already have an account?"})})]}),a.jsx("div",{className:"mt-6",children:a.jsx(nn,{to:"/login",className:"w-full flex justify-center py-2 px-4 border border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600",children:"Sign In"})})]})]})})]})},PM=()=>{const[t,e]=T.useState({email:"",password:""}),[n,r]=T.useState(""),[s,i]=T.useState(!1),[o,l]=T.useState(""),{login:u}=_e(),d=br();T.useEffect(()=>{(async()=>{try{const v=await kt.getStaticAssetUrl("site-images","Bankroll Gradient.jpg");l(v)}catch(v){console.error("Error fetching logo:",v)}})()},[]);const h=g=>{const{name:v,value:E}=g.target;e(S=>({...S,[v]:E}))},p=async g=>{g.preventDefault();try{r(""),i(!0),await u(t.email,t.password),d("/")}catch(v){r("Failed to sign in: "+v.message)}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("img",{className:"mx-auto h-24 w-auto",src:o||"/newBankrollWebsite/public/images/Bankroll Gradient.jpg",alt:"Bankroll"}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"Sign in to your account"})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-gray-800 py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&a.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:n}),a.jsxs("form",{className:"space-y-6",onSubmit:p,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:h,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t.password,onChange:h,className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-gray-600 rounded bg-gray-700"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-300",children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"#",className:"font-medium text-blue-400 hover:text-blue-300",children:"Forgot your password?"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${s?"bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}`,children:s?"Signing in...":"Sign in"})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-600"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-gray-800 text-gray-400",children:"Don't have an account?"})})]}),a.jsx("div",{className:"mt-6",children:a.jsx(nn,{to:"/signup",className:"w-full flex justify-center py-2 px-4 border border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-300 bg-gray-700 hover:bg-gray-600",children:"Create an account"})})]})]})})]})},RM=({value:t=0,duration:e=1e3,prefix:n="",suffix:r=""})=>{const[s,i]=T.useState(0),o=T.useRef(null),l=T.useRef(null),u=T.useRef(0);T.useEffect(()=>{u.current=s,o.current=Date.now();const h=()=>{const g=Date.now()-o.current,v=Math.min(g/e,1),S=(x=>1-Math.pow(1-x,3))(v),k=Math.floor(u.current+(t-u.current)*S);i(k),v<1&&(l.current=requestAnimationFrame(h))};return l.current=requestAnimationFrame(h),()=>{l.current&&cancelAnimationFrame(l.current)}},[t,e]);const d=s.toString().padStart(t.toString().length,"0");return a.jsxs("div",{className:"font-mono",children:[n,d.split("").map((h,p)=>a.jsx("span",{className:"inline-block w-4 text-center",children:h},p)),r]})};function DM(){const{currentUser:t}=_e(),[e,n]=T.useState(null),[r,s]=T.useState(!0),[i,o]=T.useState(null),[l,u]=T.useState(null),d=async()=>{var h;if(console.log("Fetching balance for user:",t==null?void 0:t.uid),!(t!=null&&t.uid)){console.error("No user ID found in currentUser:",t),o("No user found"),s(!1);return}s(!0),o(null);try{console.log("Getting user document from Firestore");const p=Ae(ie,"users",t.uid),g=await Bt(p);if(g.exists()){const v=g.data();console.log("User data fetched:",v),v.dwollaCustomerId||(console.warn("No Dwolla customer ID found for user"),o("Dwolla account not set up")),n(v.dwollaBalance||0),u(((h=v.lastBalanceUpdate)==null?void 0:h.toDate())||new Date),console.log("Balance set to:",v.dwollaBalance)}else console.error("User document not found in Firestore"),o("User data not found")}catch(p){console.error("Error fetching balance:",{error:p,code:p.code,message:p.message,stack:p.stack}),o("Failed to fetch balance")}finally{s(!1)}};return T.useEffect(()=>{console.log("DwollaBalance useEffect triggered. Current user:",t==null?void 0:t.uid),t!=null&&t.uid&&d()},[t==null?void 0:t.uid]),T.useEffect(()=>{console.log("Current component state:",{userId:t==null?void 0:t.uid,balance:e,isLoading:r,error:i,lastUpdated:l,dwollaCustomerId:t==null?void 0:t.dwollaCustomerId})},[t,e,r,i,l]),t!=null&&t.uid?a.jsxs(ge,{className:"bg-gray-900/40 border-purple-500/20",children:[a.jsxs(Ot,{className:"flex flex-row items-center justify-between pb-2",children:[a.jsxs(Mt,{className:"text-white font-medium",children:["Bankroll Balance",(t==null?void 0:t.dwollaCustomerId)&&a.jsxs("span",{className:"text-xs text-gray-400 block",children:["ID: ",t.dwollaCustomerId]})]}),a.jsx("button",{onClick:d,disabled:r,className:"p-2 hover:bg-purple-900/30 rounded-full transition-colors","aria-label":"Refresh balance",children:a.jsx(OO,{className:`h-4 w-4 text-purple-200 ${r?"animate-spin":""}`})})]}),a.jsx(Se,{children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:a.jsx(nd,{className:"h-5 w-5 text-green-500"})}),a.jsxs("div",{children:[r?a.jsx("div",{className:"text-2xl font-bold text-white animate-pulse",children:"Loading..."}):i?a.jsx("div",{className:"text-sm text-red-400",children:i}):a.jsx("div",{className:"text-2xl font-bold text-white",children:a.jsx(RM,{value:Math.floor(e*100),duration:2e3,prefix:"$",suffix:`.${(e*100%100).toString().padStart(2,"0")}`})}),l&&!i&&a.jsxs("div",{className:"text-xs text-gray-400",children:["Last updated: ",l.toLocaleTimeString()]})]})]})})]}):(console.log("No user ID, not rendering DwollaBalance"),null)}class LM{constructor(){this.baseURL="https://api-sandbox.dwolla.com",this.tokenURL=`${this.baseURL}/token`,this.apiKey="your_dwolla_api_key_here",this.apiSecret="your_dwolla_api_secret_here",this.accessToken=null,this.tokenExpirationDate=null}async authenticate(){try{if(this.accessToken&&this.tokenExpirationDate>new Date(Date.now()+6e4)){console.log("Using existing token, expires at:",this.tokenExpirationDate);return}console.log("Requesting new access token...");const e=`${this.apiKey}:${this.apiSecret}`,n=btoa(e),r=await fetch(this.tokenURL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Basic ${n}`},body:"grant_type=client_credentials"});if(!r.ok)throw new Error(`Authentication failed: ${r.statusText}`);const s=await r.json();this.accessToken=s.access_token,this.tokenExpirationDate=new Date(Date.now()+s.expires_in*1e3),console.log("New token obtained, expires in:",s.expires_in,"seconds")}catch(e){throw console.error("Authentication error:",e),e}}async createDwollaCustomer(e){try{if(await this.authenticate(),!this.accessToken)throw new Error("No access token available");const n=new Date(e.birthday).toISOString().split("T")[0],r={firstName:e.firstName,lastName:e.lastName,email:e.email,type:"personal",dateOfBirth:n,address1:e.address1,city:e.city,state:e.state,postalCode:e.postalCode,ssn:e.ssn},s=await fetch(`${this.baseURL}/customers`,{method:"POST",headers:{Accept:"application/vnd.dwolla.v1.hal+json","Content-Type":"application/json",Authorization:`Bearer ${this.accessToken}`},body:JSON.stringify(r)});if(!s.ok){const l=await s.json();throw new Error(l.message||"Failed to create Dwolla customer")}const o=s.headers.get("Location").split("/").pop();return ie&&await this.storeDwollaCustomerId(e.id,o),o}catch(n){throw console.error("Error creating Dwolla customer:",n),n}}async storeDwollaCustomerId(e,n){if(!ie){console.warn("Skipping Dwolla customer ID storage in development mode");return}try{const r=Ae(ie,"users",e);await wn(r,{dwollaCustomerId:n,dwollaVerificationStatus:"pending",dwollaBalance:0,bonusBalance:0,lastBalanceUpdate:on(),lastUpdated:on()})}catch(r){throw console.error("Error storing Dwolla customer ID:",r),r}}async fetchBalance(e){try{if(await this.authenticate(),!this.accessToken)throw new Error("No access token available");const n=await fetch(`${this.baseURL}/customers/${e}/funding-sources`,{headers:{Accept:"application/vnd.dwolla.v1.hal+json",Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to fetch funding sources");const s=(await n.json())._embedded["funding-sources"].find(l=>l.type==="balance");if(!s)throw new Error("No balance account found");const i=await fetch(`${this.baseURL}/funding-sources/${s.id}/balance`,{headers:{Accept:"application/vnd.dwolla.v1.hal+json",Authorization:`Bearer ${this.accessToken}`}});if(!i.ok)throw new Error("Failed to fetch balance");const o=await i.json();return parseFloat(o.balance.value)}catch(n){throw console.error("Error fetching balance:",n),n}}async getUserByDwollaId(e){if(!ie)return null;try{const n=dr(ie,"users"),r=xn(n,vn("dwollaCustomerId","==",e)),s=await Vn(r);return s.empty?null:s.docs[0].data()}catch(n){return console.error("Error getting user by Dwolla ID:",n),null}}async updateUserBalance(e,n){if(!ie){console.warn("Skipping balance update in development mode");return}try{const r=Ae(ie,"users",e),s=await Bt(r);if(!s.exists())throw new Error("User document not found");s.data().dwollaBalance!==n&&await wn(r,{dwollaBalance:n,lastBalanceUpdate:on()})}catch(r){throw console.error("Error updating user balance:",r),r}}async listFundingSources(e){try{if(await this.authenticate(),!this.accessToken)throw new Error("No access token available");const n=await fetch(`${this.baseURL}/customers/${e}/funding-sources`,{headers:{Accept:"application/vnd.dwolla.v1.hal+json",Authorization:`Bearer ${this.accessToken}`}});if(!n.ok)throw new Error("Failed to fetch funding sources");return(await n.json())._embedded["funding-sources"]}catch(n){throw console.error("Error listing funding sources:",n),n}}}const OM=new LM;function MM(){const{currentUser:t,setCurrentUser:e}=_e(),[n,r]=T.useState(!1),[s,i]=T.useState(null),[o,l]=T.useState({firstName:"",lastName:"",email:(t==null?void 0:t.email)||"",birthday:"",ssn:"",address1:"",city:"",state:"",postalCode:""}),u=async h=>{h.preventDefault(),r(!0),i(null);try{const p=await OM.createDwollaCustomer({...o,id:t.uid}),g=Ae(ie,"users",t.uid),v=await Bt(g);v.exists()&&(e(E=>({...E,...v.data()})),console.log("Updated user data:",v.data()))}catch(p){console.error("Error creating Dwolla customer:",p),i(p.message||"Failed to create Dwolla account")}finally{r(!1)}},d=h=>{l(p=>({...p,[h.target.name]:h.target.value}))};return t!=null&&t.dwollaCustomerId?null:a.jsxs(ge,{className:"bg-gray-900/40 border-purple-500/20",children:[a.jsx(Ot,{children:a.jsx(Mt,{className:"text-white",children:"Setup Dwolla Account"})}),a.jsx(Se,{children:a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"First Name"}),a.jsx("input",{type:"text",name:"firstName",value:o.firstName,onChange:d,required:!0,className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Last Name"}),a.jsx("input",{type:"text",name:"lastName",value:o.lastName,onChange:d,required:!0,className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:o.email,onChange:d,required:!0,disabled:!0,className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white opacity-50"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Date of Birth"}),a.jsx("input",{type:"date",name:"birthday",value:o.birthday,onChange:d,required:!0,className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"SSN"}),a.jsx("input",{type:"password",name:"ssn",value:o.ssn,onChange:d,required:!0,placeholder:"123-45-6789",className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Street Address"}),a.jsx("input",{type:"text",name:"address1",value:o.address1,onChange:d,required:!0,className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"City"}),a.jsx("input",{type:"text",name:"city",value:o.city,onChange:d,required:!0,className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"State"}),a.jsx("input",{type:"text",name:"state",value:o.state,onChange:d,required:!0,maxLength:"2",placeholder:"CA",className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"ZIP Code"}),a.jsx("input",{type:"text",name:"postalCode",value:o.postalCode,onChange:d,required:!0,placeholder:"12345",className:"mt-1 block w-full rounded-md bg-gray-800 border-gray-700 text-white"})]})]}),s&&a.jsx("div",{className:"text-red-400 text-sm",children:s}),a.jsx("button",{type:"submit",disabled:n,className:`w-full py-2 px-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg 
              transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:n?"Setting up...":"Setup Account"})]})})]})}const uu=class uu{async setPreferredMethod(e,n){try{const r=Ae(ie,"users",e);return await wn(r,{preferredPaymentMethod:n}),!0}catch(r){throw console.error("Error setting preferred payment method:",r),r}}async getPreferredMethod(e){try{const n=Ae(ie,"users",e),r=await Bt(n);return r.exists()?r.data().preferredPaymentMethod:null}catch(n){throw console.error("Error getting preferred payment method:",n),n}}async getPaymentMethodDetails(e,n){try{const r=Ae(ie,"users",e),s=await Bt(r);if(!s.exists())return null;const i=s.data(),[o,l]=n.split("-");switch(o){case"venmo":return{type:"venmo",icon:"/images/venmo-icon.svg",name:"Venmo",detail:i.venmoUsername};case"applepay":return{type:"applepay",icon:"/images/apple-pay-icon.svg",name:"Apple Pay",detail:i.applePayEmail};case"cashapp":return{type:"cashapp",icon:"/images/cashapp-icon.svg",name:"Cash App",detail:i.cashAppTag};case"bank":return null;default:return null}}catch(r){throw console.error("Error getting payment method details:",r),r}}};uy(uu,"shared",new uu);let Yi=uu;const VM={ValidationError:"Please check your information and try again.",NotFound:"The requested resource was not found.",Forbidden:"You do not have permission to perform this action.",InvalidCredentials:"Invalid credentials provided.",InvalidResourceState:"The resource is in an invalid state for this operation.",DuplicateResource:"This resource already exists.",InvalidFormat:"The provided information format is invalid.",InvalidScope:"The requested scope is invalid or unavailable.",ServerError:"An unexpected error occurred. Please try again later.",ServiceUnavailable:"The service is temporarily unavailable. Please try again later.",TooManyRequests:"Too many requests. Please wait a moment and try again.",InvalidSSN:"The provided SSN appears to be invalid.",InvalidDateOfBirth:"The provided date of birth appears to be invalid.",InvalidAddress:"The provided address could not be verified.",InvalidName:"The provided name appears to be invalid.",DocumentRequired:"Additional documentation is required for verification.",InsufficientFunds:"Insufficient funds available for this transaction.",TransferFailed:"The transfer could not be completed. Please try again.",InvalidAmount:"The specified amount is invalid.",ExceedsLimit:"This transaction exceeds the allowed limit.",AccountSuspended:"Your account has been suspended. Please contact support.",AccountDeactivated:"Your account has been deactivated.",VerificationRequired:"Account verification is required to perform this action.",getErrorMessage:function(t){if(this[t.code])return this[t.code];const e=t.message.toLowerCase();return e.includes("ssn")?this.InvalidSSN:e.includes("date of birth")?this.InvalidDateOfBirth:e.includes("address")?this.InvalidAddress:e.includes("funds")?this.InsufficientFunds:e.includes("verification")?this.VerificationRequired:"An error occurred. Please try again or contact support if the problem persists."}};function y1({onClose:t}){const{currentUser:e}=_e(),[n,r]=T.useState(""),[s,i]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(null);T.useEffect(()=>{(async()=>{if(e!=null&&e.uid)try{const E=await Yi.shared.getPreferredMethod(e.uid);if(E){const S=await Yi.shared.getPaymentMethodDetails(e.uid,E);d(S)}}catch(E){console.error("Error fetching preferred method:",E),l("Failed to load payment method. Please try again.")}})()},[e]);const h=async v=>{v.preventDefault(),i(!0),l(null);try{if(!u)throw new Error("No payment method selected");const E=parseFloat(n);if(isNaN(E)||E<=0)throw new Error("Please enter a valid amount");await new Promise(S=>setTimeout(S,1e3)),t()}catch(E){console.error("Deposit error:",E),l(VM.getErrorMessage(E))}finally{i(!1)}},p=v=>{const E=v.target.value;(E===""||/^\d*\.?\d{0,2}$/.test(E))&&r(E)},g=[10,25,50,100,250,500];return a.jsxs(ge,{className:"bg-gray-900/40 border-purple-500/20",children:[a.jsxs(Ot,{className:"relative",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx(Mt,{className:"text-white",children:"Deposit Funds"})]}),a.jsx(Se,{children:a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Amount"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(nd,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",value:n,onChange:p,placeholder:"0.00",className:`block w-full pl-10 pr-4 py-2 rounded-md bg-gray-800 border-gray-700 
                  text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Method"}),a.jsx("button",{type:"button",onClick:()=>t(),className:"w-full p-4 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors flex items-center justify-between",children:u?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-12 h-12 ${u.type==="cashapp"?"bg-green-500/20":u.type==="applepay"?"bg-gray-700/20":"bg-blue-500/20"} rounded-lg flex items-center justify-center`,children:a.jsx("img",{src:u.icon,alt:u.name,className:"w-8 h-8"})}),a.jsxs("div",{className:"text-left",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-white font-medium",children:u.name}),a.jsx("span",{className:"px-2 py-0.5 bg-yellow-400/10 text-yellow-400 text-xs rounded-full",children:"Preferred"})]}),a.jsx("p",{className:"text-sm text-gray-400",children:u.detail})]})]}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]}):a.jsx("div",{className:"text-gray-400",children:"Select a payment method"})})]}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.map(v=>a.jsxs("button",{type:"button",onClick:()=>r(v.toString()),className:`py-2 px-4 bg-gray-800 hover:bg-gray-700 text-white rounded-lg 
                  transition-colors border border-gray-700`,children:["$",v]},v))}),o&&a.jsx("div",{className:"text-red-400 text-sm",children:o}),a.jsx("button",{type:"submit",disabled:s||!n||!u,className:`w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg 
              transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:s?"Processing...":`Deposit $${n||"0.00"}`})]})})]})}const v1=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState({});T.useEffect(()=>{(async()=>{try{const u={espnFantasy:await kt.getStaticAssetUrl("rewards-images","espnFantasy.png"),sleeperFantasy:await kt.getStaticAssetUrl("rewards-images","sleeperFantasy.png"),yahoofantasy:await kt.getStaticAssetUrl("rewards-images","yahoofantasy.png"),fanduel:await kt.getStaticAssetUrl("rewards-images","fanduel.png"),draftkingsFantasy:await kt.getStaticAssetUrl("rewards-images","draftkingsFantasy.png")};r(u)}catch(u){console.error("Error loading images:",u)}})()},[]);const s=[{id:1,description:"Connect your Season-Long Fantasy League",bounty:5,completed:!1,buttonColor:"bg-blue-500 hover:bg-blue-600",logos:[{src:n.espnFantasy,alt:"ESPN"},{src:n.sleeperFantasy,alt:"Sleeper"},{src:n.yahoofantasy,alt:"Yahoo"}]},{id:2,description:"Connect your FanDuel and DraftKings accounts",bounty:5,completed:!1,buttonColor:"bg-purple-500 hover:bg-purple-600",logos:[{src:n.fanduel,alt:"FanDuel"},{src:n.draftkingsFantasy,alt:"DraftKings"}]},{id:3,description:"Share with your best friend",bounty:10,completed:!1,buttonColor:"bg-green-500 hover:bg-green-600",emoji:"🤝"}],i=l=>{console.log(`Clicked bounty for challenge ${l}`)},o=()=>a.jsxs("div",{className:"fixed inset-0 bg-blue-500 flex flex-col items-center justify-start z-50 p-4",children:[a.jsx("button",{onClick:()=>e(!1),className:"text-white text-2xl font-medium mb-8 self-start",children:"Close"}),a.jsxs("div",{className:"space-y-4 w-full max-w-md mb-8",children:[a.jsxs("div",{className:"bg-blue-400/30 rounded-xl p-4 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:n.sleeperFantasy,alt:"Sleeper",className:"w-8 h-8 rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white",children:"$0.50 for your"}),a.jsx("div",{className:"text-white/70",children:"Sleeper League"})]})]}),a.jsx("div",{className:"text-white text-xl font-medium",children:"$0.50"})]}),a.jsxs("div",{className:"bg-blue-400/30 rounded-xl p-4 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:n.fanduel,alt:"FanDuel",className:"w-8 h-8 rounded"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-white",children:"$1.00 FanDuel"}),a.jsx("div",{className:"text-white/70",children:"Fanduel"})]})]}),a.jsx("div",{className:"text-white text-xl font-medium",children:"$1.00"})]})]}),a.jsxs("div",{className:"relative w-full max-w-md aspect-square",children:[a.jsx("div",{className:"absolute inset-0 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full z-10"}),a.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-0 h-0 
                      border-l-[20px] border-l-transparent
                      border-b-[40px] border-b-white
                      border-r-[20px] border-r-transparent z-20`})]}),a.jsx("button",{className:"mt-8 bg-white text-blue-500 rounded-full px-12 py-4 text-xl font-bold",onClick:()=>{},children:"SPIN!"})]});return a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Rewards and Challenges"}),a.jsx(u1,{className:"h-5 w-5 text-yellow-500"})]}),a.jsx("div",{className:"rounded-lg overflow-hidden",children:s.map((l,u)=>a.jsxs("div",{className:`flex items-center justify-between p-4 ${u%2===0?"bg-gray-800/50":"bg-gray-800/30"}`,children:[a.jsxs("div",{className:"flex items-center flex-1",children:[l.logos?a.jsx("div",{className:"flex -space-x-2 mr-4",children:l.logos.map((d,h)=>a.jsx("img",{src:d.src,alt:d.alt,className:"w-8 h-8 rounded-full border-2 border-gray-800 bg-white"},h))}):l.emoji?a.jsx("div",{className:"w-8 h-8 flex items-center justify-center mr-4 text-xl",children:l.emoji}):null,a.jsx("p",{className:"text-white",children:l.description})]}),a.jsxs("button",{onClick:()=>i(l.id),className:`ml-4 px-6 py-2 ${l.buttonColor} text-white rounded-lg transition-colors shadow-lg`,children:["Bounty: $",l.bounty]})]},l.id))}),a.jsxs("div",{className:"flex items-center justify-between mt-6 p-4 bg-gray-800/50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Daily Reward"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Spin for a chance to win rewards!"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{disabled:!0,className:"px-6 py-2 bg-gradient-to-r from-blue-500/50 to-purple-500/50 text-white/70 rounded-lg cursor-not-allowed shadow-lg",children:"Spin Now!"}),a.jsx("span",{className:"absolute -top-2 right-0 text-xs font-medium text-purple-400 bg-purple-400/10 px-2 py-1 rounded-full",children:"Coming Soon"})]})]})]}),t&&a.jsx(o,{})]})};function UM(){const{currentUser:t}=_e(),[e,n]=T.useState(!1),[r,s]=T.useState("rewards"),i=[{id:1,type:"deposit",amount:500,description:"Deposit from Bank",date:"2024-03-15"},{id:2,type:"withdrawal",amount:-50,description:"NFL Bet Placement",date:"2024-03-14"},{id:3,type:"winning",amount:125,description:"Bet Payout",date:"2024-03-13"}];return t!=null&&t.dwollaCustomerId?a.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.dwollaVerificationStatus)==="pending"&&a.jsx(ge,{className:"bg-yellow-500/10 border-yellow-500/20",children:a.jsx(Se,{className:"py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:a.jsx(a1,{className:"h-5 w-5 text-yellow-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white",children:"Verification In Progress"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Your account is being verified. This typically takes 1-2 business days. You'll receive a notification once verified."})]})]})})}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"max-w-md w-full mx-4",children:a.jsx(y1,{onClose:()=>n(!1)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(DM,{}),a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsx(Ot,{children:a.jsx(Mt,{className:"text-lg font-medium text-purple-100",children:"Quick Actions"})}),a.jsx(Se,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>n(!0),disabled:(t==null?void 0:t.dwollaVerificationStatus)==="pending",className:"flex items-center justify-center space-x-2 bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(lx,{className:"h-5 w-5"}),a.jsx("span",{children:"Deposit"})]}),a.jsxs("button",{disabled:(t==null?void 0:t.dwollaVerificationStatus)==="pending",className:"flex items-center justify-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(cx,{className:"h-5 w-5"}),a.jsx("span",{children:"Withdraw"})]})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsx("button",{onClick:()=>s("rewards"),className:`p-4 rounded-lg font-medium transition-colors ${r==="rewards"?"bg-purple-600 text-white":"bg-gray-900/50 text-gray-300 hover:bg-gray-900/70"}`,children:"Rewards & Challenges"}),a.jsx("button",{onClick:()=>s("activity"),className:`p-4 rounded-lg font-medium transition-colors ${r==="activity"?"bg-purple-600 text-white":"bg-gray-900/50 text-gray-300 hover:bg-gray-900/70"}`,children:"Recent Activity"})]}),r==="rewards"?a.jsx(v1,{}):a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsx(Ot,{children:a.jsx(Mt,{className:"text-lg font-medium text-purple-100",children:"Recent Activity"})}),a.jsx(Se,{children:a.jsx("div",{className:"space-y-4",children:i.map(o=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-800/50 hover:bg-gray-800/70 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`p-2 rounded-full ${o.type==="deposit"?"bg-green-500/20 text-green-500":o.type==="withdrawal"?"bg-red-500/20 text-red-500":"bg-purple-500/20 text-purple-500"}`,children:o.type==="deposit"?a.jsx(lx,{className:"h-5 w-5"}):o.type==="withdrawal"?a.jsx(cx,{className:"h-5 w-5"}):a.jsx(xh,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:o.description}),a.jsx("p",{className:"text-xs text-gray-400",children:o.date})]})]}),a.jsxs("div",{className:`font-medium ${o.amount>0?"text-green-500":"text-red-500"}`,children:[o.amount>0?"+":"",o.amount.toFixed(2)]})]},o.id))})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsxs(Ot,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Mt,{className:"text-sm font-medium text-purple-100",children:"Total Winnings"}),a.jsx(nd,{className:"h-4 w-4 text-purple-200"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold text-green-500",children:"$1,234.56"}),a.jsx("p",{className:"text-xs text-purple-200 mt-1",children:"+12.5% from last month"})]})]}),a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsxs(Ot,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Mt,{className:"text-sm font-medium text-purple-100",children:"Active Bets"}),a.jsx(xh,{className:"h-4 w-4 text-purple-200"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:"5"}),a.jsx("p",{className:"text-xs text-purple-200 mt-1",children:"Total value: $250.00"})]})]}),a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsxs(Ot,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Mt,{className:"text-sm font-medium text-purple-100",children:"Win Rate"}),a.jsx(xh,{className:"h-4 w-4 text-purple-200"})]}),a.jsxs(Se,{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:"62%"}),a.jsx("p",{className:"text-xs text-purple-200 mt-1",children:"Last 30 days"})]})]})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Dwolla ID: ",t.dwollaCustomerId]})]}):a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsx(MM,{})})}const FM=()=>{const t={bankroll:{balance:1e4,logo:"/images/BankrollLogoTransparent.png"},subWallets:[{name:"FanDuel",balance:2500,logo:"/images/fanduel.png",connected:!0},{name:"DraftKings",balance:3e3,logo:"/images/draftKingsCasino.png",connected:!0},{name:"BetMGM",balance:1500,logo:"/images/betmgm.png",connected:!0},{name:"Caesars",balance:2e3,logo:"/images/caesarsCasino.png",connected:!1},{name:"MyPrize",balance:1e3,logo:"/images/MyPrize.png",connected:!0}]},e=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n);return a.jsxs("div",{className:"relative min-h-[800px] flex flex-col items-center py-8",children:[a.jsx("div",{className:"mb-0 animate-fadeIn z-10",children:a.jsxs(ge,{className:"bg-gray-800 border-gray-700 w-80 p-6 flex flex-col items-center transform hover:scale-105 transition-all duration-200",children:[a.jsx("img",{src:t.bankroll.logo,alt:"Bankroll",className:"w-40 h-40 object-contain mb-4"}),a.jsx("p",{className:"text-2xl font-bold text-blue-400",children:e(t.bankroll.balance)})]})}),a.jsxs("div",{className:"relative w-full",children:[a.jsx("div",{className:"absolute inset-0 flex justify-center",children:a.jsxs("svg",{className:"w-full h-[280px]",viewBox:"0 0 1200 280",preserveAspectRatio:"none",children:[a.jsx("path",{d:"M600,0 L600,80",className:"stroke-gray-600 animate-branch",strokeWidth:"3",fill:"none"}),[0,1,2,3,4].map(n=>{const r=120+n*240;return a.jsx("path",{d:`M600,80 Q600,180 ${r},280`,className:"stroke-gray-600 animate-branch",strokeWidth:"3",fill:"none",style:{animationDelay:`${n*150}ms`}},n)})]})}),a.jsxs("div",{className:"grid grid-cols-6 gap-6 mt-[260px]",children:[t.subWallets.map((n,r)=>a.jsx("div",{className:"flex flex-col items-center animate-fadeInUp",style:{animationDelay:`${r*150}ms`},children:a.jsxs(ge,{className:"relative bg-gray-800 border-gray-700 w-36 h-40 flex flex-col items-center justify-center p-3 transform hover:scale-105 transition-all duration-200",children:[n.connected&&a.jsx("div",{className:"absolute top-1 right-1",children:a.jsx(ol,{className:"h-4 w-4 text-green-500"})}),a.jsx("img",{src:n.logo,alt:n.name,className:"w-20 h-20 object-contain mb-2"}),a.jsx("p",{className:"text-sm font-bold text-green-400 text-center",children:e(n.balance)})]})},r)),a.jsx("div",{className:"flex flex-col items-center animate-fadeInUp",style:{animationDelay:"750ms"},children:a.jsx(nn,{to:"/spend",children:a.jsx(ge,{className:"bg-gray-800 border-gray-700 w-36 h-40 flex flex-col items-center justify-center p-3 transform hover:scale-105 transition-all duration-200 cursor-pointer group",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Rn,{className:"w-20 h-20 text-gray-400 group-hover:text-blue-400 transition-colors duration-200"}),a.jsx("p",{className:"text-sm font-bold text-gray-400 group-hover:text-blue-400 transition-colors duration-200 text-center mt-2",children:"Add Platform"})]})})})})]})]})]})},$M=({league:t,onClose:e,onGroupCreated:n,isConverted:r})=>{var Z,z,U,K,X;const[s,i]=T.useState([]),[o,l]=T.useState(!0),[u,d]=T.useState(!1),[h,p]=T.useState(!1),[g,v]=T.useState("High-Yield Savings"),[E,S]=T.useState(!1),[k,x]=T.useState(!1),[y,b]=T.useState("Savings"),{currentUser:P}=_e(),O=["Aug","Sep","Oct","Nov","Dec","Jan"],M=[{name:"High-Yield Savings",return:"+4.5%",icon:"💰",isPositive:!0},{name:"Bitcoin",return:"+3.36%",icon:a.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 bg-black text-white rounded-full",children:"₿"}),isPositive:!0},{name:"Apple Stock",return:"+0.18%",icon:"🍎",isPositive:!0}],N=.045,_={first:700,second:200,third:100},I=W=>{if(g==="High-Yield Savings"){const J=Math.round(W*N);return{base:W,increase:J,total:W+J}}return{base:W,increase:0,total:W}},C=()=>{const W=()=>{switch(y){case"Stocks":return a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"Coming Soon"})});case"Crypto":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600 dark:text-purple-300 mb-2",children:"Bitcoin (BTC)"}),a.jsx("div",{className:"h-48 bg-purple-200/50 dark:bg-purple-700/30 rounded-lg relative p-4",children:a.jsxs("div",{className:"absolute inset-0 p-4",children:[a.jsxs("div",{className:"absolute left-4 top-0 bottom-8 flex flex-col justify-between text-xs text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:"$95,000"}),a.jsx("span",{children:"$90,000"}),a.jsx("span",{children:"$85,000"})]}),a.jsx("div",{className:"absolute left-16 right-4 bottom-4 flex justify-between text-xs text-gray-600 dark:text-gray-400",children:O.map(J=>a.jsx("span",{children:J},J))}),a.jsxs("div",{className:"absolute left-16 right-4 top-0 bottom-8 flex flex-col justify-between",children:[a.jsx("div",{className:"border-b border-black/10 dark:border-black/30 w-full"}),a.jsx("div",{className:"border-b border-black/10 dark:border-black/30 w-full"}),a.jsx("div",{className:"border-b border-black/10 dark:border-black/30 w-full"})]}),a.jsx("div",{className:"absolute left-16 right-4 bottom-8 top-0",children:a.jsx("svg",{className:"w-full h-full",preserveAspectRatio:"none",children:a.jsx("path",{d:"M0,50 Q25,20 50,70 T100,40",stroke:"#F7931A",strokeWidth:"2",fill:"none"})})})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"Available Assets"}),a.jsxs("ul",{className:"mt-2 space-y-2",children:[a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:"ETH"}),a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:"DOGE"}),a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:"LITECOIN"}),a.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:"USD"})]})]}),a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"Coming Soon"}),a.jsx("p",{className:"mt-2 text-gray-700 dark:text-gray-300",children:"BUSD"})]})]})]});case"Savings":return a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600 dark:text-purple-300 mb-2",children:"High-Yield Savings (4% APY)"}),a.jsx("div",{className:"h-48 bg-purple-200/50 dark:bg-purple-700/30 rounded-lg relative p-4",children:a.jsxs("div",{className:"absolute inset-0 p-4",children:[a.jsxs("div",{className:"absolute left-4 top-0 bottom-8 flex flex-col justify-between text-xs text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:"$1,040"}),a.jsx("span",{children:"$1,020"}),a.jsx("span",{children:"$1,000"})]}),a.jsx("div",{className:"absolute left-16 right-4 bottom-4 flex justify-between text-xs text-gray-600 dark:text-gray-400",children:O.map(J=>a.jsx("span",{children:J},J))}),a.jsxs("div",{className:"absolute left-16 right-4 top-0 bottom-8 flex flex-col justify-between",children:[a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 w-full"}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 w-full"}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 w-full"})]}),a.jsx("div",{className:"absolute left-16 right-4 bottom-8 top-0",children:a.jsx("svg",{className:"w-full h-full",preserveAspectRatio:"none",children:a.jsx("path",{d:"M0,96 L480,84",stroke:"#22C55E",strokeWidth:"2",fill:"none",className:"transform translate-y-0"})})}),a.jsx("div",{className:"absolute left-16 bottom-16 text-sm text-gray-600 dark:text-gray-400",children:"Starting Balance: $1,000"})]})})]});default:return null}};return a.jsx("div",{className:`fixed right-0 top-0 h-full w-96 bg-purple-50 dark:bg-purple-900/90 transform transition-transform duration-300 ease-in-out ${k?"translate-x-0":"translate-x-full"} shadow-xl border-l border-purple-200 dark:border-purple-700 z-50`,children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"League Holdings Details"}),a.jsx("button",{onClick:()=>x(!1),className:"text-purple-500 hover:text-purple-700",children:a.jsx(Ye,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"flex space-x-2 mb-6",children:["Stocks","Crypto","Savings"].map(J=>a.jsx("button",{onClick:()=>b(J),className:`px-4 py-2 rounded-lg transition-colors ${y===J?"bg-purple-600 text-white":"bg-purple-100 dark:bg-purple-800/30 text-purple-600 dark:text-purple-300 hover:bg-purple-200"}`,children:J},J))}),W()]})})};T.useEffect(()=>{(async()=>{try{const J=await vc.getLeagueUsers(t.league_id);i(J)}catch(J){console.error("Error fetching league users:",J)}finally{l(!1)}})()},[t.league_id]);const j=async()=>{if(P)try{d(!0);const W=s.find(de=>de.is_owner),J={name:t.name,emoji:"🏈",coOwners:[P.uid,W.user_id],members:s.map(de=>({id:de.user_id,username:de.username,displayName:de.display_name,avatar:de.avatar})),sleeperLeagueId:t.league_id,platform:"sleeper"};await zn.createGroup(J,P.uid),n(t.league_id)}catch(W){console.error("Error creating group:",W)}finally{d(!1)}},R=I(_.first),A=I(_.second),q=I(_.third),be=W=>a.jsxs("span",{children:["$",W.total,W.increase>0&&a.jsxs("span",{className:"text-green-500 text-lg ml-1",children:["(+$",W.increase,")"]})]});return a.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/90 p-8 rounded-2xl max-w-2xl w-full mx-4 relative border border-purple-200 dark:border-purple-700 max-h-[80vh] overflow-y-auto",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-purple-500 dark:text-purple-300 hover:text-purple-700 dark:hover:text-white",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[t.avatar&&a.jsx("img",{src:`https://sleepercdn.com/avatars/${t.avatar}`,alt:t.name,className:"w-16 h-16 rounded-full"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.name}),a.jsxs("p",{className:"text-purple-600 dark:text-purple-300",children:["Season ",t.season]})]})]}),!r&&a.jsxs("button",{onClick:j,disabled:u,className:`flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 
                text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(Rn,{className:"h-5 w-5"}),a.jsx("span",{children:u?"Creating...":"Create Bankroll Group"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"Total Teams"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.total_rosters})]}),a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"League Type"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white capitalize",children:t.status||"Active"})]}),a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg cursor-pointer hover:bg-purple-200/50 dark:hover:bg-purple-700/30 transition-colors col-span-1",style:{gridColumn:"span 1.5"},onClick:()=>p(!h),children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"Prize Structure"}),a.jsx(ux,{className:"h-4 w-4 text-purple-400"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(u1,{className:"h-5 w-5 text-yellow-400"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["1st Prize: ",be(R)]})]}),a.jsxs("div",{className:"mt-2 flex items-center text-sm text-purple-600 dark:text-purple-300 hover:text-purple-800 dark:hover:text-purple-100",children:[a.jsx("span",{children:"See More"}),a.jsx(nr,{className:"h-4 w-4 ml-1"})]}),h&&a.jsxs("div",{className:"mt-2 space-y-1 text-sm text-gray-700 dark:text-gray-300",children:[a.jsxs("p",{children:["2nd Prize: ",be(A)]}),a.jsxs("p",{children:["3rd Prize: ",be(q)]})]})]}),a.jsxs("div",{className:"bg-purple-100/50 dark:bg-purple-800/30 p-4 rounded-lg relative",style:{gridColumn:"span 0.5"},children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-600 dark:text-purple-300",children:"League Holdings Type"}),a.jsx(ux,{className:"h-4 w-4 text-purple-400"})]}),a.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(!0),children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[typeof((Z=M.find(W=>W.name===g))==null?void 0:Z.icon)=="string"?a.jsx("span",{children:(z=M.find(W=>W.name===g))==null?void 0:z.icon}):(U=M.find(W=>W.name===g))==null?void 0:U.icon,a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g}),a.jsx("p",{className:`text-sm ${(K=M.find(W=>W.name===g))!=null&&K.isPositive?"text-green-500":"text-red-500"}`,children:(X=M.find(W=>W.name===g))==null?void 0:X.return})]})]}),a.jsx(nr,{className:"h-5 w-5 text-black dark:text-white"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"League Members"}),o?a.jsx("div",{className:"text-center py-4 text-purple-600 dark:text-purple-300",children:"Loading members..."}):a.jsx("div",{className:"space-y-3",children:s.map(W=>a.jsxs("div",{className:"flex items-center space-x-3 bg-purple-100/50 dark:bg-purple-800/20 p-3 rounded-lg",children:[W.avatar&&a.jsx("img",{src:`https://sleepercdn.com/avatars/${W.avatar}`,alt:W.display_name,className:"w-10 h-10 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:W.display_name}),W.is_owner&&a.jsx(td,{className:"h-4 w-4 text-yellow-400",title:"Commissioner"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs("p",{className:"text-purple-500 font-medium text-sm",children:["#",W.username]}),a.jsx(ol,{className:"h-4 w-4 text-green-500",title:"Verified User"})]})]}),a.jsx($n,{className:"h-5 w-5 text-green-500",title:"Payment Received"})]},W.user_id))})]})]}),a.jsx(C,{})]})},BM=()=>{const{leagues:t}=n1(),[e,n]=T.useState(null),[r,s]=T.useState(new Set);if(!t||t.length===0)return a.jsx("div",{className:"text-center text-gray-400 py-4",children:"No leagues found"});const i=o=>{s(l=>new Set([...l,o]))};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:t.map(o=>a.jsx("div",{className:`bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4 border border-purple-300 
              dark:border-purple-500/20 hover:border-purple-400 dark:hover:border-purple-500/40 
              transition-all cursor-pointer hover:bg-purple-200 dark:hover:bg-purple-900/40`,onClick:()=>n(o),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[o.avatar&&a.jsx("img",{src:`https://sleepercdn.com/avatars/${o.avatar}`,alt:o.name,className:"w-12 h-12 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:o.name}),r.has(o.league_id)&&a.jsx(ol,{className:"h-5 w-5 text-green-500"})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.total_rosters," participants • Season ",o.season]})]})]})},o.league_id))}),e&&a.jsx($M,{league:e,onClose:()=>n(null),onGroupCreated:i,isConverted:r.has(e.league_id)})]})},zM=({league:t,onClose:e,onGroupCreated:n})=>{var l,u,d,h,p;const{currentUser:r}=_e(),[s,i]=Sn.useState(!1),o=async()=>{if(!(!r||!t))try{i(!0);const g={name:t.name,emoji:"🏈",coOwners:[r.uid],members:[],platform:"espn"};await zn.createGroup(g,r.uid),n(),e()}catch(g){console.error("Error creating group:",g)}finally{i(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[#d6b4fc] p-8 rounded-2xl max-w-2xl w-full mx-4 relative border border-purple-300",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-purple-800 hover:text-purple-900",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:"/images/espnFantasy.png",alt:"ESPN Fantasy",className:"w-16 h-16 rounded-full object-cover bg-white"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-purple-900",children:[(t==null?void 0:t.isCommissioner)&&a.jsx(td,{className:"inline-block h-5 w-5 text-yellow-600 mr-2"}),(t==null?void 0:t.name)||"League Details"]}),a.jsx("p",{className:"text-purple-800",children:"Season 2023"})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Total Teams"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:(t==null?void 0:t.leagueSize)||0})]}),a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Buy-in Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["$",(t==null?void 0:t.buyInAmount)||0]})]}),a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg col-span-2",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800 mb-2",children:"Prize Structure"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"1st Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((l=t==null?void 0:t.payouts)==null?void 0:l.first)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"2nd Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((u=t==null?void 0:t.payouts)==null?void 0:u.second)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"3rd Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((d=t==null?void 0:t.payouts)==null?void 0:d.third)||0]})]}),((h=t==null?void 0:t.payouts)==null?void 0:h.fourth)>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"4th Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",(p=t==null?void 0:t.payouts)==null?void 0:p.fourth]})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[(t==null?void 0:t.wantToInvest)&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"League dues will be invested throughout the season"})]}),(t==null?void 0:t.convertToSleeper)&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"Converting to Sleeper (+$50 to league pot)"})]}),(t==null?void 0:t.bountyToLeaguePot)&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"$10 referral bounty added to league pot"})]})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:o,disabled:s,className:`w-full px-6 py-3 bg-purple-800 text-white rounded-lg hover:bg-purple-900 
              transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:[a.jsx(Rn,{className:"h-5 w-5"}),a.jsx("span",{children:s?"Creating...":"Create Bankroll Group"})]})})]})})},px=()=>{const{leagues:t,fetchLeagues:e,isLoading:n,error:r}=rg(),{user:s}=_e(),[i,o]=T.useState(null),[l,u]=T.useState(new Set);T.useEffect(()=>{s&&e()},[s]);const d=h=>{u(p=>new Set([...p,h]))};return n?a.jsx("div",{className:"flex justify-center items-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):r?a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[a.jsx("strong",{className:"font-bold",children:"Error!"}),a.jsxs("span",{className:"block sm:inline",children:[" ",r]})]}):!t||t.length===0?a.jsx("div",{className:"text-center text-gray-400 py-4",children:"No ESPN leagues added yet."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:t.map(h=>a.jsx("div",{className:`bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4 border border-purple-300 
              dark:border-purple-500/20 hover:border-purple-400 dark:hover:border-purple-500/40 
              transition-all cursor-pointer hover:bg-purple-200 dark:hover:bg-purple-900/40`,onClick:()=>o(h),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:"/images/espnFantasy.png",alt:"ESPN Fantasy",className:"w-12 h-12 rounded-full object-cover bg-white"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[h.isCommissioner?"👑 ":"",h.name||"League Details"]}),l.has(h.id)&&a.jsx(ol,{className:"h-5 w-5 text-green-500"})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.leagueSize," participants • Season 2023"]})]})]})},h.id))}),i&&a.jsx(zM,{league:i,onClose:()=>o(null),onGroupCreated:()=>d(i.id)})]})},qM=({league:t,onClose:e,onGroupCreated:n})=>{var l,u,d,h,p;const{currentUser:r}=_e(),[s,i]=Sn.useState(!1),o=async()=>{if(!(!r||!t))try{i(!0);const g={name:t.name,emoji:"🏈",coOwners:[r.uid],members:[],platform:"yahoo"};await zn.createGroup(g,r.uid),n(),e()}catch(g){console.error("Error creating group:",g)}finally{i(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[#d6b4fc] p-8 rounded-2xl max-w-2xl w-full mx-4 relative border border-purple-300",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-purple-800 hover:text-purple-900",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:"/images/yahoofantasy.png",alt:"Yahoo Fantasy",className:"w-16 h-16 rounded-full object-cover bg-white"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-purple-900",children:[(t==null?void 0:t.isCommissioner)&&a.jsx(td,{className:"inline-block h-5 w-5 text-yellow-600 mr-2"}),(t==null?void 0:t.name)||"League Details"]}),a.jsx("p",{className:"text-purple-800",children:"Season 2023"})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Total Teams"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:(t==null?void 0:t.leagueSize)||0})]}),a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Buy-in Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["$",(t==null?void 0:t.buyInAmount)||0]})]}),a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg col-span-2",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800 mb-2",children:"Prize Structure"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"1st Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((l=t==null?void 0:t.payouts)==null?void 0:l.first)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"2nd Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((u=t==null?void 0:t.payouts)==null?void 0:u.second)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"3rd Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((d=t==null?void 0:t.payouts)==null?void 0:d.third)||0]})]}),((h=t==null?void 0:t.payouts)==null?void 0:h.fourth)>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"4th Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",(p=t==null?void 0:t.payouts)==null?void 0:p.fourth]})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[(t==null?void 0:t.wantToInvest)&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"League dues will be invested throughout the season"})]}),(t==null?void 0:t.convertToSleeper)&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"Converting to Sleeper (+$50 to league pot)"})]}),(t==null?void 0:t.bountyToLeaguePot)&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"$10 referral bounty added to league pot"})]})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:o,disabled:s,className:`w-full px-6 py-3 bg-purple-800 text-white rounded-lg hover:bg-purple-900 
              transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:[a.jsx(Rn,{className:"h-5 w-5"}),a.jsx("span",{children:s?"Creating...":"Create Bankroll Group"})]})})]})})},mx=()=>{const{leagues:t,fetchLeagues:e,isLoading:n,error:r}=sg(),{user:s}=_e(),[i,o]=T.useState(null),[l,u]=T.useState(new Set);T.useEffect(()=>{s&&e()},[s]);const d=h=>{u(p=>new Set([...p,h]))};return n?a.jsx("div",{className:"flex justify-center items-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"})}):r?a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[a.jsx("strong",{className:"font-bold",children:"Error!"}),a.jsxs("span",{className:"block sm:inline",children:[" ",r]})]}):!t||t.length===0?a.jsx("div",{className:"text-center text-gray-400 py-4",children:"No Yahoo leagues added yet."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:t.map(h=>a.jsx("div",{className:`bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4 border border-purple-300 
              dark:border-purple-500/20 hover:border-purple-400 dark:hover:border-purple-500/40 
              transition-all cursor-pointer hover:bg-purple-200 dark:hover:bg-purple-900/40`,onClick:()=>o(h),children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:"/images/yahoofantasy.png",alt:"Yahoo Fantasy",className:"w-12 h-12 rounded-full object-cover bg-white"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[h.isCommissioner?"👑 ":"",h.name||"League Details"]}),l.has(h.id)&&a.jsx(ol,{className:"h-5 w-5 text-green-500"})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[h.leagueSize," participants • Season 2023"]})]})]})},h.id))}),i&&a.jsx(qM,{league:i,onClose:()=>o(null),onGroupCreated:()=>d(i.id)})]})},WM=({league:t,onClose:e,onGroupCreated:n,isCreating:r=!1})=>{var M,N,_,I,C,j,R,A;const{createLeague:s,isLoading:i,error:o}=rg(),{currentUser:l}=_e(),[u,d]=T.useState(1),[h,p]=T.useState({name:(t==null?void 0:t.name)||"",isCommissioner:(t==null?void 0:t.isCommissioner)||null,leagueSize:(t==null?void 0:t.leagueSize)||"",hasBuyIn:(t==null?void 0:t.hasBuyIn)||null,buyInAmount:(t==null?void 0:t.buyInAmount)||"",payouts:{first:((M=t==null?void 0:t.payouts)==null?void 0:M.first)||"",second:((N=t==null?void 0:t.payouts)==null?void 0:N.second)||"",third:((_=t==null?void 0:t.payouts)==null?void 0:_.third)||"",fourth:((I=t==null?void 0:t.payouts)==null?void 0:I.fourth)||""},hasWeeklyPayouts:(t==null?void 0:t.hasWeeklyPayouts)||null,weeklyPayoutDetails:(t==null?void 0:t.weeklyPayoutDetails)||"",wantToInvest:(t==null?void 0:t.wantToInvest)||null,invitedUsers:(t==null?void 0:t.invitedUsers)||Array(16).fill(""),convertToSleeper:(t==null?void 0:t.convertToSleeper)||null,bountyToLeaguePot:(t==null?void 0:t.bountyToLeaguePot)||null});T.useEffect(()=>(document.body.classList.add("modal-open"),()=>{document.body.classList.remove("modal-open")}),[]);const g=(q,be)=>{p(Z=>({...Z,[q]:be}))},v=(q,be)=>{p(Z=>({...Z,payouts:{...Z.payouts,[q]:be}}))},E=()=>{u===1&&!h.name.trim()||d(q=>q+1)},S=()=>{d(q=>q-1)},k=async()=>{if(l)try{const q={name:h.name,emoji:"🏈",coOwners:[l.uid],members:[],platform:"espn"};await zn.createGroup(q,l.uid),n&&n(),e()}catch(q){console.error("Error creating group:",q)}},x=async()=>{try{if(!(l!=null&&l.uid))throw new Error("You must be logged in to create a league");if(!h.name.trim())throw new Error("League name is required");const q=h.invitedUsers.slice(0,h.leagueSize).filter(Z=>Z.trim()!==""),be={userId:l.uid,platform:"espn",status:"pending",createdAt:new Date().toISOString(),name:h.name.trim(),isCommissioner:h.isCommissioner,leagueSize:parseInt(h.leagueSize,10),hasBuyIn:h.hasBuyIn,buyInAmount:h.hasBuyIn?parseFloat(h.buyInAmount):0,payouts:{first:parseFloat(h.payouts.first)||0,second:parseFloat(h.payouts.second)||0,third:parseFloat(h.payouts.third)||0,fourth:parseFloat(h.payouts.fourth)||0},hasWeeklyPayouts:h.hasWeeklyPayouts,weeklyPayoutDetails:h.hasWeeklyPayouts?h.weeklyPayoutDetails:"",wantToInvest:h.wantToInvest,invitedUsers:q,convertToSleeper:h.convertToSleeper,bountyToLeaguePot:h.bountyToLeaguePot};await s(be),await k(),e()}catch(q){console.error("Error creating league:",q)}},y=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-purple-900",children:"League Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"League Name"}),a.jsx("input",{type:"text",value:h.name,onChange:q=>g("name",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter league name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Are you the commissioner?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>g("isCommissioner",!0),className:`px-4 py-2 rounded-lg ${h.isCommissioner===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>g("isCommissioner",!1),className:`px-4 py-2 rounded-lg ${h.isCommissioner===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"No"})]})]})]}),b=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-purple-900",children:"League Size & Buy-in"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Number of Teams"}),a.jsx("input",{type:"number",value:h.leagueSize,onChange:q=>g("leagueSize",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter number of teams",min:"4",max:"16"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Does your league have a buy-in?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>g("hasBuyIn",!0),className:`px-4 py-2 rounded-lg ${h.hasBuyIn===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>g("hasBuyIn",!1),className:`px-4 py-2 rounded-lg ${h.hasBuyIn===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"No"})]})]}),h.hasBuyIn&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Buy-in Amount ($)"}),a.jsx("input",{type:"number",value:h.buyInAmount,onChange:q=>g("buyInAmount",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter buy-in amount",min:"0"})]})]}),P=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-purple-900",children:"Payout Structure"}),h.hasBuyIn&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"1st Place Prize ($)"}),a.jsx("input",{type:"number",value:h.payouts.first,onChange:q=>v("first",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter 1st place prize",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"2nd Place Prize ($)"}),a.jsx("input",{type:"number",value:h.payouts.second,onChange:q=>v("second",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter 2nd place prize",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"3rd Place Prize ($)"}),a.jsx("input",{type:"number",value:h.payouts.third,onChange:q=>v("third",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter 3rd place prize",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"4th Place Prize ($)"}),a.jsx("input",{type:"number",value:h.payouts.fourth,onChange:q=>v("fourth",q.target.value),className:"w-full px-4 py-2 rounded-lg border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter 4th place prize",min:"0"})]})]})]}),O=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-purple-900",children:"Additional Options"}),h.hasBuyIn&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Would you like to invest your league dues throughout the season?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>g("wantToInvest",!0),className:`px-4 py-2 rounded-lg ${h.wantToInvest===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>g("wantToInvest",!1),className:`px-4 py-2 rounded-lg ${h.wantToInvest===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"No"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Would you like to convert your league to Sleeper? (+$50 to league pot)"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>g("convertToSleeper",!0),className:`px-4 py-2 rounded-lg ${h.convertToSleeper===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>g("convertToSleeper",!1),className:`px-4 py-2 rounded-lg ${h.convertToSleeper===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"No"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-purple-900 mb-2",children:"Add $10 referral bounty to league pot?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>g("bountyToLeaguePot",!0),className:`px-4 py-2 rounded-lg ${h.bountyToLeaguePot===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>g("bountyToLeaguePot",!1),className:`px-4 py-2 rounded-lg ${h.bountyToLeaguePot===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800"}`,children:"No"})]})]})]});return!r&&t?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[#d6b4fc] p-8 rounded-2xl max-w-2xl w-full mx-4 relative border border-purple-300",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-purple-800 hover:text-purple-900",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:"/images/espnFantasy.png",alt:"ESPN Fantasy",className:"w-16 h-16 rounded-full object-cover bg-white"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-purple-900",children:[t.isCommissioner&&a.jsx(td,{className:"inline-block h-5 w-5 text-yellow-600 mr-2"}),t.name]}),a.jsx("p",{className:"text-purple-800",children:"Season 2023"})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Total Teams"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:t.leagueSize})]}),a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800",children:"Buy-in Amount"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["$",t.buyInAmount||0]})]}),a.jsxs("div",{className:"bg-white/80 p-4 rounded-lg col-span-2",children:[a.jsx("h3",{className:"text-sm font-medium text-purple-800 mb-2",children:"Prize Structure"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"1st Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((C=t.payouts)==null?void 0:C.first)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"2nd Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((j=t.payouts)==null?void 0:j.second)||0]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"3rd Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",((R=t.payouts)==null?void 0:R.third)||0]})]}),((A=t.payouts)==null?void 0:A.fourth)>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-purple-900",children:"4th Place:"}),a.jsxs("span",{className:"font-bold text-purple-900",children:["$",t.payouts.fourth]})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[t.wantToInvest&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"League dues will be invested throughout the season"})]}),t.convertToSleeper&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"Converting to Sleeper (+$50 to league pot)"})]}),t.bountyToLeaguePot&&a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 bg-white/80 p-3 rounded-lg",children:[a.jsx($n,{className:"h-5 w-5"}),a.jsx("span",{children:"$10 referral bounty added to league pot"})]})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:k,className:`w-full px-6 py-3 bg-purple-800 text-white rounded-lg hover:bg-purple-900 
                transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:[a.jsx(Rn,{className:"h-5 w-5"}),a.jsx("span",{children:"Create Bankroll Group"})]})})]})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[#d6b4fc] p-8 rounded-2xl max-w-2xl w-full mx-4 relative border border-purple-300",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-purple-800 hover:text-purple-900",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsxs("div",{className:"p-8",children:[a.jsx("div",{className:"flex justify-between mb-8",children:[1,2,3,4].map(q=>a.jsx("div",{className:`w-1/4 h-2 rounded-full mx-1 ${q<=u?"bg-purple-800":"bg-white/80"}`},q))}),o&&a.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg border border-red-300",children:o}),a.jsxs("form",{onSubmit:q=>q.preventDefault(),children:[u===1&&y(),u===2&&b(),u===3&&P(),u===4&&O(),a.jsxs("div",{className:"flex justify-between mt-8",children:[u>1&&a.jsx("button",{type:"button",onClick:S,className:"px-6 py-2 bg-white/80 text-purple-800 rounded-lg hover:bg-white transition-colors",children:"Back"}),u<4?a.jsx("button",{type:"button",onClick:E,disabled:u===1&&!h.name.trim(),className:"px-6 py-2 bg-purple-800 text-white rounded-lg hover:bg-purple-900 transition-colors ml-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}):a.jsx("button",{type:"button",onClick:x,disabled:i||!h.name.trim(),className:"px-6 py-2 bg-purple-800 text-white rounded-lg hover:bg-purple-900 transition-colors ml-auto disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Submitting...":"Submit"})]})]})]})]})})},HM=({onClose:t})=>{const{createLeague:e,isLoading:n,error:r}=sg(),{currentUser:s}=_e(),[i,o]=T.useState(1),[l,u]=T.useState({name:"",isCommissioner:null,leagueSize:"",hasBuyIn:null,buyInAmount:"",payouts:{first:"",second:"",third:"",fourth:""},hasWeeklyPayouts:null,weeklyPayoutDetails:"",wantToInvest:null,invitedUsers:Array(16).fill(""),convertToSleeper:null,bountyToLeaguePot:null});T.useEffect(()=>(document.body.classList.add("modal-open"),()=>{document.body.classList.remove("modal-open")}),[]);const d=(y,b)=>{u(P=>({...P,[y]:b}))},h=(y,b)=>{u(P=>({...P,payouts:{...P.payouts,[y]:b}}))},p=()=>{i===1&&!l.name.trim()||o(y=>y+1)},g=()=>{o(y=>y-1)},v=async()=>{try{if(!(s!=null&&s.uid))throw new Error("You must be logged in to create a league");if(!l.name.trim())throw new Error("League name is required");const y=l.invitedUsers.slice(0,l.leagueSize).filter(P=>P.trim()!==""),b={userId:s.uid,platform:"yahoo",status:"pending",createdAt:new Date().toISOString(),name:l.name.trim(),isCommissioner:l.isCommissioner,leagueSize:parseInt(l.leagueSize,10),hasBuyIn:l.hasBuyIn,buyInAmount:l.hasBuyIn?parseFloat(l.buyInAmount):0,payouts:{first:parseFloat(l.payouts.first)||0,second:parseFloat(l.payouts.second)||0,third:parseFloat(l.payouts.third)||0,fourth:parseFloat(l.payouts.fourth)||0},hasWeeklyPayouts:l.hasWeeklyPayouts,weeklyPayoutDetails:l.hasWeeklyPayouts?l.weeklyPayoutDetails:"",wantToInvest:l.wantToInvest,invitedUsers:y,convertToSleeper:l.convertToSleeper,bountyToLeaguePot:l.bountyToLeaguePot};console.log("Creating league with data:",b),await e(b),t()}catch(y){console.error("Error creating league:",y)}},E=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-purple-900",children:"League Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 text-purple-900",children:"League Name"}),a.jsx("input",{type:"text",value:l.name,onChange:y=>d("name",y.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/80 border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 text-purple-900 placeholder-purple-400",placeholder:"Enter league name",required:!0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-purple-900",children:"Are you the commissioner?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>d("isCommissioner",!0),className:`px-4 py-2 rounded-lg ${l.isCommissioner===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>d("isCommissioner",!1),className:`px-4 py-2 rounded-lg ${l.isCommissioner===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"No"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 text-purple-900",children:"How many people are in your league?"}),a.jsx("input",{type:"number",min:"4",max:"16",value:l.leagueSize,onChange:y=>d("leagueSize",y.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/80 border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 text-purple-900 placeholder-purple-400",placeholder:"Enter number (4-16)"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-purple-900",children:"Is there a buy-in to the league?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>d("hasBuyIn",!0),className:`px-4 py-2 rounded-lg ${l.hasBuyIn===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>d("hasBuyIn",!1),className:`px-4 py-2 rounded-lg ${l.hasBuyIn===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"No"})]})]}),l.hasBuyIn&&a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 text-purple-900",children:"Buy-in amount per person"}),a.jsx("input",{type:"number",value:l.buyInAmount,onChange:y=>d("buyInAmount",y.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/80 border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 text-purple-900 placeholder-purple-400",placeholder:"Enter amount"})]})]})]}),S=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-purple-900",children:"Payout Structure"}),a.jsxs("div",{className:"space-y-4",children:[["first","second","third","fourth"].map(y=>a.jsxs("div",{children:[a.jsxs("label",{className:"block mb-2 text-purple-900",children:[y.charAt(0).toUpperCase()+y.slice(1)," Place Payout"]}),a.jsx("input",{type:"number",value:l.payouts[y],onChange:b=>h(y,b.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/80 border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 text-purple-900 placeholder-purple-400",placeholder:"Enter amount"})]},y)),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-purple-900",children:"Do you do weekly payouts?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>d("hasWeeklyPayouts",!0),className:`px-4 py-2 rounded-lg ${l.hasWeeklyPayouts===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>d("hasWeeklyPayouts",!1),className:`px-4 py-2 rounded-lg ${l.hasWeeklyPayouts===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"No"})]})]}),l.hasWeeklyPayouts&&a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 text-purple-900",children:"Weekly Payout Details"}),a.jsx("textarea",{value:l.weeklyPayoutDetails,onChange:y=>d("weeklyPayoutDetails",y.target.value),className:"w-full px-4 py-2 rounded-lg bg-white/80 border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 text-purple-900 placeholder-purple-400",placeholder:"Describe your weekly payout structure...",rows:3})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-purple-900",children:"Do you want to invest your league dues throughout the season?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>d("wantToInvest",!0),className:`px-4 py-2 rounded-lg ${l.wantToInvest===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>d("wantToInvest",!1),className:`px-4 py-2 rounded-lg ${l.wantToInvest===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"No"})]})]})]})]}),k=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-purple-900",children:"Invite League Members"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-purple-800",children:["We have setup placeholders for ",l.leagueSize," people"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.invitedUsers.slice(0,l.leagueSize).map((y,b)=>a.jsxs("div",{children:[a.jsxs("label",{className:"block mb-2 text-purple-900",children:["Member ",b+1]}),a.jsx("input",{type:"email",value:y,onChange:P=>{const O=[...l.invitedUsers];O[b]=P.target.value,d("invitedUsers",O)},className:"w-full px-4 py-2 rounded-lg bg-white/80 border border-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 text-purple-900 placeholder-purple-400",placeholder:"Enter email address"})]},b))})]})]}),x=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-purple-900",children:"Additional Options"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-purple-900",children:"Would you like to convert your league to Sleeper fantasy for a free $50 to the league pot?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>d("convertToSleeper",!0),className:`px-4 py-2 rounded-lg ${l.convertToSleeper===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>d("convertToSleeper",!1),className:`px-4 py-2 rounded-lg ${l.convertToSleeper===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"No"}),a.jsx("button",{type:"button",onClick:()=>d("convertToSleeper","notSure"),className:`px-4 py-2 rounded-lg ${l.convertToSleeper==="notSure"?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Not Sure Yet"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-2 text-purple-900",children:"Would you like the $10 referral bounty to go towards the league pot?"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("button",{type:"button",onClick:()=>d("bountyToLeaguePot",!0),className:`px-4 py-2 rounded-lg ${l.bountyToLeaguePot===!0?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Yes"}),a.jsx("button",{type:"button",onClick:()=>d("bountyToLeaguePot",!1),className:`px-4 py-2 rounded-lg ${l.bountyToLeaguePot===!1?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"No"}),a.jsx("button",{type:"button",onClick:()=>d("bountyToLeaguePot","notSure"),className:`px-4 py-2 rounded-lg ${l.bountyToLeaguePot==="notSure"?"bg-purple-800 text-white":"bg-white/80 text-purple-800 hover:bg-white"}`,children:"Not Sure Yet"})]})]})]})]});return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-[#d6b4fc] p-8 rounded-2xl max-w-2xl w-full mx-4 relative border border-purple-300",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-purple-800 hover:text-purple-900",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsxs("div",{className:"p-8",children:[a.jsx("div",{className:"flex justify-between mb-8",children:[1,2,3,4].map(y=>a.jsx("div",{className:`w-1/4 h-2 rounded-full mx-1 ${y<=i?"bg-purple-800":"bg-white/80"}`},y))}),r&&a.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded-lg border border-red-300",children:r}),a.jsxs("form",{onSubmit:y=>y.preventDefault(),children:[i===1&&E(),i===2&&S(),i===3&&k(),i===4&&x(),a.jsxs("div",{className:"flex justify-between mt-8",children:[i>1&&a.jsx("button",{type:"button",onClick:g,className:"px-6 py-2 bg-white/80 text-purple-800 rounded-lg hover:bg-white transition-colors",children:"Back"}),i<4?a.jsx("button",{type:"button",onClick:p,disabled:i===1&&!l.name.trim(),className:"px-6 py-2 bg-purple-800 text-white rounded-lg hover:bg-purple-900 transition-colors ml-auto disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"}):a.jsx("button",{type:"button",onClick:v,disabled:n||!l.name.trim(),className:"px-6 py-2 bg-purple-800 text-white rounded-lg hover:bg-purple-900 transition-colors ml-auto disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Submitting...":"Submit"})]})]})]})]})})},GM="/images/BankrollLogoTransparent.png",KM=()=>a.jsxs("div",{className:"relative py-12",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-purple-500/20 via-purple-500/10 to-transparent"}),a.jsxs("div",{className:"relative flex items-center justify-center space-x-16",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-purple-500/30 via-purple-500/20 to-transparent rounded-full animate-pulse"}),a.jsx("div",{className:"w-56 h-56 relative flex items-center justify-center bg-gray-900/50 rounded-full p-6",children:a.jsx("img",{src:GM,alt:"Bankroll",className:"w-full h-full object-contain relative z-10"})}),a.jsx("div",{className:"absolute top-1/2 right-0 h-0.5 w-16 translate-x-full",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-transparent animate-pulse"})})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"absolute inset-0 bg-purple-500/30 blur-xl rounded-full"}),a.jsx("div",{className:"relative bg-gray-900/50 p-6 rounded-full",children:a.jsx(kO,{className:"h-12 w-12 text-purple-400 animate-sync-spin"})})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-purple-500/30 via-purple-500/20 to-transparent rounded-full animate-pulse"}),a.jsx("div",{className:"w-56 h-56 relative flex items-center justify-center bg-gray-900/50 rounded-full p-6",children:a.jsx("img",{src:"/images/betespn.png",alt:"ESPN",className:"w-full h-full object-contain relative z-10"})}),a.jsx("div",{className:"absolute top-1/2 left-0 h-0.5 w-16 -translate-x-full",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-l from-purple-500 to-transparent animate-pulse"})})]})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-transparent via-purple-500/5 to-transparent animate-pulse"})]}),QM=()=>{const[t,e]=T.useState("all"),[n,r]=T.useState(!1),[s,i]=T.useState(!1),[o,l]=T.useState(!1),[u,d]=T.useState(""),{user:h,fetchUser:p,isLoading:g,errorMessage:v,disconnectSleeper:E}=n1(),{leagues:S}=rg(),{leagues:k}=sg(),x=[{id:"all",label:"All Leagues"},{id:"sleeper",label:"Sleeper"},{id:"espn",label:"ESPN"},{id:"yahoo",label:"Yahoo"}],y=T.useCallback(()=>{i(!0)},[]),b=T.useCallback(()=>{i(!1)},[]),P=T.useCallback(()=>{l(!0)},[]),O=T.useCallback(()=>{l(!1)},[]),M=T.useCallback(()=>{r(!0)},[]),N=T.useCallback(()=>{r(!1)},[]),_=async q=>{q.preventDefault(),await p(u),v||(N(),d(""))},I=()=>{window.confirm("Are you sure you want to disconnect your Sleeper account?")&&E()},C=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between bg-purple-900/30 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[h.avatar&&a.jsx("img",{src:`https://sleepercdn.com/avatars/${h.avatar}`,alt:h.username,className:"w-10 h-10 rounded-full"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-white font-medium",children:["Connected as: ",h.username]}),a.jsxs("p",{className:"text-sm text-gray-400",children:["User ID: ",h.user_id]})]})]}),a.jsxs("button",{onClick:I,className:`flex items-center space-x-2 px-3 py-2 bg-red-500/20 text-red-400 
            rounded-lg hover:bg-red-500/30 transition-colors`,children:[a.jsx(l1,{className:"h-4 w-4"}),a.jsx("span",{children:"Disconnect"})]})]}),a.jsx(BM,{})]}),j=()=>S&&S.length>0?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-white",children:"ESPN Leagues"}),a.jsxs("button",{onClick:y,className:`flex items-center space-x-2 px-4 py-2 bg-purple-900/50 text-white 
                rounded-lg hover:bg-purple-900/70 transition-colors`,children:[a.jsx(Rn,{className:"h-4 w-4"}),a.jsx("span",{children:"Add League"})]})]}),a.jsx(px,{})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-8",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(KM,{}),a.jsx("h3",{className:"text-xl font-medium text-white mt-6",children:"Add Your First ESPN League"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your ESPN league manually and invite your leaguemates"})]}),a.jsxs("div",{className:"w-full max-w-md text-center space-y-4",children:[a.jsxs("button",{onClick:y,className:`group px-6 py-3 bg-purple-900/50 text-white rounded-lg hover:bg-purple-900/70 
              transition-all duration-200 flex items-center justify-center space-x-2 w-full`,children:[a.jsx(Rn,{className:"h-5 w-5"}),a.jsx("span",{children:"Add Your League Manually"})]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your league and add leaguemates manually"})]})]}),R=()=>k&&k.length>0?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-white",children:"Yahoo Leagues"}),a.jsxs("button",{onClick:P,className:`flex items-center space-x-2 px-4 py-2 bg-purple-900/50 text-white 
                rounded-lg hover:bg-purple-900/70 transition-colors`,children:[a.jsx(Rn,{className:"h-4 w-4"}),a.jsx("span",{children:"Add League"})]})]}),a.jsx(mx,{})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-8",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-12",children:[a.jsx("div",{className:"w-32 h-32 flex items-center justify-center",children:a.jsx("img",{src:"/images/BankrollLogoTransparent.png",alt:"Bankroll",className:"w-full h-full object-contain"})}),a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-purple-900/30 rounded-full",children:a.jsx(DO,{className:"w-8 h-8 text-purple-400"})}),a.jsx("div",{className:"w-32 h-32 flex items-center justify-center bg-white rounded-full",children:a.jsx("img",{src:"/images/yahoofantasy.png",alt:"Yahoo Fantasy",className:"w-full h-full object-contain"})})]}),a.jsx("h3",{className:"text-xl font-medium text-white mt-6",children:"Add Your First Yahoo League"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your Yahoo league manually and invite your leaguemates"})]}),a.jsxs("div",{className:"w-full max-w-md text-center space-y-4",children:[a.jsxs("button",{onClick:P,className:`group px-6 py-3 bg-purple-900/50 text-white rounded-lg hover:bg-purple-900/70 
              transition-all duration-200 flex items-center justify-center space-x-2 w-full`,children:[a.jsx(Rn,{className:"h-5 w-5"}),a.jsx("span",{children:"Add Your League Manually"})]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Create your league and add leaguemates manually"})]})]}),A=q=>q==="all"?a.jsxs("div",{className:"space-y-6",children:[h&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Connected Platforms"}),C()]}),S&&S.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"ESPN Leagues"}),a.jsx(px,{})]}),k&&k.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Yahoo Leagues"}),a.jsx(mx,{})]}),!h&&!(S!=null&&S.length)&&!(k!=null&&k.length)&&a.jsx("div",{className:"text-center text-gray-400 py-12",children:"Connect your fantasy platforms to view all your leagues in one place"})]}):q==="sleeper"?h?C():a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[a.jsx("div",{className:"p-4 rounded-full bg-purple-900/30",children:a.jsx(RO,{className:"h-8 w-8 text-purple-400"})}),a.jsx("button",{onClick:M,className:`px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 
              transition-all duration-200 transform hover:scale-105 shadow-lg 
              hover:shadow-green-500/25`,children:"Connect Sleeper Account"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Import all your Sleeper fantasy leagues"})]}):q==="espn"?j():q==="yahoo"?R():null;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-900/50 border border-purple-500/20 rounded-lg overflow-hidden",children:[a.jsx("div",{className:"p-6",children:a.jsx("h2",{className:"text-xl font-medium text-purple-100",children:"My Leagues"})}),a.jsx("div",{className:"border-b border-purple-900/50",children:a.jsx("div",{className:"flex space-x-1 px-6",children:x.map(q=>a.jsx("button",{onClick:()=>e(q.id),className:`
                  px-4 py-2 rounded-t-lg text-sm font-medium transition-colors duration-200
                  ${t===q.id?"bg-purple-900/50 text-white border-b-2 border-green-500":"text-gray-400 hover:text-white hover:bg-purple-900/30"}
                `,children:q.label},q.id))})}),a.jsx("div",{className:"p-6",children:A(t)})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-purple-900/90 p-8 rounded-2xl max-w-md w-full mx-4 relative border border-purple-700",children:[a.jsx("button",{onClick:N,className:"absolute top-4 right-4 text-purple-300 hover:text-white",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Connect Sleeper Account"}),a.jsx("form",{onSubmit:_,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"Sleeper Username"}),a.jsx("input",{type:"text",id:"username",value:u,onChange:q=>d(q.target.value),className:`w-full px-4 py-2 bg-purple-800/50 border border-purple-600 rounded-lg 
                      focus:outline-none focus:ring-2 focus:ring-purple-500 text-white 
                      placeholder-gray-400`,placeholder:"Enter your Sleeper username"})]}),v&&a.jsx("p",{className:"text-red-400 text-sm",children:v}),a.jsx("button",{type:"submit",disabled:g,className:`w-full px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 
                    transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed`,children:g?"Connecting...":"Connect Account"})]})})]})}),s&&a.jsx(WM,{onClose:b,isCreating:!0}),o&&a.jsx(HM,{onClose:O})]})},YM=()=>{const[t,e]=T.useState("0"),[n,r]=T.useState(""),[s,i]=T.useState(""),o=l=>{const u=l.replace(/[^0-9]/g,"");e(u)};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"max-w-md mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Send Money"}),a.jsxs("div",{className:"flex items-center justify-center text-6xl font-bold text-white",children:[a.jsx(nd,{className:"h-12 w-12"}),a.jsx("input",{type:"text",value:t,onChange:l=>o(l.target.value),className:"w-40 bg-transparent text-center focus:outline-none",placeholder:"0"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"#username",className:"w-full p-4 rounded-lg bg-purple-900/30 border border-purple-500/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",value:s,onChange:l=>i(l.target.value),placeholder:"What's this for?",className:"w-full p-4 rounded-lg bg-purple-900/30 border border-purple-500/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("button",{className:"w-full py-3 rounded-full bg-white text-purple-900 font-medium hover:bg-gray-100 transition-colors",children:"Request"}),a.jsx("button",{className:"w-full py-3 rounded-full bg-purple-500 text-white font-medium hover:bg-purple-600 transition-colors",children:"Pay"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-white",children:"Payment Source"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ge,{className:"bg-white hover:shadow-lg transition-all duration-200 cursor-pointer",children:a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 rounded-full bg-blue-500",children:a.jsx(og,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Friends"}),a.jsx("div",{className:"text-sm text-gray-500",children:"0 friends"})]})]})})}),a.jsx(ge,{className:"bg-white hover:shadow-lg transition-all duration-200 cursor-pointer",children:a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 rounded-full bg-purple-500",children:a.jsx($O,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Groups"}),a.jsx("div",{className:"text-sm text-gray-500",children:"0 groups"})]})]})})})]})]})]}),a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center",children:a.jsxs("div",{className:"max-w-md mx-auto p-8 text-center",children:[a.jsx("div",{className:"mb-6 flex justify-center",children:a.jsx("div",{className:"w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center",children:a.jsx(a1,{className:"h-8 w-8 text-purple-500"})})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Coming Soon"}),a.jsx("p",{className:"text-gray-300",children:"The Send Money feature is currently under development. Stay tuned for updates!"})]})})]})};class XM{logEvent(e,n={}){try{_i&&ON(_i,e,{...n,timestamp:new Date().toISOString()})}catch{}}logClick(e,n,r,s=null){this.logEvent("user_click",{element_id:e,element_type:n,page_name:r,click_timestamp:new Date().toISOString(),user_id:(s==null?void 0:s.uid)||"anonymous",user_email:(s==null?void 0:s.email)||"anonymous",user_display_name:(s==null?void 0:s.displayName)||"anonymous"})}startSession(e){this.logEvent("session_start",{user_id:e,session_start_time:new Date().toISOString()}),_i&&iL(_i,{last_session_start:new Date().toISOString(),user_id:e})}endSession(e,n){this.logEvent("session_end",{user_id:e,session_end_time:new Date().toISOString(),session_duration:n})}logPlatformView(e,n,r){this.logEvent("platform_view",{platform_id:e,platform_name:n,category:r})}logPlatformVisit(e,n){this.logEvent("platform_visit",{platform_id:e,platform_name:n})}logPlatformConnect(e,n){this.logEvent("platform_connect",{platform_id:e,platform_name:n})}logSleeperConnect(e){this.logEvent("sleeper_connect",{username:e})}logSleeperDisconnect(){this.logEvent("sleeper_disconnect")}logSleeperLeagueView(e,n){this.logEvent("sleeper_league_view",{league_id:e,league_name:n})}logPageView(e,n){this.logEvent("page_view",{page_name:e,page_title:n,url:window.location.pathname})}logNotificationPermissionRequested(){this.logEvent("notification_permission_requested")}logNotificationPermissionGranted(){this.logEvent("notification_permission_granted")}logNotificationPermissionDenied(){this.logEvent("notification_permission_denied")}logNotificationSettingsUpdated(e){this.logEvent("notification_settings_updated",{email_enabled:e.emailEnabled,push_enabled:e.pushEnabled,categories:e.categories})}}const Qf=new XM,JM=({platform:t,onClose:e})=>{const[n,r]=T.useState(!1),s=()=>{if(Qf.logPlatformVisit(t.id,t.name),t.url){const o=window.open();o&&(o.opener=null,o.location=t.url)}},i=()=>{Qf.logPlatformConnect(t.id,t.name),r(!0)};return a.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-gradient-to-b from-purple-100 to-pink-100 rounded-3xl max-w-md w-full mx-auto relative overflow-hidden",children:[a.jsx("button",{onClick:e,className:"absolute top-4 left-4 z-10 bg-white/80 p-2 rounded-full hover:bg-white transition-colors",children:a.jsx(Ye,{className:"h-6 w-6 text-gray-600"})}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center pt-8",children:[a.jsx("div",{className:"w-24 h-24 mb-4",children:a.jsx("img",{src:t.logo,alt:t.name,className:"w-full h-full object-contain rounded-lg"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name})]}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-gray-600",children:["Legal States: ",t.legalStates||"Information not available"]})}),a.jsxs("div",{className:"bg-white/80 rounded-xl p-4 space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Promotion Details"}),a.jsx("p",{className:"text-gray-700",children:t.promoDetails||"No current promotions"}),t.restrictions&&a.jsxs("div",{className:"mt-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Restrictions"}),a.jsx("p",{className:"text-gray-600 text-sm",children:t.restrictions})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:s,className:`w-full py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 
                transition-colors duration-200 flex items-center justify-center space-x-2 group`,children:[a.jsxs("span",{children:["Visit ",t.name]}),a.jsx(PO,{className:"h-4 w-4 group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform"})]}),a.jsxs("button",{onClick:i,className:`w-full py-3 bg-yellow-400 text-gray-900 rounded-xl font-medium 
                hover:bg-yellow-500 transition-colors duration-200`,children:["Connect ",t.name]})]}),a.jsx("div",{className:"text-center text-sm text-gray-600 pt-4",children:a.jsx("p",{children:"Responsible Gaming: Please gamble responsibly. If you or someone you know has a gambling problem and wants help, call 1-800-522-4700"})})]})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-[60]",children:a.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 max-w-lg mx-4 relative border border-gray-700 shadow-2xl",children:[a.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-200 transition-colors",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsxs("div",{className:"text-center space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-20 h-20 bg-yellow-400/10 rounded-full flex items-center justify-center",children:a.jsx(BO,{className:"h-10 w-10 text-yellow-400"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Coming Soon!"}),a.jsxs("p",{className:"text-gray-400 text-lg",children:["Get ready for seamless transactions with ",t.name]})]}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsx("p",{className:"text-gray-300 text-lg",children:"We're building something special just for you:"}),a.jsxs("ul",{className:"text-gray-300 text-left space-y-3 max-w-md mx-auto",children:[a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsxs("span",{children:["Connect your ",t.name," account directly"]})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsx("span",{children:"Instant deposits with no hassle"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsx("span",{children:"Lightning-fast withdrawals"})]}),a.jsxs("li",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),a.jsx("span",{children:"Track all your gaming activity in one place"})]})]})]}),a.jsx("button",{onClick:()=>r(!1),className:`px-8 py-3 bg-gradient-to-r from-yellow-400 to-yellow-500 text-gray-900 rounded-xl 
                  font-semibold hover:from-yellow-500 hover:to-yellow-600 transition-all duration-200 
                  transform hover:scale-105`,children:"Can't Wait!"})]})]})})]})};class ZM{static async getImageUrl(e){try{return await kt.getStaticAssetUrl("platform-logos",e)}catch(n){return console.error(`Error getting platform image URL for ${e}:`,n),null}}static async uploadPlatformImage(e,n){try{return await kt.uploadStaticAsset(e,"platform-logos",n)}catch(r){throw console.error(`Error uploading platform image ${n}:`,r),r}}}const eV=()=>{const[t,e]=T.useState("CASINO"),[n,r]=T.useState(null),[s,i]=T.useState({}),[o,l]=T.useState(!0),u=[{id:"ALL",label:"ALL"},{id:"FANTASY",label:"FANTASY"},{id:"CASINO",label:"CASINO"},{id:"SPORTS BETTING",label:"SPORTS BETTING"},{id:"POKER",label:"POKER"}],d=[{id:"prizepicks",name:"PrizePicks (18+)",category:"FANTASY",imageFile:"prizepicks.png",legalStates:"AK, CA, FL, GA, IL, KS, KY, MN, NE, NM, NC, OK, OR, RI, SC, SD, TX, UT, VT, WI, WY",promoDetails:"Get 100% deposit match up to $100",restrictions:"First-time users only. Must be 18+",url:"https://app.prizepicks.com/sign-up?invite_code=WINDAILY"},{id:"draftkings",name:"DraftKings Fantasy (18+)",category:"FANTASY",imageFile:"draftkingsFantasy.png",legalStates:"Most US states",promoDetails:"New user bonus available",restrictions:"New users only. Must be 18+",url:"https://dkdfs.sng.link/Avkw3/ejal?_dl=draftkings%3A%2F%2Fgateway%3Fs%3D199744492&pcid=357597&psn=2003&pcn=xx&pscn=xx&pcrn=WDS&pscid=DFS&pcrid=xx&wpcid=357597&wpsrc=2003&wpcn=xx&wpscn=xx&wpcrn=WDS&wpscid=DFS&wpcrid=xx&_forward_params=1"},{id:"fanduel-fantasy",name:"FanDuel Fantasy (18+)",category:"FANTASY",imageFile:"fanduel.png",legalStates:"Most US states",promoDetails:"Special signup bonus",restrictions:"New users only. Must be 18+",url:"https://wlfanduelus.adsrv.eacdn.com/C.ashx?btag=a_15755b_56c_&affid=11359&siteid=15755&adid=56&c="},{id:"underdog",name:"Underdog Fantasy (18+)",category:"FANTASY",imageFile:"underdog.jpeg",legalStates:"Most US states",promoDetails:"Special welcome bonus",restrictions:"New users only. Must be 18+",url:"https://play.underdogfantasy.com/p-win-daily-sports"},{id:"myprize",name:"MyPrize Casino (18+)",category:"CASINO",imageFile:"myPrizeLogo.jpeg",legalStates:"Available in most US states",promoDetails:"Get 5000 free coins on signup",restrictions:"Must be 18+",url:"https://myprize.us/invite/bankroll"},{id:"betmgm",name:"BetMGM Casino (21+)",category:"CASINO",imageFile:"betmgm.png",legalStates:"MI, NJ, PA, WV",promoDetails:"100% deposit match up to $1000 + $25 free play",restrictions:"New customers only. Must be 21+",url:"https://mediaserver.betmgmpartners.com/renderBanner.do?zoneId=1728250"},{id:"caesarspalace",name:"Caesars Casino (21+)",category:"CASINO",imageFile:"caesarsCasino.png",legalStates:"MI, NJ, PA, WV",promoDetails:"100% deposit match up to $1000 + $10 free",restrictions:"New users only. Must be 21+",url:"https://wlwilliamhillus.adsrv.eacdn.com/C.ashx?btag=a_13325b_2658c_&affid=450&siteid=13325&adid=2658&c="},{id:"pokerstars",name:"PokerStars Casino (21+)",category:"CASINO",imageFile:"pokerstars.png",legalStates:"MI, NJ, PA",promoDetails:"$50 free play with first deposit",restrictions:"New players only. Must be 21+",url:"https://star-casino.pxf.io/c/3732491/1574555/14251"},{id:"wsop-casino",name:"WSOP Casino (21+)",category:"CASINO",imageFile:"WSOP.png",legalStates:"MI, NJ, PA",promoDetails:"Special welcome bonus for new players",restrictions:"New players only. Must be 21+",url:"https://www.wsop.com/casino/"},{id:"wsop-poker",name:"WSOP Poker (21+)",category:"POKER",imageFile:"WSOP.png",legalStates:"MI, NJ, PA",promoDetails:"Special poker welcome package",restrictions:"New players only. Must be 21+",url:"https://www.wsop.com/poker/"}];T.useEffect(()=>{(async()=>{l(!0);const v={};for(const E of d)try{const S=await ZM.getImageUrl(E.imageFile);S&&(v[E.id]=S)}catch(S){console.error(`Error loading image for ${E.id}:`,S)}i(v),l(!1)})()},[]);const h=g=>{Qf.logPlatformView(g.id,g.name,g.category),r(g)},p=t==="ALL"?d:d.filter(g=>g.category===t);return a.jsxs("div",{className:"min-h-screen p-6 bg-gray-900",children:[a.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:u.map(g=>a.jsx("button",{onClick:()=>e(g.id),className:`
              px-6 py-2 rounded-full text-sm font-medium transition-all duration-200
              ${t===g.id?"bg-yellow-400 text-gray-900":"bg-purple-900/30 text-white hover:bg-purple-900/50"}
            `,children:g.label},g.id))}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:p.map(g=>a.jsx(ge,{className:`hover:shadow-lg transition-all duration-200 cursor-pointer border-gray-700
              ${g.id==="myprize"?"bg-gradient-to-br from-yellow-300 via-yellow-400 to-yellow-500":"bg-gray-800"}`,onClick:()=>h(g),children:a.jsxs(Se,{className:"p-6 flex flex-col items-center justify-center min-h-[200px]",children:[a.jsx("div",{className:`w-24 h-24 mb-4 relative ${g.id==="myprize"?"bg-yellow-300/20 rounded-xl p-2":""}`,children:o?a.jsx("div",{className:"w-full h-full bg-gray-700 rounded-lg animate-pulse"}):s[g.id]?a.jsx("img",{src:s[g.id],alt:g.name,className:"w-full h-full object-contain rounded-lg",onError:v=>{const E=v.currentTarget.parentNode;if(E){const S=document.createElement("div");S.className="w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center",S.innerHTML=`<span class="text-xl font-bold text-gray-400">${g.name.charAt(0)}</span>`,E.replaceChild(S,v.currentTarget)}}}):a.jsx("div",{className:"w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xl font-bold text-gray-400",children:g.name.charAt(0)})})}),a.jsx("h3",{className:`text-center font-medium ${g.id==="myprize"?"text-gray-900":"text-white"}`,children:g.name})]})},g.id))}),n&&a.jsx(JM,{platform:{...n,logo:s[n.id]},onClose:()=>r(null)}),a.jsx("div",{className:"mt-8 text-center text-sm text-gray-300",children:"Responsible Gaming: Please gamble responsibly. If you or someone you know has a gambling problem and wants help, call 1-800-522-4700"})]})},gx="/images/profile_1.jpeg",tV=()=>{const{currentUser:t,logout:e,updateProfileImage:n}=_e(),[r,s]=T.useState(!1),[i,o]=T.useState(!1),[l,u]=T.useState(!1),[d,h]=T.useState([]),[p,g]=T.useState(!0),[v,E]=T.useState(!1),[S,k]=T.useState(null),[x,y]=T.useState(Date.now()),[b,P]=T.useState(!1),O=T.useRef(null),M=T.useRef(null),N=br();T.useEffect(()=>{const Z=z=>{M.current&&!M.current.contains(z.target)&&s(!1)};return document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[]),T.useEffect(()=>{(async()=>{if(t&&!t.profileImage)try{let z;do z=Math.floor(Math.random()*30)+1;while(z===26);let U;z===1||z===30?U=".jpeg":z===4||z===16?U=".jpg":U=".png";const K=`/images/profile_${z}${U}`;await n(t.uid,K),y(Date.now()),P(!1)}catch(z){console.error("Error initializing profile image:",z),P(!0)}})()},[t,n]),T.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{console.log("Fetching groups for user:",t.uid);const z=await zn.getUserGroups(t.uid);console.log("Fetched groups:",z);const U=Array.from(new Map(z.map(K=>[K.id,K])).values());h(U)}catch(z){console.error("Error fetching groups:",z)}finally{g(!1)}})()},[t==null?void 0:t.uid]);const _=async()=>{try{await e(),kt.clearCache(),N("/")}catch(Z){console.error("Error signing out:",Z)}},I=()=>{N("/create-group")},C=()=>{s(!1),N("/notifications")},j=Z=>{console.log("Navigating to group:",Z),N(`/group/${Z}`)},R=Z=>{console.error("Error loading profile image:",Z),P(!0),Z.target.onerror=null,Z.target.src=gx},A=async Z=>{const z=Z.target.files[0];if(z){k(null),E(!0),P(!1);try{if(!z.type.startsWith("image/"))throw new Error("Please upload an image file");if(z.size>5*1024*1024)throw new Error("Please upload an image smaller than 5MB");if(!(t!=null&&t.uid))throw new Error("User ID is not available");await n(t.uid,z),console.log("Profile image updated successfully"),y(Date.now()),k(null),kt.clearCache()}catch(U){console.error("Error uploading profile image:",U),k(U.message||"Failed to upload image. Please try again."),P(!0)}finally{E(!1),O.current&&(O.current.value="")}}},q=()=>t!=null&&t.profileImage?t.profileImage.includes("firebasestorage.googleapis.com")||t.profileImage.startsWith("/")?t.profileImage:`/${t.profileImage}`:gx,be=()=>a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 max-w-md mx-4 relative border border-gray-700",children:[a.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Coming Soon!"}),a.jsx("p",{className:"text-gray-300",children:"Direct transfers between users will be available soon! Stay tuned for this exciting feature."}),a.jsx("button",{onClick:()=>u(!1),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors mt-4",children:"Got it!"})]})]})});return a.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6 relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-700",children:b?a.jsx("div",{className:"w-full h-full bg-gray-600 flex items-center justify-center",children:a.jsx(og,{className:"w-8 h-8 text-gray-400"})}):a.jsx("img",{src:q(),alt:"Profile",className:"w-full h-full object-cover",onError:R},x)}),a.jsx("button",{onClick:()=>{var Z;return(Z=O.current)==null?void 0:Z.click()},className:"absolute bottom-0 right-0 bg-blue-500 rounded-full p-1 hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:v?a.jsx(Go,{className:"w-4 h-4 text-white animate-spin"}):a.jsx(CO,{className:"w-4 h-4 text-white"})}),a.jsx("input",{type:"file",ref:O,onChange:A,accept:"image/*",className:"hidden",disabled:v})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Profile"}),S&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:S})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative",children:[a.jsx(Gf,{className:"h-6 w-6 text-gray-400"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"3"})]}),a.jsxs("div",{className:"relative",ref:M,children:[a.jsx("button",{onClick:()=>s(!r),className:"relative p-2 hover:bg-gray-800 rounded-full transition-colors",children:a.jsx(VO,{className:"h-6 w-6 text-gray-400"})}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-gray-900 rounded-lg shadow-lg border border-gray-800 z-50",children:a.jsxs("div",{className:"py-2",children:[a.jsxs("button",{onClick:C,className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center space-x-3",children:[a.jsx(Gf,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Notifications"})]}),a.jsxs("button",{onClick:()=>{s(!1),N("/security")},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center space-x-3",children:[a.jsx(UO,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Security"})]}),a.jsxs("button",{onClick:()=>{s(!1),N("/payment-methods")},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center space-x-3",children:[a.jsx(jO,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Payment Methods"})]}),a.jsxs("button",{onClick:()=>{s(!1),N("/help")},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center space-x-3",children:[a.jsx(AO,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{children:"Help & Support"})]}),a.jsxs("button",{onClick:_,className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center space-x-3 text-red-500",children:[a.jsx(l1,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign Out"})]})]})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(ge,{className:"bg-gray-900 border-gray-800",children:a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Groups"}),a.jsxs("div",{className:"space-y-3",children:[p?a.jsx("p",{className:"text-gray-400",children:"Loading groups..."}):d.length>0?a.jsx("div",{className:"space-y-2",children:d.map(Z=>a.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer",onClick:()=>j(Z.id),children:[a.jsx("span",{className:"text-2xl",children:Z.emoji}),a.jsx("span",{className:"text-white",children:Z.name})]},`group-${Z.id}`))}):a.jsx("p",{className:"text-gray-400",children:"No groups yet"}),a.jsxs("button",{onClick:I,className:"w-full p-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(ig,{className:"w-4 h-4"}),a.jsx("span",{children:"Create Group"})]})]})]})}),a.jsx(ge,{className:"bg-gray-900 border-gray-800",children:a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Friends"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-gray-400",children:"No friends yet"}),a.jsx("button",{className:"w-full p-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Add Friends"})]})]})})]}),i&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx("div",{className:"max-w-md w-full mx-4",children:a.jsx(y1,{onClose:()=>o(!1)})})}),l&&a.jsx(be,{})]})};class ks{constructor(){this.baseURL="/api/meld"}static get shared(){return ks.instance||(ks.instance=new ks),ks.instance}getHeaders(){return new Headers({"Content-Type":"application/json"})}async getMeldConnectionUrl(e){const n=this.getHeaders(),r={externalCustomerId:e,products:["TRANSACTIONS","BALANCES"],optionalProducts:["IDENTIFIERS","OWNERS"],accountPreferenceOverride:{allowRedirect:!0}};try{const s=await fetch(`${this.baseURL}/link/token`,{method:"POST",headers:n,body:JSON.stringify(r)}),i=await s.text();console.log("Raw response:",i);let o;try{o=JSON.parse(i)}catch{throw console.error("Failed to parse response as JSON:",i),new Error(`Invalid response from server: ${i}`)}if(!s.ok)throw new Error(o.message||"Failed to get Meld connection URL");return o.widgetUrl}catch(s){throw console.error("Error in getMeldConnectionUrl:",s),s}}async getLinkedAccounts(e){const n=this.getHeaders();try{const r=await fetch(`${this.baseURL}/customers/${e}/accounts`,{method:"GET",headers:n}),s=await r.text();console.log("Raw response:",s);let i;try{i=JSON.parse(s)}catch{throw console.error("Failed to parse response as JSON:",s),new Error(`Invalid response from server: ${s}`)}if(!r.ok)throw new Error(i.message||"Failed to get linked accounts");return i.accounts||[]}catch(r){throw console.error("Error in getLinkedAccounts:",r),r}}}function nV({isOpen:t,onClose:e,currentUsername:n,onSave:r}){const[s,i]=T.useState(n||""),o=l=>{l.preventDefault(),r(s),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md relative border border-purple-500/20",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("div",{className:"mb-6 flex items-center justify-center",children:a.jsx("img",{src:"/images/venmo-icon.svg",alt:"Venmo",className:"w-16 h-16"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"Edit Venmo Username"}),a.jsx("p",{className:"text-gray-400 mb-6 text-center",children:"Enter your Venmo username below. Make sure to include the @ symbol."}),a.jsxs("form",{onSubmit:o,children:[a.jsx("input",{type:"text",value:s,onChange:l=>i(l.target.value),placeholder:"@username",className:"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:outline-none mb-4"}),a.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white rounded-lg py-3 px-4 hover:bg-purple-700 transition-colors",children:"Save Username"})]})]})}):null}function rV({isOpen:t,onClose:e,currentEmail:n,onSave:r}){const[s,i]=T.useState(n||""),o=l=>{l.preventDefault(),r(s),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md relative border border-purple-500/20",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("div",{className:"mb-6 flex items-center justify-center",children:a.jsx("img",{src:"/images/apple-pay-icon.svg",alt:"Apple Pay",className:"w-16 h-16"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"Edit Apple Pay Email"}),a.jsx("p",{className:"text-gray-400 mb-6 text-center",children:"Enter the email address associated with your Apple Pay account."}),a.jsxs("form",{onSubmit:o,children:[a.jsx("input",{type:"email",value:s,onChange:l=>i(l.target.value),placeholder:"email@example.com",className:"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:outline-none mb-4"}),a.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white rounded-lg py-3 px-4 hover:bg-purple-700 transition-colors",children:"Save Email"})]})]})}):null}function sV({isOpen:t,onClose:e,currentCashtag:n,onSave:r}){const[s,i]=T.useState(n||""),o=l=>{l.preventDefault(),r(s),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md relative border border-purple-500/20",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx("div",{className:"mb-6 flex items-center justify-center",children:a.jsx("img",{src:"/images/cashapp-icon.svg",alt:"Cash App",className:"w-16 h-16"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"Edit Cash App $Cashtag"}),a.jsx("p",{className:"text-gray-400 mb-6 text-center",children:"Enter your Cash App $Cashtag. Make sure to include the $ symbol."}),a.jsxs("form",{onSubmit:o,children:[a.jsx("input",{type:"text",value:s,onChange:l=>i(l.target.value),placeholder:"$cashtag",className:"w-full p-3 rounded-lg bg-gray-800 text-white border border-gray-700 focus:border-purple-500 focus:outline-none mb-4"}),a.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white rounded-lg py-3 px-4 hover:bg-purple-700 transition-colors",children:"Save $Cashtag"})]})]})}):null}function iV(){const{currentUser:t}=_e(),[e,n]=T.useState([]),[r,s]=T.useState(!0),[i,o]=T.useState(null),[l,u]=T.useState(!1),[d,h]=T.useState(null),[p,g]=T.useState((t==null?void 0:t.venmoUsername)||""),[v,E]=T.useState((t==null?void 0:t.applePayEmail)||""),[S,k]=T.useState((t==null?void 0:t.cashAppTag)||""),[x,y]=T.useState(!1),[b,P]=T.useState(!1),[O,M]=T.useState(!1),[N,_]=T.useState((t==null?void 0:t.preferredPaymentMethod)||""),I=async()=>{if(t!=null&&t.meldCustomerId)try{const z=await ks.shared.getLinkedAccounts(t.meldCustomerId);n(z),z.length>0&&l&&(h("Bank account successfully connected!"),setTimeout(()=>h(null),5e3))}catch(z){console.error("Error fetching linked accounts:",z),o("Failed to load your linked accounts. Please try again later.")}s(!1),u(!1)};T.useEffect(()=>{I()},[t]),T.useEffect(()=>{(async()=>{if(t!=null&&t.uid)try{const U=await Yi.shared.getPreferredMethod(t.uid);U&&_(U)}catch(U){console.error("Error fetching preferred method:",U)}})()},[t]),T.useEffect(()=>{const z=[...e.map(U=>`bank-${U.id}`),p&&"venmo",v&&"applepay",S&&"cashapp"].filter(Boolean);z.length===1&&!N&&C(z[0])},[e,p,v,S,N]),T.useEffect(()=>{let z;return l&&(z=setInterval(I,3e3)),()=>{z&&clearInterval(z)}},[l,t]);const C=async z=>{try{await Yi.shared.setPreferredMethod(t.uid,z),_(z),h("Preferred payment method updated!"),setTimeout(()=>h(null),5e3)}catch(U){console.error("Error setting preferred method:",U),o("Failed to update preferred payment method. Please try again.")}},j=async z=>{if(z==="bank")try{u(!0),o(null),h(null);const U=await ks.shared.getMeldConnectionUrl(t.uid),K=500,X=700,W=(window.screen.width-K)/2,J=(window.screen.height-X)/2,de=window.open(U,"Meld Connect",`width=${K},height=${X},left=${W},top=${J},resizable=yes,scrollbars=yes,status=yes`),dt=setInterval(()=>{de.closed&&(clearInterval(dt),I())},1e3)}catch(U){console.error("Error connecting bank account:",U),o(U.message||"Failed to connect your bank account. Please try again later."),u(!1)}else z==="card"?console.log("Adding card payment method"):z==="venmo"?y(!0):z==="applepay"?P(!0):z==="cashapp"&&M(!0)},R=async z=>{try{g(z),h("Venmo username successfully saved!"),setTimeout(()=>h(null),5e3)}catch(U){console.error("Error saving Venmo username:",U),o("Failed to save Venmo username. Please try again later.")}},A=async z=>{try{E(z),h("Apple Pay email successfully saved!"),setTimeout(()=>h(null),5e3)}catch(U){console.error("Error saving Apple Pay email:",U),o("Failed to save Apple Pay email. Please try again later.")}},q=async z=>{try{k(z),h("Cash App $Cashtag successfully saved!"),setTimeout(()=>h(null),5e3)}catch(U){console.error("Error saving Cash App $Cashtag:",U),o("Failed to save Cash App $Cashtag. Please try again later.")}},be=e.length>0||p||v||S,Z=(z,U,K,X,W,J)=>{const de=`${z}-${U}`,dt=N===de;return a.jsxs("div",{className:"relative mt-4 first:mt-0",children:[dt&&a.jsx("div",{className:"absolute -top-2.5 left-4",children:a.jsx("span",{className:"px-2 py-0.5 bg-yellow-400/10 text-yellow-400 text-xs rounded-full",children:"Preferred Default Method"})}),a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg transition-colors ${dt?"bg-gray-800/80 ring-1 ring-yellow-400/30":"bg-gray-800/50 hover:bg-gray-800/60"}`,children:[a.jsx("div",{className:"flex-1 flex items-center cursor-pointer",onClick:J,children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-12 h-12 ${z==="cashapp"?"bg-green-500/20":z==="applepay"?"bg-gray-700/20":"bg-blue-500/20"} rounded-lg flex items-center justify-center`,children:a.jsx("img",{src:K,alt:X,className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:X}),a.jsx("p",{className:"text-sm text-gray-400",children:W})]})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:hn=>{hn.stopPropagation(),C(de)},className:`p-2 rounded-full transition-colors ${dt?"text-yellow-400":"text-gray-400 hover:text-yellow-400"}`,title:dt?"Current preferred payment method":"Set as preferred payment method",children:a.jsx(FO,{className:"h-5 w-5 fill-current"})}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]})]})]})};return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Payment Methods"}),i&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-red-400",children:i})}),d&&a.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-green-400",children:d})}),be&&a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsx(Ot,{children:a.jsx(Mt,{className:"text-lg font-medium text-purple-100",children:"Your payment methods"})}),a.jsxs(Se,{className:"space-y-6",children:[e.map(z=>a.jsx("div",{children:Z("bank",z.id,"/images/bank-icons.svg",z.bankName,`${z.accountType} •••• ${z.accountNumber.slice(-4)}`,()=>{})},z.id)),p&&Z("venmo","account","/images/venmo-icon.svg","Venmo",p,()=>y(!0)),v&&Z("applepay","account","/images/apple-pay-icon.svg","Apple Pay",v,()=>P(!0)),S&&Z("cashapp","account","/images/cashapp-icon.svg","Cash App",S,()=>M(!0))]})]}),a.jsxs(ge,{className:"bg-gray-900/50 border-purple-500/20",children:[a.jsx(Ot,{children:a.jsx(Mt,{className:"text-lg font-medium text-purple-100",children:be?"Add another payment method":"Add a payment method"})}),a.jsxs(Se,{className:"space-y-4",children:[a.jsxs("button",{onClick:()=>j("bank"),disabled:l,className:"w-full flex items-center justify-between p-4 rounded-lg bg-gray-800/50 hover:bg-gray-800/70 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:a.jsx("img",{src:"/images/bank-icons.svg",alt:"Bank Icons",className:"w-8 h-8"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"text-white font-medium",children:"Online Banking"}),a.jsx("p",{className:"text-sm text-gray-400",children:l?"Connecting to Meld...":"Connect your bank account securely with Meld"})]})]}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]}),a.jsxs("button",{onClick:()=>j("card"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-gray-800/50 hover:bg-gray-800/70 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:a.jsx("img",{src:"/images/card-icons.svg",alt:"Card Icons",className:"w-8 h-8"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"text-white font-medium",children:"Credit/Debit Card"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Instantly fund your account with a card"})]})]}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]}),a.jsxs("button",{onClick:()=>j("venmo"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-gray-800/50 hover:bg-gray-800/70 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:a.jsx("img",{src:"/images/venmo-icon.svg",alt:"Venmo",className:"w-8 h-8 text-[#3396CD]"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"text-white font-medium",children:"Venmo"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Connect your Venmo account"})]})]}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]}),a.jsxs("button",{onClick:()=>j("applepay"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-gray-800/50 hover:bg-gray-800/70 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-700/20 rounded-lg flex items-center justify-center",children:a.jsx("img",{src:"/images/apple-pay-icon.svg",alt:"Apple Pay",className:"w-8 h-8"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"text-white font-medium",children:"Apple Pay"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Connect your Apple Pay account"})]})]}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]}),a.jsxs("button",{onClick:()=>j("cashapp"),className:"w-full flex items-center justify-between p-4 rounded-lg bg-gray-800/50 hover:bg-gray-800/70 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:a.jsx("img",{src:"/images/cashapp-icon.svg",alt:"Cash App",className:"w-8 h-8"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"text-white font-medium",children:"Cash App"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Connect your Cash App account"})]})]}),a.jsx(nr,{className:"h-6 w-6 text-gray-400"})]})]})]}),r&&a.jsx("div",{className:"text-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto"})}),a.jsx(nV,{isOpen:x,onClose:()=>y(!1),currentUsername:p,onSave:R}),a.jsx(rV,{isOpen:b,onClose:()=>P(!1),currentEmail:v,onSave:A}),a.jsx(sV,{isOpen:O,onClose:()=>M(!1),currentCashtag:S,onSave:q})]})}const cu=Sn.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:`flex h-10 w-full rounded-md border border-purple-500/20 bg-gray-900/40 px-3 py-2 text-sm text-black ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500/40 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,ref:r,...n}));cu.displayName="Input";const oV=()=>{const t=br(),{currentUser:e}=_e(),[n,r]=T.useState(""),[s,i]=T.useState(""),[o,l]=T.useState([]),[u,d]=T.useState([]),[h,p]=T.useState(!1),[g,v]=T.useState("");T.useEffect(()=>{const x=setTimeout(async()=>{if(s.length>=2)try{const b=(await zn.searchUsers(s)).filter(P=>P.uid!==e.uid&&!u.some(O=>O.uid===P.uid));l(b)}catch(y){console.error("Error searching users:",y),v("Failed to search users")}else l([])},300);return()=>clearTimeout(x)},[s,e.uid,u]);const E=async x=>{x.preventDefault(),p(!0),v("");try{const y={name:n,pendingMembers:u.map(P=>({uid:P.uid,displayName:P.displayName,username:P.username,phone:P.phone,photoURL:P.photoURL}))},b=await zn.createGroup(y,e);t(`/group/${b.id}`)}catch(y){console.error("Error creating group:",y),v("Failed to create group")}finally{p(!1)}},S=x=>{d(y=>[...y,x]),l(y=>y.filter(b=>b.uid!==x.uid)),i("")},k=x=>{d(y=>y.filter(b=>b.uid!==x.uid))};return a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Create a New Group"}),a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"groupName",className:"block text-sm font-medium text-white mb-2",children:"Enter Group Name"}),a.jsx(cu,{id:"groupName",type:"text",value:n,onChange:x=>r(x.target.value),placeholder:"Enter group name",required:!0,className:"bg-gray-900/40 text-white placeholder-gray-400"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"userSearch",className:"block text-sm font-medium text-white mb-2",children:"Add Members"}),a.jsx(cu,{id:"userSearch",type:"text",value:s,onChange:x=>i(x.target.value),placeholder:"Search by username or phone",className:"bg-gray-900/40 text-white placeholder-gray-400"}),o.length>0&&a.jsx("div",{className:"mt-2 border border-purple-500/20 rounded-md overflow-hidden",children:o.map((x,y)=>a.jsxs("div",{className:"p-3 hover:bg-gray-900/40 cursor-pointer flex items-center justify-between",onClick:()=>S(x),children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[x.photoURL&&a.jsx("img",{src:x.photoURL,alt:x.displayName,className:"w-8 h-8 rounded-full"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white",children:x.displayName}),a.jsx("div",{className:"text-sm text-gray-400",children:x.username||x.phone})]})]}),a.jsx("button",{type:"button",className:"text-purple-500 hover:text-purple-400",children:"Add"})]},`search-${x.uid}-${y}`))}),u.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Selected Members"}),a.jsx("div",{className:"space-y-2",children:u.map((x,y)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-900/40 rounded-md",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[x.photoURL&&a.jsx("img",{src:x.photoURL,alt:x.displayName,className:"w-8 h-8 rounded-full"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-white",children:x.displayName}),a.jsx("div",{className:"text-sm text-gray-400",children:x.username||x.phone})]})]}),a.jsx("button",{type:"button",onClick:()=>k(x),className:"text-red-500 hover:text-red-400",children:"Remove"})]},`selected-${x.uid}-${y}`))})]})]}),g&&a.jsx("div",{className:"text-red-500 text-sm",children:g}),a.jsx("button",{type:"submit",disabled:h||!n.trim(),className:"w-full bg-purple-500 text-white py-2 px-4 rounded-md hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Creating...":"Create Group"})]})]})},aV=({groupId:t,onClose:e})=>{const[n,r]=T.useState(""),[s,i]=T.useState([]),[o,l]=T.useState(!1),u=async h=>{if(r(h),h.length>=2){l(!0);try{const p=await zn.searchUsers(h);i(p)}catch(p){console.error("Error searching users:",p)}finally{l(!1)}}else i([])},d=async h=>{try{await zn.addMembers(t,[h])}catch(p){console.error("Error inviting user:",p)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs(ge,{className:"bg-gray-900/40 border-purple-500/20 w-[400px]",children:[a.jsxs(Ot,{className:"relative",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx(Mt,{className:"text-white",children:"Invite Users"})]}),a.jsxs(Se,{className:"space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(c1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),a.jsx("input",{type:"text",value:n,onChange:h=>u(h.target.value),placeholder:"Search by username or phone",className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),a.jsx("div",{className:"space-y-2",children:o?a.jsx("div",{className:"text-center text-gray-400",children:"Searching..."}):s.length>0?s.map(h=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:h.photoURL||"/images/profile_1.png",alt:h.displayName,className:"w-10 h-10 rounded-full"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:h.displayName}),a.jsx("p",{className:"text-gray-400 text-sm",children:h.username||h.phone})]})]}),a.jsx("button",{onClick:()=>d(h),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",children:a.jsx(ig,{className:"h-5 w-5"})})]},h.uid)):n.length>=2?a.jsx("div",{className:"text-center text-gray-400",children:"No users found"}):null})]})]})})},lV=({groupId:t,onClose:e})=>{var h;const{currentUser:n}=_e(),[r,s]=T.useState(null),[i,o]=T.useState(!0),[l,u]=T.useState(!1);T.useEffect(()=>{(async()=>{try{const g=await zn.getGroup(t);s(g)}catch(g){console.error("Error fetching group:",g)}finally{o(!1)}})()},[t]);const d=p=>{var g;if((r==null?void 0:r.ownerId)===p.uid)return a.jsx("span",{className:"px-2 py-0.5 bg-purple-400/10 text-purple-400 text-xs rounded-full",children:"Owner"});if((g=r==null?void 0:r.pendingMembers)!=null&&g.find(v=>v.identifier===p.uid)){const v=r.pendingMembers.find(E=>E.identifier===p.uid);if(!v.status||v.status==="pending")return a.jsx("span",{className:"px-2 py-0.5 bg-yellow-400/10 text-yellow-400 text-xs rounded-full",children:"Invite Pending"})}return a.jsx("span",{className:"px-2 py-0.5 bg-green-400/10 text-green-400 text-xs rounded-full",children:"No Outstanding Dues"})};return i?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsx(ge,{className:"bg-gray-900/40 border-purple-500/20",children:a.jsx(Se,{className:"p-4",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs(ge,{className:"bg-gray-900/40 border-purple-500/20 w-[400px]",children:[a.jsxs(Ot,{className:"relative",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:a.jsx(Ye,{className:"h-6 w-6"})}),a.jsx(Mt,{className:"text-white",children:(r==null?void 0:r.name)||"Group"})]}),a.jsxs(Se,{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-16 h-16 flex items-center justify-center text-3xl bg-gray-800 rounded-full",children:(r==null?void 0:r.emoji)||"🏈"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{className:`flex-1 py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-lg 
                transition-colors flex items-center justify-center space-x-2`,children:[a.jsx(Rn,{className:"w-5 h-5"}),a.jsx("span",{children:"Add expense"})]}),a.jsxs("button",{onClick:()=>u(!0),className:`flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg 
                  transition-colors flex items-center justify-center space-x-2`,children:[a.jsx(ig,{className:"w-5 h-5"}),a.jsx("span",{children:"Invite users"})]})]}),a.jsx("div",{className:"space-y-3",children:(h=r==null?void 0:r.members)==null?void 0:h.map((p,g)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:p.photoURL||"/images/profile_1.png",alt:p.displayName,className:"w-10 h-10 rounded-full"}),a.jsx("div",{children:a.jsx("p",{className:"text-white font-medium",children:p.displayName})})]}),d(p)]},g))}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-white",children:"$0"}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Group Balance"})]})]})]})}),l&&a.jsx(aV,{groupId:t,onClose:()=>u(!1)})]})},cV=()=>{const{id:t}=yk(),e=br(),n=()=>{e("/profile")};return a.jsx(lV,{groupId:t,onClose:n})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV="/firebase-messaging-sw.js",dV="/firebase-cloud-messaging-push-scope",x1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hV="https://fcmregistrations.googleapis.com/v1",w1="google.c.a.c_id",fV="google.c.a.c_l",pV="google.c.a.ts",mV="google.c.a.e";var yx;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(yx||(yx={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Fa;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Fa||(Fa={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gV(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="fcm_token_details_db",yV=5,vx="fcm_token_object_Store";async function vV(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Eh))return null;let e=null;return(await ju(Eh,yV,{upgrade:async(r,s,i,o)=>{var l;if(s<2||!r.objectStoreNames.contains(vx))return;const u=o.objectStore(vx),d=await u.index("fcmSenderId").get(t);if(await u.clear(),!!d){if(s===2){const h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(l=h.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:er(h.vapidKey)}}}else if(s===3){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:er(h.auth),p256dh:er(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:er(h.vapidKey)}}}else if(s===4){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:er(h.auth),p256dh:er(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:er(h.vapidKey)}}}}}})).close(),await nh(Eh),await nh("fcm_vapid_details_db"),await nh("undefined"),xV(e)?e:null}function xV(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="firebase-messaging-database",_V=1,$a="firebase-messaging-store";let Nh=null;function _1(){return Nh||(Nh=ju(wV,_V,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($a)}}})),Nh}async function bV(t){const e=b1(t),r=await(await _1()).transaction($a).objectStore($a).get(e);if(r)return r;{const s=await vV(t.appConfig.senderId);if(s)return await lg(t,s),s}}async function lg(t,e){const n=b1(t),s=(await _1()).transaction($a,"readwrite");return await s.objectStore($a).put(e,n),await s.done,e}function b1({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},_t=new us("messaging","Messaging",EV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){const n=await ug(t),r=E1(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(cg(t.appConfig),s)).json()}catch(o){throw _t.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw _t.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw _t.create("token-subscribe-no-token");return i.token}async function TV(t,e){const n=await ug(t),r=E1(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${cg(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw _t.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw _t.create("token-update-failed",{errorInfo:o})}if(!i.token)throw _t.create("token-update-no-token");return i.token}async function IV(t,e){const r={method:"DELETE",headers:await ug(t)};try{const i=await(await fetch(`${cg(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw _t.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw _t.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function cg({projectId:t}){return`${hV}/projects/${t}/registrations`}async function ug({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function E1({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==x1&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=7*24*60*60*1e3;async function kV(t){const e=await AV(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:er(e.getKey("auth")),p256dh:er(e.getKey("p256dh"))},r=await bV(t.firebaseDependencies);if(r){if(jV(r.subscriptionOptions,n))return Date.now()>=r.createTime+SV?CV(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await IV(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return xx(t.firebaseDependencies,n)}else return xx(t.firebaseDependencies,n)}async function CV(t,e){try{const n=await TV(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await lg(t.firebaseDependencies,r),n}catch(n){throw n}}async function xx(t,e){const r={token:await NV(t,e),createTime:Date.now(),subscriptionOptions:e};return await lg(t,r),r.token}async function AV(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gV(e)})}function jV(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return PV(e,t),RV(e,t),DV(e,t),e}function PV(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function RV(t,e){e.data&&(t.data=e.data)}function DV(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;l&&(t.fcmOptions.link=l);const u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){return typeof t=="object"&&!!t&&w1 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){if(!t||!t.options)throw Th("App Configuration Object");if(!t.name)throw Th("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Th(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Th(t){return _t.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=OV(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(t){try{t.swRegistration=await navigator.serviceWorker.register(uV,{scope:dV}),t.swRegistration.update().catch(()=>{})}catch(e){throw _t.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UV(t,e){if(!e&&!t.swRegistration&&await VV(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw _t.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FV(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=x1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,e){if(!navigator)throw _t.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw _t.create("permission-blocked");return await FV(t,e==null?void 0:e.vapidKey),await UV(t,e==null?void 0:e.serviceWorkerRegistration),kV(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $V(t,e,n){const r=BV(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[w1],message_name:n[fV],message_time:n[pV],message_device_time:Math.floor(Date.now()/1e3)})}function BV(t){switch(t){case Fa.NOTIFICATION_CLICKED:return"notification_open";case Fa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Fa.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(wx(n)):t.onMessageHandler.next(wx(n)));const r=n.data;LV(r)&&r[mV]==="1"&&await $V(t,n.messageType,r)}const _x="@firebase/messaging",bx="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=t=>{const e=new MV(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>zV(e,n)),e},WV=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>N1(e,r)}};function HV(){zt(new Pt("messaging",qV,"PUBLIC")),zt(new Pt("messaging-internal",WV,"PRIVATE")),et(_x,bx),et(_x,bx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GV(){try{await Jp()}catch{return!1}return typeof window<"u"&&Xp()&&tb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t,e){if(!navigator)throw _t.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(t=no()){return GV().then(e=>{if(!e)throw _t.create("unsupported-browser")},e=>{throw _t.create("indexed-db-unsupported")}),Wn(fe(t),"messaging").getImmediate()}async function YV(t,e){return t=fe(t),N1(t,e)}function XV(t,e){return t=fe(t),KV(t,e)}HV();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="us-central1";class ZV{constructor(e,n,r,s,i=Yf,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new JV(n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Yf}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function eU(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const Ex="@firebase/functions",Nx="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU="auth-internal",nU="app-check-internal",rU="messaging-internal";function sU(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(tU),l=r.getProvider(rU),u=r.getProvider(nU);return new ZV(i,o,l,u,s,t)};zt(new Pt(T1,n,"PUBLIC").setMultipleInstances(!0)),et(Ex,Nx,e),et(Ex,Nx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t=no(),e=Yf){const r=Wn(fe(t),T1).getImmediate({identifier:e}),s=Yp("functions");return s&&oU(r,...s),r}function oU(t,e,n){eU(fe(t),e,n)}sU(fetch.bind(self));class aU{constructor(){this.messaging=QV(yh),this.db=wE(yh),this.functions=iU(yh)}async registerServiceWorker(){try{if(!("serviceWorker"in navigator))throw new Error("Service Worker is not supported in this browser");const e=await navigator.serviceWorker.getRegistration("/firebase-messaging-sw.js");if(e)return console.log("Using existing service worker registration"),e;console.log("Registering service worker...");const n=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/",updateViaCache:"none"});return console.log("Service Worker registered successfully:",n),await navigator.serviceWorker.ready,console.log("Service Worker is ready"),n}catch(e){throw console.error("Error registering service worker:",e),e}}async initializePushNotifications(){try{console.log("Initializing push notifications..."),console.log("Requesting notification permission...");const e=await Notification.requestPermission();if(console.log("Notification permission status:",e),e!=="granted")return console.log("Notification permission denied"),null;const n=await this.registerServiceWorker();console.log("Getting messaging token...");const r=await YV(this.messaging,{vapidKey:void 0,serviceWorkerRegistration:n});if(r)return console.log("Successfully obtained push token"),r;throw new Error("Failed to obtain push token")}catch(e){throw console.error("Error initializing push notifications:",e),e}}async saveNotificationPreferences(e,n){try{console.log("Saving notification preferences for user:",e);const r=Ae(this.db,"users",e);await wn(r,{notificationPreferences:{inApp:n.inApp??!0,sms:n.sms??!1,email:n.email??!1,pushToken:n.pushToken},lastUpdated:on()}),console.log("Notification preferences saved successfully")}catch(r){throw console.error("Error saving notification preferences:",r),r}}async getNotificationPreferences(e){try{console.log("Getting notification preferences for user:",e);const n=Ae(this.db,"users",e),r=await Bt(n);if(r.exists()){const i=r.data().notificationPreferences||{inApp:!0,sms:!1,email:!1,pushToken:null};return console.log("Retrieved notification preferences:",i),i}return console.log("No notification preferences found, returning defaults"),{inApp:!0,sms:!1,email:!1,pushToken:null}}catch(n){throw console.error("Error getting notification preferences:",n),n}}async sendNotification(e,n){try{console.log("Sending notification to user:",e);const r=Ae(this.db,"users",e),s=await Bt(r);if(!s.exists())throw new Error("User not found");const i=s.data();if(await wn(r,{notifications:ER({title:n.title,body:n.body,type:n.type,timestamp:new Date().toISOString(),read:!1,email:n.email})}),n.email&&i.email){const o=Ae(this.db,"mail",`${Date.now()}_${e}`);await wn(o,{to:i.email,message:{subject:n.title,text:n.body},createdAt:on()})}return console.log("Notification sent successfully"),!0}catch(r){throw console.error("Error sending notification:",r),r}}async storeInAppNotification(e,n){try{console.log("Storing in-app notification for user:",e);const r=Ae(this.db,"users",e),s=await Bt(r);if(!s.exists())throw new Error("User document not found");const o=s.data().notifications||[];o.push({...n,timestamp:new Date,read:!1}),await wn(r,{notifications:o}),console.log("In-app notification stored successfully")}catch(r){throw console.error("Error storing in-app notification:",r),r}}onPushNotification(e){return console.log("Setting up push notification listener"),XV(this.messaging,n=>{console.log("Received foreground message:",n),e(n)})}}const Ur=new aU,lU=()=>{const t=br(),{currentUser:e}=_e(),[n,r]=T.useState({inApp:!0,email:!1,pushToken:null}),[s,i]=T.useState(!0),[o,l]=T.useState(null),[u,d]=T.useState(!1),[h,p]=T.useState(!1);T.useEffect(()=>{(async()=>{try{if(!e){t("/login");return}console.log("Loading notification preferences...");const S=await Ur.getNotificationPreferences(e.uid);console.log("Loaded preferences:",S),S.inApp&&await Notification.requestPermission()!=="granted"&&(S.inApp=!1,S.pushToken=null,await Ur.saveNotificationPreferences(e.uid,S)),r(S)}catch(S){console.error("Error loading preferences:",S),l("Failed to load notification preferences. Please try refreshing the page.")}finally{i(!1)}})()},[t,e]);const g=async E=>{if(!u)try{d(!0),l(null);const S={...n,[E]:!n[E]};if(E==="inApp"&&S.inApp)try{console.log("Initializing push notifications...");const k=await Ur.initializePushNotifications();k?(console.log("Successfully obtained push token"),S.pushToken=k):(l("Push notifications were denied. Please enable them in your browser settings to receive notifications."),S.inApp=!1,S.pushToken=null)}catch(k){console.error("Error initializing push notifications:",k),l("Failed to enable push notifications. Please check your browser settings and try again."),S.inApp=!1,S.pushToken=null}E==="inApp"&&!S.inApp&&(S.pushToken=null),console.log("Saving new preferences:",S),await Ur.saveNotificationPreferences(e.uid,S),r(S)}catch(S){console.error("Error updating preferences:",S),l("Failed to update preferences. Please try again."),r(n)}finally{d(!1)}},v=async()=>{if(!h)try{p(!0),l(null);const E={title:"Test Notification",body:"This is a test notification to verify your notification settings.",type:"test",email:!0};await Ur.sendNotification(e.uid,E),l({type:"success",message:"Test notification sent successfully! Check your email."})}catch(E){console.error("Error sending test notification:",E),l("Failed to send test notification. Please try again.")}finally{p(!1)}};return s?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(Go,{className:"w-6 h-6 text-blue-500 animate-spin"})}):a.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[a.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Notification Settings"}),o&&a.jsxs("div",{className:`${o.type==="success"?"bg-green-500/10 border-green-500/20 text-green-600":"bg-red-500/10 border-red-500/20 text-red-600"} px-4 py-3 rounded-lg mb-6 flex items-start border`,children:[a.jsx(o1,{className:"h-5 w-5 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("p",{children:o.type==="success"?o.message:o})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900 rounded-lg border border-gray-800",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white",children:"In-App Notifications"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Receive notifications within the app and browser push notifications"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.inApp,onChange:()=>!u&&g("inApp"),disabled:u}),a.jsx("div",{className:`w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 ${u?"opacity-50":""}`,children:u&&a.jsx(Go,{className:"w-4 h-4 text-white animate-spin absolute top-1 left-1.5"})})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900 rounded-lg border border-gray-800",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-white",children:"Email Notifications"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Receive important updates via email"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.email,onChange:()=>!u&&g("email"),disabled:u}),a.jsx("div",{className:`w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 ${u?"opacity-50":""}`,children:u&&a.jsx(Go,{className:"w-4 h-4 text-white animate-spin absolute top-1 left-1.5"})})]})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsxs("button",{onClick:v,disabled:h||!n.email,className:`flex items-center px-4 py-2 rounded-lg text-white ${n.email?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 cursor-not-allowed"}`,children:[h?a.jsx(Go,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(MO,{className:"w-4 h-4 mr-2"}),"Send Test Notification"]})}),a.jsx("div",{className:"mt-8",children:a.jsx(v1,{})}),a.jsxs("div",{className:"mt-8 p-4 bg-gray-900/50 rounded-lg border border-gray-800",children:[a.jsx("h4",{className:"font-semibold mb-2 text-white",children:"About Notifications"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-400",children:[a.jsx("li",{children:"In-app notifications appear in your notification center and as browser push notifications"}),a.jsx("li",{children:"Email notifications are sent to your registered email address for important updates"}),a.jsx("li",{children:"You can change these settings at any time"}),a.jsx("li",{children:"Push notifications require browser permission and may not work in all browsers"}),n.pushToken&&a.jsx("li",{className:"text-green-400",children:"Push notifications are currently enabled and working"})]})]})]})]})},I1=Sn.forwardRef(({className:t,...e},n)=>a.jsx("table",{ref:n,className:`w-full caption-bottom text-sm ${t}`,...e}));I1.displayName="Table";const S1=Sn.forwardRef(({className:t,...e},n)=>a.jsx("thead",{ref:n,className:`border-b border-purple-500/20 ${t}`,...e}));S1.displayName="TableHeader";const k1=Sn.forwardRef(({className:t,...e},n)=>a.jsx("tbody",{ref:n,className:`${t}`,...e}));k1.displayName="TableBody";const Xf=Sn.forwardRef(({className:t,...e},n)=>a.jsx("tr",{ref:n,className:`border-b border-purple-500/20 transition-colors hover:bg-gray-800/50 ${t}`,...e}));Xf.displayName="TableRow";const _s=Sn.forwardRef(({className:t,...e},n)=>a.jsx("th",{ref:n,className:`h-12 px-4 text-left align-middle font-medium text-white ${t}`,...e}));_s.displayName="TableHead";const bs=Sn.forwardRef(({className:t,...e},n)=>a.jsx("td",{ref:n,className:`p-4 align-middle text-white ${t}`,...e}));bs.displayName="TableCell";const cU=()=>{const[t,e]=T.useState([]),[n,r]=T.useState(!0),[s,i]=T.useState(""),[o,l]=T.useState(null);T.useEffect(()=>{(async()=>{try{const h=dr(ie,"users"),p=xn(h,yR("createdAt","desc")),v=(await Vn(p)).docs.map(E=>{var S;return{id:E.id,...E.data(),createdAt:(S=E.data().createdAt)==null?void 0:S.toDate()}});e(v)}catch(h){l("Failed to fetch users"),console.error("Error fetching users:",h)}finally{r(!1)}})()},[]);const u=t.filter(d=>{var p,g,v,E;const h=s.toLowerCase();return((p=d.email)==null?void 0:p.toLowerCase().includes(h))||((g=d.username)==null?void 0:g.toLowerCase().includes(h))||((v=d.firstName)==null?void 0:v.toLowerCase().includes(h))||((E=d.lastName)==null?void 0:E.toLowerCase().includes(h))});return o?a.jsx("div",{className:"p-4 bg-red-500/10 text-red-500 rounded-lg border border-red-500/20",children:o}):a.jsxs(ge,{className:"bg-gray-900/40 border-purple-500/20",children:[a.jsx(Ot,{className:"space-y-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Mt,{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(og,{className:"h-6 w-6"}),"User Management"]}),a.jsxs("div",{className:"relative w-64",children:[a.jsx(c1,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),a.jsx(cu,{placeholder:"Search users...",value:s,onChange:d=>i(d.target.value),className:"pl-9 bg-gray-800/50 border-purple-500/20"})]})]})}),a.jsx(Se,{children:n?a.jsx("div",{className:"text-center py-4",children:"Loading users..."}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(I1,{children:[a.jsx(S1,{children:a.jsxs(Xf,{children:[a.jsx(_s,{children:"Username"}),a.jsx(_s,{children:"Email"}),a.jsx(_s,{children:"Name"}),a.jsx(_s,{children:"Phone"}),a.jsx(_s,{children:"Created"}),a.jsx(_s,{children:"Dwolla Status"})]})}),a.jsx(k1,{children:u.map(d=>{var h;return a.jsxs(Xf,{children:[a.jsx(bs,{className:"font-medium",children:d.username}),a.jsx(bs,{children:d.email}),a.jsx(bs,{children:`${d.firstName||""} ${d.lastName||""}`}),a.jsx(bs,{children:d.phoneNumber}),a.jsx(bs,{children:((h=d.createdAt)==null?void 0:h.toLocaleDateString())||"N/A"}),a.jsx(bs,{children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium
                          ${d.dwollaCustomerId?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:d.dwollaCustomerId?"Verified":"Pending"})})]},d.id)})})]})})})]})},uU="BankrollAdmin2024!",Tx="bankroll_admin_auth",dU=({children:t})=>{const{currentUser:e}=_e(),[n,r]=T.useState(!0),[s,i]=T.useState(""),[o,l]=T.useState(""),[u,d]=T.useState(()=>localStorage.getItem(Tx)==="true");if(!e)return a.jsx(ra,{to:"/",replace:!0});const h=p=>{p.preventDefault(),s===uU?(d(!0),r(!1),localStorage.setItem(Tx,"true")):l("Incorrect password")};return u?t:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(ge,{className:"w-full max-w-md bg-gray-800 p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Admin Authentication"}),a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-500 rounded p-3",children:o}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Enter Admin Password"}),a.jsx("input",{type:"password",id:"password",value:s,onChange:p=>i(p.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password"})]}),a.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white rounded-md py-2 px-4 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800",children:"Access Admin Panel"})]})]})})},C1=T.memo(({children:t})=>{const{currentUser:e}=_e();return e?t:a.jsx(ra,{to:"/",replace:!0})});C1.displayName="ProtectedRoute";const A1=T.memo(()=>{const{currentUser:t,isNewUser:e}=_e();return T.useEffect(()=>{let n=!0,r=()=>{};const s=async i=>{var o,l,u;if(!(!i||!n||e))try{await new Promise(h=>setTimeout(h,3e3));const d=await Ur.getNotificationPreferences(i.uid);if(d.inApp&&!d.pushToken){console.log("Initializing push notifications...");const h=await Ur.initializePushNotifications();h&&n&&(console.log("Successfully obtained push token"),await Ur.saveNotificationPreferences(i.uid,{...d,pushToken:h}))}else console.log("Push notifications already initialized or disabled")}catch(d){(o=d.message)!=null&&o.includes("denied")||(l=d.message)!=null&&l.includes("blocked")||(u=d.message)!=null&&u.includes("permissions")?console.log("Push notifications not available:",d.message):console.error("Error initializing notifications:",d)}};return r=Oe.onAuthStateChanged(async i=>{i&&n&&!e&&setTimeout(()=>n&&s(i),2e3)}),()=>{n=!1,r()}},[t,e]),t?a.jsx(I0,{children:a.jsxs(N0,{children:[a.jsx(He,{path:"/",element:a.jsx(ra,{to:"/spend",replace:!0})}),a.jsxs(He,{element:a.jsx(C1,{children:a.jsx(zO,{})}),children:[a.jsx(He,{path:"/banking",element:a.jsx(UM,{})}),a.jsx(He,{path:"/wallets",element:a.jsx(FM,{})}),a.jsx(He,{path:"/leagues",element:a.jsx(QM,{})}),a.jsx(He,{path:"/send",element:a.jsx(YM,{})}),a.jsx(He,{path:"/spend",element:a.jsx(eV,{})}),a.jsx(He,{path:"/profile",element:a.jsx(tV,{})}),a.jsx(He,{path:"/payment-methods",element:a.jsx(iV,{})}),a.jsx(He,{path:"/create-group",element:a.jsx(oV,{})}),a.jsx(He,{path:"/group/:id",element:a.jsx(cV,{})}),a.jsx(He,{path:"/notifications",element:a.jsx(lU,{})}),a.jsx(He,{path:"/admin",element:a.jsx(dU,{children:a.jsx(cU,{})})})]}),a.jsx(He,{path:"*",element:a.jsx(ra,{to:"/spend",replace:!0})})]})}):a.jsx(I0,{children:a.jsxs(N0,{children:[a.jsx(He,{path:"/",element:a.jsx(AM,{})}),a.jsx(He,{path:"/signup",element:a.jsx(jM,{})}),a.jsx(He,{path:"/login",element:a.jsx(PM,{})}),a.jsx(He,{path:"*",element:a.jsx(ra,{to:"/",replace:!0})})]})})});A1.displayName="AppRoutes";const j1=T.memo(()=>a.jsx(e1,{children:a.jsx(bO,{children:a.jsx(s1,{children:a.jsx(TO,{children:a.jsx(A1,{})})})})}));j1.displayName="App";"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{const t=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("ServiceWorker registration successful:",t)}catch(t){console.error("ServiceWorker registration failed:",t)}});Ih.createRoot(document.getElementById("root")).render(a.jsx(Sn.StrictMode,{children:a.jsx(j1,{})}));
//# sourceMappingURL=main-CgjGVzBK.js.map
