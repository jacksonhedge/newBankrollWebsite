var E=Object.defineProperty;var U=(a,t,l)=>t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;var g=(a,t,l)=>U(a,typeof t!="symbol"?t+"":t,l);import{d as u,a as C,g as L,r as c,i as F,j as e}from"./index-BRL3oD8D-1733462282121.js";class P{constructor(){g(this,"firestore");if(!u)throw new Error("Firestore must be initialized before using UserService");this.firestore=u}async getAllUsers(){try{const t=C(this.firestore,"users");return(await L(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error fetching users:",t),t}}}const R=new P,V=()=>{const[a,t]=c.useState([]),[l,n]=c.useState(!0),[d,x]=c.useState(null),[f,w]=c.useState(!1),[o,j]=c.useState(""),y=F(),N="bankroll123",b=s=>{s.preventDefault(),o.trim()===N?(w(!0),v()):x("Incorrect password")},v=async()=>{try{const s=await R.getAllUsers();t(s),n(!1)}catch(s){console.error("Error fetching users:",s),x(s.message),n(!1)}},k=()=>{y("/")},S=s=>{console.log("View details for user:",s)},A=a.length,B=a.reduce((s,i)=>{var r;return s+(((r=i.referrals)==null?void 0:r.length)||0)},0),D=a.reduce((s,i)=>{var r;return s+(((r=i.leagues)==null?void 0:r.length)||0)},0);return f?l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"text-xl",children:"Loading users..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("nav",{className:"bg-white shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/images/BankrollLogoTransparent.png",alt:"Bankroll Logo",className:"h-8 w-auto"}),e.jsx("span",{className:"ml-2 text-xl font-semibold",children:"Admin Dashboard"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:k,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Back to Main"})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:A})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Total Referrals"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:B})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Total Fantasy Leagues"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:D})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profile"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fantasy Leagues"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Friends"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Referrals"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cash Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bonus Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>{var i,r,m,h,p;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("img",{src:s.profileImage||"/images/profile_1.jpeg",alt:"Profile",className:"h-10 w-10 rounded-full"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.email}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.firstName," ",s.lastName]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((i=s.leagues)==null?void 0:i.length)||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((r=s.friends)==null?void 0:r.length)||0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((m=s.referrals)==null?void 0:m.length)||0}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",((h=s.totalCashBalance)==null?void 0:h.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",((p=s.totalBonusBalance)==null?void 0:p.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("button",{onClick:()=>S(s.id),className:"text-blue-600 hover:text-blue-900",children:"View Details"})})]},s.id)})})]})})})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Admin Access"}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"password",value:o,onChange:s=>j(s.target.value),placeholder:"Enter admin password",className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoComplete:"new-password"})}),d&&e.jsx("div",{className:"mb-4 text-red-500 text-sm text-center",children:d}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-colors",children:"Access Admin Panel"})]})]})})};export{V as default};
